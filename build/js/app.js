GoToTrip=function(){function t(){k||(k=setTimeout(function(){k=null,i.fixArticleScrollTablePosition(),w&&i.showArtidleShadow()},66))}var i=this,e=$(document.body),s=$(document),n=$(window),o={top:!1,left:!1},a=$("#gt-is-360"),r=($("#gt-is-480"),$("#gt-is-667")),c=$("#gt-is-768"),l=$("#gt-is-1024"),d=($("#gt-is-1231"),$("header")),g=$("footer"),u=$("#gt-wrapper"),h=$("#gt-up"),f=$("#gt-mobile-menu-switch"),v=$(".gt-enter"),m=$("#gt-header-enter-wrapper"),p=$("#gt-header-enter"),b=$("#gt-header-enter-chose"),C=$("#gt-header-enter-close");if(this.fixBody=function(){o.top||o.left||(o.top=s.scrollTop(),o.left=e.offset().left,e.css({position:"fixed",left:o.left+"px",top:-1*o.top+"px"}))},this.unfixBody=function(){e.css({position:"",left:"",top:""}),s.scrollTop(o.top),o.top=!1,o.left=!1},this.footerHeight=function(){g.outerHeight()>n.height()-50?(g.css("position","static"),u.css("margin-bottom",""),h.css("position","static")):(g.css("position",""),h.css("position",""),u.css("margin-bottom",g.outerHeight()+"px"))},this.deskTopMenuScroll=function(){n.scrollTop()>d.outerHeight()?d.addClass("gt-header-scrolled"):d.removeClass("gt-header-scrolled")},this.pageUp=function(){return $("body,html").animate({scrollTop:0},800),!1},this.upPageButton=function(){$(document).scrollTop()>30?h.addClass("gt-visible"):h.removeClass("gt-visible")},h.on("click",i.pageUp),this.mobileMenuClose=function(){i.unfixBody(),f.removeClass("gt-open"),d.removeClass("gt-open")},this.mobileMenuOpen=function(){i.fixBody(),d.addClass("gt-open"),f.addClass("gt-open")},f.on("click",function(){$(this).hasClass("gt-open")?i.mobileMenuClose():i.mobileMenuOpen()}),this.openEnterForm=function(){m.addClass("gt-open"),setTimeout(function(){p.addClass("gt-open"),C.addClass("gt-open")})},this.closeEnterForm=function(){C.removeClass("gt-open"),p.removeClass("gt-open"),setTimeout(function(){m.removeClass("gt-open")},750)},this.changeEnterRegistration=function(t){p.hasClass($(t.target).attr("class"))||p.removeClass("gt-chosen-enter").removeClass("gt-chosen-registration").addClass($(t.target).attr("class"))},v.each(function(){$(this).on("click",i.openEnterForm)}),C.on("click",i.closeEnterForm),b.on("click",function(t){i.changeEnterRegistration(t)}),this.setBackground=function(){$(".gt-img-holder").each(function(){if($(this).attr("data-bg")){var t=$(this).attr("data-bg");r.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/phone/'+t+'")'):l.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/tablet/'+t+'")'):$(this).css("background-image",'url("./img/backgrounds/desktop/'+t+'")')}})},this.imgHolderFunc=function(t){var i=t.outerHeight()/t.outerWidth(),e=t.find("img");e.outerHeight()/e.outerWidth()>i?$(t).addClass("gt-width"):$(t).addClass("gt-height"),$(t).addClass("gt-visible")},$("div").is(".gt-img-holder")&&i.setBackground(),this.createSlider=function(t,e){function s(){if(y>k){var i="";H&&(i='<div class="gt-slider-arrow-num"><i class="gt-slider-num-curr"></i><i>из</i><i class="gt-slider-num-max"></i></div>'),t.find(".gt-slider-arrow-holder").html('<span class = "gt-slider-arrow left"><i class="fa fa-angle-left fa-2x"></i></span>'+i+'<span class = "gt-slider-arrow right"><i class="fa fa-angle-right fa-2x"></i></span>'),t.find(".left").on("click",function(){l(!1)}),t.find(".right").on("click",function(){l(!0)}),d(),H&&h(),h()}w=!0}function o(i){var e=i||t;e.find(".left").off(),e.find(".right").off(),e.find(".gt-slider-arrow-holder").html(""),w=!1}function l(t,i){i||0===i?S=i:t?S+=1:S-=1,S>y-k?S=y-k:S<0?S=0:(B?g():u(),M&&d(),H&&h())}function d(){var i=t.find(".left"),e=t.find(".right");e.removeClass("not-active"),i.removeClass("not-active"),0==S&&i.addClass("not-active"),S!=y-1&&S!=y-k||e.addClass("not-active")}function g(){if(A){var i=t.find(".gt-slider-nav span");i.removeClass("gt-active"),$(i[S]).addClass("gt-active")}T.css("margin-left",-1*C*S+"px")}function u(t){var i=t||S;$(x).removeClass("gt-open"),$(x[i]).addClass("gt-open")}function h(){t.find(".gt-slider-num-curr").text(S+1),t.find(".gt-slider-num-max").text(y)}function f(){var i=0,e=0;t.on("touchstart",function(t){var e=t.originalEvent;i=Math.abs(e.touches[0].pageX),console.log("touchstart")}),t.on("touchend",function(t){var s=t.originalEvent;e=Math.abs(s.changedTouches[0].pageX),Math.abs(i-e)>50&&l(i>e?!0:!1)})}function v(i){(i||t).off()}function m(){t.attr("data-count")&&(k=parseInt(t.attr("data-count")),$(c).is(":visible")&&(k=3),$(r).is(":visible")&&(k=2),$(a).is(":visible")&&(k=1))}function p(){C=t.outerWidth()/k,t.find(".gt-slider-container").outerWidth((y+1)*C),x.each(function(){$(this).outerWidth(C)})}var b,C,k=1,w=!1,x=t.find(".gt-slider-inner"),T=t.find(".gt-slider-container"),y=x.length,S=e||0,M=t.hasClass("gt-slider-has-arrow"),A=t.hasClass("gt-slider-has-dots"),H=t.hasClass("gt-slider-num"),B=t.hasClass("gt-slider-tram"),E=t.hasClass("gt-slider-fade"),F=t.hasClass("gt-slider-has-clone");E&&u(e),B&&(m(),p(),g()),M&&(t.append('<div class="gt-slider-arrow-holder"></div>'),s()),A&&function(){t.append('<div class="gt-slider-nav"></div>');for(var i=t.find(".gt-slider-nav"),e="",s=0;s<y;s++)e+="<span data-num = "+s+"></span>";i.html(e),i.find("span").first().addClass("gt-active"),t.find(".gt-slider-nav span").on("click",function(){l(!0,+$(this).attr("data-num"))})}(),y>k&&f(),F&&t.find(".gt-slider-inner-cover").each(function(){$(this).on("click",function(){!function(e){if(!$("div").is("#gt-clone")){i.fixBody();var s=$("#gt-body-wrapper");s.append('<div id = "gt-clone-wrapper"   class="container"><div id = "gt-clone-close" class = "gt-slider-clone-close"></div><div id = "gt-clone" class="gt-slider gt-slider-clone gt-slider-fade gt-slider-has-arrow"><div  id = "gt-clone-container" class="gt-slider-container"></div></div></div>'),s.show();var n=$("#gt-clone");t.find(".gt-slider-inner").clone(!0).each(function(){$(this).outerWidth(""),$("#gt-clone-container").append($(this))}),i.createSlider(n,e),$("#gt-clone-close").on("click",function(){!function(t){o(t),v(t),$("#gt-clone-close").off(),$("#gt-clone-wrapper").remove(),$("#gt-body-wrapper").hide(),i.unfixBody()}(n)})}}($(this).parent().index())})}),n.resize(function(){b||(b=setTimeout(function(){b=null,v(),B&&(m(),p(),S>y-k&&(S=y-k),y<=k&&(S=0),g()),w&&(o(),s()),y>k&&f()},132))})},$("div").is(".gt-slider")&&$(".gt-slider").each(function(){i.createSlider($(this))}),this.manageGtActiveUlMenu=function(t){"li"!=t.tagName&&(t=$(t).closest("li")),$(t).closest($("ul")).find("li").removeClass("gt-active"),$(t).addClass("gt-active")},$("*").is(".gt-hundret-menu")&&$(".gt-hundret-menu").on("click",function(t){t.preventDefault(),i.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-button-menu")&&$(".gt-button-menu").on("click",function(t){t.preventDefault(),i.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-menu-news")&&$(".gt-menu-news").on("click",function(t){t.preventDefault(),i.manageGtActiveUlMenu(t.target)}),this.tabSlider=function(){$(".gt-tabs").each(function(){var t=$(this);t.find(".gt-tabs-button").each(function(){$(this).on("click",function(){i.tabSliderAction(t,$(this).index())})}),i.tabSliderActivation(t)})},this.tabSliderActivation=function(t){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-main")).hide(),$(t.find(".gt-tabs-button")[0]).addClass("active"),$(t.find(".gt-tabs-main")[0]).show(),$(t.find(".gt-tabs-main")[0]).addClass("active")},this.tabSliderAction=function(t,i){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-main")).hide(),$(t.find(".gt-tabs-button")[i]).addClass("active"),$(t.find(".gt-tabs-main")[i]).show(),$(t.find(".gt-tabs-main")[i]).addClass("active")},$("div").is(".gt-tabs")&&i.tabSlider(),this.setPlayers=function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/player_api";var e=$("script")[$("script").length-1];e.parentNode.insertBefore(t,e);$(".gt-video").each(function(){var t=$(this);t.find(".gt-video-switch").on("click",function(){$(this).addClass("gt-open"),t.addClass("gt-open"),i.addYouTube(t)})})},this.addYouTube=function(t){function i(){s.mute(),s.playVideo(),t.addClass("gt-video-on"),t.find(".gt-video-uncover").on("click",e),t.find(".gt-video-pause").on("click",function(){s.pauseVideo()}),t.find(".gt-video-play").on("click",function(){s.playVideo()})}function e(){console.log("playFullScreen");var i=t.find("iframe")[0],e=i.requestFullScreen||i.mozRequestFullScreen||i.webkitRequestFullScreen;e&&e.bind(i)()}var s,n="gt-video-"+t.index();t.find(".gt-video-switch").hide("slow"),t.find(".gt-video-inner").attr("id",n).addClass("gt-video-foreground"),s=new YT.Player(n,{width:600,height:400,videoId:t.attr("data-youtube"),playerVars:{playlist:t.attr("data-youtube"),color:"white",loop:1,autoplay:1},events:{onReady:i}})},$("div").is(".gt-video")&&i.setPlayers(),this.fixArticleScrollTablePosition=function(){var t=$(".gt-article-table-wrapper"),i=t.parent(),e=i.position().top,o=e+i.outerHeight(),a=t.outerWidth(),r=s.scrollTop(),c=n.outerHeight();e>r&&t.hasClass("gt-fixed")&&(t.removeClass("gt-fixed"),t.css({left:"",width:""})),e<r+90&&(t.hasClass("gt-fixed")||(t.css({left:t.offset().left+"px",width:a}),t.addClass("gt-fixed")),r+c>o?t.addClass("gt-fixed-bottom"):t.removeClass("gt-fixed-bottom")),t.hasClass("gt-fixed")?t.css({height:c-120+"px"}):t.css({height:""})},this.createArticteScrollTable=function(){if($("div").is(".gt-article")){var t="";$(".gt-article").each(function(){t+='<div class = "gt-article-scroll"><div class = "gt-article-scroll-shadow"></div><p>'+$(this).find("h2").text()+"</p></div>"}),$("#gt-article-scroll-table").html(t)}},this.showArtidleShadow=function(){$(".gt-article").each(function(){var t=$(this).position().top,i=$(this).outerHeight(),e=$(document).scrollTop(),s=0;(s=t>e?0:(e-t)/i)>1&&(s=1);var n=$(".gt-article-scroll")[$(this).index()];$(n).find(".gt-article-scroll-shadow").css("width",100*s+"%")})},$("div").is(".gt-article-table-wrapper")){var k,w=!1;$("div").is(".gt-article-scroll-table")&&(w=!0,i.createArticteScrollTable(),i.showArtidleShadow()),n.scroll(t),n.resize(t)}this.setCurrTime=function(){i.currTime();setInterval(i.currTime,3e4)},this.currTime=function(){$(".gt-curr-time").each(function(){var t=new Date;$(this).attr("data-gmt")&&t.setUTCHours(+$(this).attr("data-gmt"));var i=t.getHours(),e=t.getMinutes(),s=t.getDay(),n=t.getDate(),o=t.getMonth(),a=t.getFullYear();i<10&&(i="0"+i),e<10&&(e="0"+e),s=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],o=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][o],$(".gt-curr-time-time")&&$(".gt-curr-time-time").html(i+":"+e),$(".gt-curr-time-date")&&$(".gt-curr-time-date").html(s+", "+n+" "+o+" "+a)})},$("div").is(".gt-curr-time")&&i.setCurrTime(),this.innerScroll=function(t){t.find(".overview").height()>t.height()&&(t.addClass("isScrolled"),t.tinyscrollbar({thumbSize:40,wheelSpeed:10}))},$("div").is(".gt-inner-scroll")&&$(".gt-inner-scroll").each(function(){i.innerScroll($(this))}),this.createIconsItemsClick=function(){$(".gt-view-cards-icons-item").each(function(){$(this).hasClass("gt-view-cards-icons-visit")?i.createVisitLink($(this)):$(this).hasClass("gt-view-cards-icons-bookmarks")?i.createBookmarksLink($(this)):$(this).hasClass("gt-view-cards-icons-pin")||$(this).hasClass("gt-view-cards-icons-share")?i.toggleGtActive($(this)):$(this).hasClass("gt-view-cards-icons-share")&&i.createShareLink($(this))})},this.createShareLink=function(t){t.removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.toggleGtActive=function(t){(t=$(t)).removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.createVisitLink=function(t){t.closest(".gt-view-cards-inner").attr("data-href")&&t.on("click",function(){i.addVisitedLink(t)})},this.addVisitedLink=function(t){alert("послали данные на бек",t.closest(".gt-view-cards-inner").attr("data-href")),t.toggleClass("gt-active")},this.addBookmark=function(t,i,e){try{window.external.AddFavorite(i,e)}catch(s){try{window.sidebar.addPanel(e,i,"")}catch(s){if("object"==typeof opera)return t.title=e,t.url=i,!0;alert("Нажмите Ctrl-D чтобы добавить страницу в закладки")}}return!1},this.createBookmarksLink=function(t){var e=(t=$(t)).closest(".gt-view-cards-inner");(e=$(e)).attr("data-href")||e.attr("data-href",window.location.href),e.attr("data-bookmark")||e.attr("data-bookmark","GoToTrip"),t.attr("href",e.attr("data-href")),t.attr("rel","sidebar"),t.on("click",function(s){s.preventDefault(),i.addBookmark(t,e.attr("data-href"),e.attr("data-bookmark"))})},$("*").is(".gt-view-cards-icons-bookmarks")&&i.createBookmarksLink(),$("*").is(".gt-view-cards-icons-item")&&i.createIconsItemsClick(),$("#gt-enter-form-facebook").on("click",function(){i.socialEnter("facebook")}),$("#gt-enter-form-twitter").on("click",function(){i.socialEnter("twitter")}),$("#gt-enter-form-google").on("click",function(){i.socialEnter("google")}),$("#gt-reg-form-facebook").on("click",function(){i.socialRegistration("facebook")}),$("#gt-reg-form-twitter").on("click",function(){i.socialRegistration("twitter")}),$("#gt-reg-form-google").on("click",function(){i.socialRegistration("google")}),this.socialRegistration=function(t){alert("Регистрация через "+t)},this.socialEnter=function(t){alert("Вход через "+t)},this.cutNews=function(t){for(var i=t.height(),e=t.find("a"),s=0;s<e.length;s++)if($(e[s]).outerHeight(!0)<i)$(e[s]).addClass("gt-ready"),i-=$(e[s]).outerHeight(!0);else{var n=Math.floor(($(e[s]).text().length-30)*i/$(e[s]).height()),o=$(e[s]).text().substring(0,n-5);$(e[s]).text(o+"..."),$(e[s]).addClass("gt-ready")}},this.cutReadMoreSlider=function(){$(".gt-read-more-slider-text-inner").each(function(){i.cutting($(this),160)})},this.cutting=function(t,i){var e=t.text();e.length>i&&(e=e.slice(0,i)+"...",t.text(e))},$("div").is(".gt-news-cut")&&$(".gt-news-cut").each(function(){i.cutNews($(this))}),$("p").is(".gt-read-more-slider-text-inner")&&i.cutReadMoreSlider(),s.ready(function(){i.footerHeight(),i.deskTopMenuScroll()}),n.scroll(function(){i.upPageButton(),$(".gt-header-menu").is(":visible")&&i.deskTopMenuScroll()}),n.resize(function(){i.deskTopMenuScroll(),i.footerHeight(),d.hasClass("gt-open")&&i.mobileMenuClose(),$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){$(this).removeClass("gt-width"),$(this).removeClass("gt-height"),i.imgHolderFunc($(this))})}),$(window).on("load",function(){$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){i.imgHolderFunc($(this))})}),e.on("click",function(t){})};var goToTrip=new GoToTrip;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJHb1RvVHJpcCIsInNjcm9sbFRocm90dGxlciIsInNjcm9sbFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VsZiIsImZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uIiwic2hhZG93Iiwic2hvd0FydGlkbGVTaGFkb3ciLCJ0aGlzIiwiYm9keSIsIiQiLCJkb2N1bWVudCIsImRvYyIsImRvY1dpbmRvdyIsIndpbmRvdyIsImJvZHlQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0b2tlbjM2MCIsInRva2VuNjY3IiwidG9rZW43NjgiLCJ0b2tlbjEwMjQiLCJndEhlYWRlciIsImd0Rm9vdGVyIiwiZ3RXcmFwcGVyIiwidXBCdXR0b24iLCJtb2JpbGVNZW51U3dpdGNoIiwiZW50ZXJCdXR0b24iLCJlbnRlcldyYXBwZXIiLCJlbnRlckZvcm0iLCJlbnRlckNob3NlIiwiZW50ZXJDbG9zZSIsImZpeEJvZHkiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJjc3MiLCJwb3NpdGlvbiIsInVuZml4Qm9keSIsImZvb3RlckhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwiZGVza1RvcE1lbnVTY3JvbGwiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFnZVVwIiwiYW5pbWF0ZSIsInVwUGFnZUJ1dHRvbiIsIm9uIiwibW9iaWxlTWVudUNsb3NlIiwibW9iaWxlTWVudU9wZW4iLCJoYXNDbGFzcyIsIm9wZW5FbnRlckZvcm0iLCJjbG9zZUVudGVyRm9ybSIsImNoYW5nZUVudGVyUmVnaXN0cmF0aW9uIiwiZXZlbnQiLCJ0YXJnZXQiLCJhdHRyIiwiZWFjaCIsInNldEJhY2tncm91bmQiLCJwYXRoIiwiaXMiLCJpbWdIb2xkZXJGdW5jIiwiZWwiLCJob2xkZXJDb25zdCIsIm91dGVyV2lkdGgiLCJpbWciLCJmaW5kIiwiY3JlYXRlU2xpZGVyIiwiY3VyclNsaWRlciIsImNyZWF0ZUFycm93cyIsImlubmVyQ291bnQiLCJzY3JlZW5Db25zdCIsIm51bUlubmVyIiwibnVtUGFuZWwiLCJodG1sIiwib25lTW92ZUZ1bmN0aW9uIiwiY2hlY2tQb3NpdGlvbiIsInNob3dOdW0iLCJhcnJvd3NSZWFkeSIsImRlc3Ryb3lBcnJvd3MiLCJjbG9uZSIsIm9mZiIsImJ1bCIsIm51bSIsImN1cnJQb3NpdGlvbiIsInRyYW0iLCJ0cmFtU2xpZGVyTW92ZSIsImZhZGVTbGlkZXJNb3ZlIiwiYXJyb3ciLCJyaWdodCIsImRvdHMiLCJhbGxEb3RzIiwiY29udGFpbmVyIiwiYmFzZVdpZHRoIiwiaW5kZXgiLCJpbm5lciIsInRleHQiLCJjcmVhdGVUb3VjaCIsImluaXRpYWxQb2ludCIsImZpbmFsUG9pbnQiLCJlIiwib3JpZ2luYWxFdmVudCIsIk1hdGgiLCJhYnMiLCJ0b3VjaGVzIiwicGFnZVgiLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlZFRvdWNoZXMiLCJkZXN0cm95VG91Y2giLCJmaW5kU2NyZWVuQ29uc3QiLCJwYXJzZUludCIsInNldEJhc2VXaWR0aCIsInNsaWRlclRpbWVPdXQiLCJsZW5ndGgiLCJmYWRlIiwiaGFzQ2xvbmUiLCJhcHBlbmQiLCJuYXYiLCJzcGFucyIsImkiLCJmaXJzdCIsImNyZWF0ZURvdHMiLCJjbGlja1Bvc2l0aW9uIiwiYm9keVdyYXBwZXIiLCJzaG93IiwiY2xvbmVTbGlkZXIiLCJyZW1vdmUiLCJoaWRlIiwiZGVzdHJveUNsb25lU2xpZGVyIiwiY3JlYXRlQ2xvbmVTbGlkZXIiLCJwYXJlbnQiLCJyZXNpemUiLCJtYW5hZ2VHdEFjdGl2ZVVsTWVudSIsInRhZ05hbWUiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJ0YWJTbGlkZXIiLCJjdXJyVGFicyIsInRhYlNsaWRlckFjdGlvbiIsInRhYlNsaWRlckFjdGl2YXRpb24iLCJzZXRQbGF5ZXJzIiwidGFnIiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJzcmMiLCJsYXN0U2NyaXB0VGFnIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsImN1cnJlbnRQbGF5ZXIiLCJhZGRZb3VUdWJlIiwiaW5pdGlhbGl6ZSIsInBsYXllciIsIm11dGUiLCJwbGF5VmlkZW8iLCJwbGF5RnVsbFNjcmVlbiIsInBhdXNlVmlkZW8iLCJpZnJhbWUiLCJyZXF1ZXN0RnVsbFNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4iLCJiaW5kIiwiZWxJZCIsIllUIiwiUGxheWVyIiwid2lkdGgiLCJ2aWRlb0lkIiwicGxheWVyVmFycyIsInBsYXlsaXN0IiwiY29sb3IiLCJsb29wIiwiYXV0b3BsYXkiLCJldmVudHMiLCJvblJlYWR5IiwidGFibGUiLCJ0YWJsZVBhcmVudCIsInRhYmxlUGFyZW50VG9wIiwidGFibGVQYXJlbnRCb3R0b20iLCJ0YWJsZVdpZHRoIiwid2luZG93VG9wIiwid2lkb3dIZWlnaHQiLCJjcmVhdGVBcnRpY3RlU2Nyb2xsVGFibGUiLCJlbEhlaWdodCIsIndpbmRvd1Bvc2l0aW9uIiwieCIsImN1cnJTaGFkb3ciLCJzY3JvbGwiLCJzZXRDdXJyVGltZSIsImN1cnJUaW1lIiwic2V0SW50ZXJ2YWwiLCJkYXRlIiwiRGF0ZSIsInNldFVUQ0hvdXJzIiwiaG91cnMiLCJnZXRIb3VycyIsIm1pbnV0ZXMiLCJnZXRNaW51dGVzIiwid2Vla2RheSIsImdldERheSIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiaW5uZXJTY3JvbGwiLCJ0aW55c2Nyb2xsYmFyIiwidGh1bWJTaXplIiwid2hlZWxTcGVlZCIsImNyZWF0ZUljb25zSXRlbXNDbGljayIsImNyZWF0ZVZpc2l0TGluayIsImNyZWF0ZUJvb2ttYXJrc0xpbmsiLCJ0b2dnbGVHdEFjdGl2ZSIsImNyZWF0ZVNoYXJlTGluayIsInRvZ2dsZUNsYXNzIiwiYWRkVmlzaXRlZExpbmsiLCJhbGVydCIsImFkZEJvb2ttYXJrIiwiYSIsInVybCIsInRpdGxlIiwiZXh0ZXJuYWwiLCJBZGRGYXZvcml0ZSIsInNpZGViYXIiLCJhZGRQYW5lbCIsIm9wZXJhIiwibG9jYXRpb24iLCJocmVmIiwic29jaWFsRW50ZXIiLCJzb2NpYWxSZWdpc3RyYXRpb24iLCJ0b2tlbiIsImN1dE5ld3MiLCJtYXhIZWlnaHQiLCJsaW5rcyIsImN1dHRpbmdMZW5ndGgiLCJmbG9vciIsImN1dHRuaW5nIiwic3Vic3RyaW5nIiwiY3V0UmVhZE1vcmVTbGlkZXIiLCJjdXR0aW5nIiwibmV3c1RleHQiLCJzbGljZSIsInJlYWR5IiwiZ29Ub1RyaXAiXSwibWFwcGluZ3MiOiJBQUtBQSxTQUFXLFdBaXVCSCxTQUFTQyxJQUNBQyxJQUNEQSxFQUFnQkMsV0FBVyxXQUN2QkQsRUFBZ0IsS0FDaEJFLEVBQUtDLGdDQUNEQyxHQUNBRixFQUFLRyxxQkFHVixLQXh1QmYsSUFBSUgsRUFBT0ksS0FDUEMsRUFBT0MsRUFBRUMsU0FBU0YsTUFDbEJHLEVBQU1GLEVBQUVDLFVBQ1JFLEVBQVlILEVBQUVJLFFBQ2RDLEdBQ0lDLEtBQUssRUFDTEMsTUFBTSxHQUVWQyxFQUFXUixFQUFFLGNBRWJTLEdBRFdULEVBQUUsY0FDRkEsRUFBRSxlQUNiVSxFQUFXVixFQUFFLGNBQ2JXLEVBQVlYLEVBQUUsZUFFZFksR0FEWVosRUFBRSxlQUNIQSxFQUFFLFdBQ2JhLEVBQVdiLEVBQUUsVUFDYmMsRUFBWWQsRUFBRSxlQUNkZSxFQUFXZixFQUFFLFVBQ2JnQixFQUFtQmhCLEVBQUUsMEJBQ3JCaUIsRUFBY2pCLEVBQUUsYUFDaEJrQixFQUFlbEIsRUFBRSw0QkFDakJtQixFQUFZbkIsRUFBRSxvQkFDZG9CLEVBQWFwQixFQUFFLDBCQUNmcUIsRUFBYXJCLEVBQUUsMEJBNnJCbkIsR0E1ckJBRixLQUFLd0IsUUFBVSxXQUNQakIsRUFBYUMsS0FBT0QsRUFBYUUsT0FDckNGLEVBQWFDLElBQU1KLEVBQUlxQixZQUN2QmxCLEVBQWFFLEtBQU9SLEVBQUt5QixTQUFTakIsS0FDbENSLEVBQUswQixLQUNEQyxTQUFVLFFBQ1ZuQixLQUFNRixFQUFhRSxLQUFPLEtBQzFCRCxL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QUFjbkQsRUFBRUYsV0FLakNDLEVBQUtzQyxHQUFHLFFBQVMsU0FBVU8sT0FPL0IsSUFBSTZMLFNBQVcsSUFBSW5QIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v0YTRg9C90LrRhtC40Y8sINC+0L/RgNC10LTQtdC70Y/RjtGJ0LDRjyDQt9Cw0YDQtdCz0LjRgdGC0LLQuNGA0L7QstCw0L3QvdGL0Lkg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC40LvQuCDQvdC10YJcclxuXHJcbi8vINC/0YDQtdC00YPRgdC80L7RgtGA0LXRgtGMINCy0YvRhdC+0LQg0LjQtyDQsNC60LrQsNGD0L3RgtCwXHJcblxyXG5cclxuR29Ub1RyaXAgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgIGJvZHkgPSAkKGRvY3VtZW50LmJvZHkpLFxyXG4gICAgICAgIGRvYyA9ICQoZG9jdW1lbnQpLFxyXG4gICAgICAgIGRvY1dpbmRvdyA9ICQod2luZG93KSxcclxuICAgICAgICBib2R5UG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHRvcDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxlZnQ6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2tlbjM2MCA9ICQoXCIjZ3QtaXMtMzYwXCIpLFxyXG4gICAgICAgIHRva2VuNDgwID0gJChcIiNndC1pcy00ODBcIiksXHJcbiAgICAgICAgdG9rZW42NjcgPSAkKFwiI2d0LWlzLTY2N1wiKSxcclxuICAgICAgICB0b2tlbjc2OCA9ICQoXCIjZ3QtaXMtNzY4XCIpLFxyXG4gICAgICAgIHRva2VuMTAyNCA9ICQoXCIjZ3QtaXMtMTAyNFwiKSxcclxuICAgICAgICB0b2tlbjEyMzEgPSAkKFwiI2d0LWlzLTEyMzFcIiksXHJcbiAgICAgICAgZ3RIZWFkZXIgPSAkKFwiaGVhZGVyXCIpLFxyXG4gICAgICAgIGd0Rm9vdGVyID0gJChcImZvb3RlclwiKSxcclxuICAgICAgICBndFdyYXBwZXIgPSAkKFwiI2d0LXdyYXBwZXJcIiksXHJcbiAgICAgICAgdXBCdXR0b24gPSAkKFwiI2d0LXVwXCIpLFxyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2ggPSAkKFwiI2d0LW1vYmlsZS1tZW51LXN3aXRjaFwiKSxcclxuICAgICAgICBlbnRlckJ1dHRvbiA9ICQoJy5ndC1lbnRlcicpLFxyXG4gICAgICAgIGVudGVyV3JhcHBlciA9ICQoJyNndC1oZWFkZXItZW50ZXItd3JhcHBlcicpLFxyXG4gICAgICAgIGVudGVyRm9ybSA9ICQoJyNndC1oZWFkZXItZW50ZXInKSxcclxuICAgICAgICBlbnRlckNob3NlID0gJCgnI2d0LWhlYWRlci1lbnRlci1jaG9zZScpLFxyXG4gICAgICAgIGVudGVyQ2xvc2UgPSAkKCcjZ3QtaGVhZGVyLWVudGVyLWNsb3NlJyk7XHJcbiAgICB0aGlzLmZpeEJvZHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGJvZHlQb3NpdGlvbi50b3AgfHwgYm9keVBvc2l0aW9uLmxlZnQpIHJldHVybjtcclxuICAgICAgICBib2R5UG9zaXRpb24udG9wID0gZG9jLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi5sZWZ0ID0gYm9keS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIGJvZHkuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcclxuICAgICAgICAgICAgbGVmdDogYm9keVBvc2l0aW9uLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIHRvcDogLTEgKiBib2R5UG9zaXRpb24udG9wICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnVuZml4Qm9keSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBib2R5LmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcIlwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBcIlwiLFxyXG4gICAgICAgICAgICB0b3A6IFwiXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2Muc2Nyb2xsVG9wKGJvZHlQb3NpdGlvbi50b3ApO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi50b3AgPSBmYWxzZTtcclxuICAgICAgICBib2R5UG9zaXRpb24ubGVmdCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmZvb3RlckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm9vdGVySGVpZ2h0ID0gZ3RGb290ZXIub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICBpZiAoZm9vdGVySGVpZ2h0ID4gZG9jV2luZG93LmhlaWdodCgpIC0gNTApIHtcclxuICAgICAgICAgICAgZ3RGb290ZXIuY3NzKFwicG9zaXRpb25cIiwgXCJzdGF0aWNcIik7XHJcbiAgICAgICAgICAgIGd0V3JhcHBlci5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5jc3MoXCJwb3NpdGlvblwiLCBcInN0YXRpY1wiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBndEZvb3Rlci5jc3MoXCJwb3NpdGlvblwiLCBcIlwiKTtcclxuICAgICAgICAgICAgdXBCdXR0b24uY3NzKFwicG9zaXRpb25cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIGd0V3JhcHBlci5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIGd0Rm9vdGVyLm91dGVySGVpZ2h0KCkgKyBcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmRlc2tUb3BNZW51U2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChkb2NXaW5kb3cuc2Nyb2xsVG9wKCkgPiBndEhlYWRlci5vdXRlckhlaWdodCgpKSB7XHJcbiAgICAgICAgICAgIGd0SGVhZGVyLmFkZENsYXNzKFwiZ3QtaGVhZGVyLXNjcm9sbGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGd0SGVhZGVyLnJlbW92ZUNsYXNzKFwiZ3QtaGVhZGVyLXNjcm9sbGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wYWdlVXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcImJvZHksaHRtbFwiKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LDgwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy51cFBhZ2VCdXR0b24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID4gMzApIHtcclxuICAgICAgICAgICAgdXBCdXR0b24uYWRkQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLnJlbW92ZUNsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdXBCdXR0b24ub24oXCJjbGlja1wiLCBzZWxmLnBhZ2VVcCk7XHJcbiAgICB0aGlzLm1vYmlsZU1lbnVDbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnVuZml4Qm9keSgpO1xyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2gucmVtb3ZlQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgIGd0SGVhZGVyLnJlbW92ZUNsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMubW9iaWxlTWVudU9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5maXhCb2R5KCk7XHJcbiAgICAgICAgZ3RIZWFkZXIuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2guYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIG1vYmlsZU1lbnVTd2l0Y2gub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC1vcGVuXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW9iaWxlTWVudUNsb3NlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVNZW51T3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5vcGVuRW50ZXJGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVudGVyV3JhcHBlci5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoc2hvdyk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzaG93KCkge1xyXG4gICAgICAgICAgICBlbnRlckZvcm0uYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgZW50ZXJDbG9zZS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuY2xvc2VFbnRlckZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZW50ZXJDbG9zZS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIGVudGVyRm9ybS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoaGlkZSwgNzUwKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7XHJcbiAgICAgICAgICAgIGVudGVyV3JhcHBlci5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuY2hhbmdlRW50ZXJSZWdpc3RyYXRpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZW50ZXJGb3JtLmhhc0NsYXNzKCQoZXZlbnQudGFyZ2V0KS5hdHRyKFwiY2xhc3NcIikpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZW50ZXJGb3JtLnJlbW92ZUNsYXNzKFwiZ3QtY2hvc2VuLWVudGVyXCIpLnJlbW92ZUNsYXNzKFwiZ3QtY2hvc2VuLXJlZ2lzdHJhdGlvblwiKS5hZGRDbGFzcygkKGV2ZW50LnRhcmdldCkuYXR0cihcImNsYXNzXCIpKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGVudGVyQnV0dG9uLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykub24oJ2NsaWNrJywgc2VsZi5vcGVuRW50ZXJGb3JtKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGVudGVyQ2xvc2Uub24oJ2NsaWNrJywgc2VsZi5jbG9zZUVudGVyRm9ybSk7XHJcbiAgICBcclxuICAgIGVudGVyQ2hvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgc2VsZi5jaGFuZ2VFbnRlclJlZ2lzdHJhdGlvbihldmVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNldEJhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltZ0hvbGRlcnMgPSAkKFwiLmd0LWltZy1ob2xkZXJcIik7XHJcbiAgICAgICAgaW1nSG9sZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmF0dHIoXCJkYXRhLWJnXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1iZ1wiKTtcclxuICAgICAgICAgICAgaWYgKHRva2VuNjY3LmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICd1cmwoXCIuL2ltZy9iYWNrZ3JvdW5kcy9waG9uZS8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0b2tlbjEwMjQuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybChcIi4vaW1nL2JhY2tncm91bmRzL3RhYmxldC8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAndXJsKFwiLi9pbWcvYmFja2dyb3VuZHMvZGVza3RvcC8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuaW1nSG9sZGVyRnVuYyA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIHZhciBob2xkZXJDb25zdCA9IGVsLm91dGVySGVpZ2h0KCkgLyBlbC5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgIGltZyA9IGVsLmZpbmQoJ2ltZycpLFxyXG4gICAgICAgICAgICBpbWdDb25zdCA9IGltZy5vdXRlckhlaWdodCgpIC8gaW1nLm91dGVyV2lkdGgoKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChpbWdDb25zdCA+IGhvbGRlckNvbnN0KSB7XHJcbiAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3Qtd2lkdGhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyXCIpKSB7XHJcbiAgICAgICAgc2VsZi5zZXRCYWNrZ3JvdW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZXIgPSBmdW5jdGlvbiAoY3VyclNsaWRlciwgcG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgc2xpZGVyVGltZU91dCxcclxuICAgICAgICAgICAgc2NyZWVuQ29uc3QgPSAxLFxyXG4gICAgICAgICAgICBiYXNlV2lkdGgsXHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGlubmVyID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1pbm5lclwiKSxcclxuICAgICAgICAgICAgY29udGFpbmVyID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1jb250YWluZXJcIiksXHJcbiAgICAgICAgICAgIGlubmVyQ291bnQgPSBpbm5lci5sZW5ndGgsXHJcbiAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IHBvc2l0aW9uIHx8IDAsXHJcbiAgICAgICAgICAgIGFycm93ID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1oYXMtYXJyb3dcIiksXHJcbiAgICAgICAgICAgIGRvdHMgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWhhcy1kb3RzXCIpLFxyXG4gICAgICAgICAgICBudW1QYW5lbCA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItbnVtXCIpLFxyXG4gICAgICAgICAgICB0cmFtID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci10cmFtXCIpLFxyXG4gICAgICAgICAgICBmYWRlID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1mYWRlXCIpLFxyXG4gICAgICAgICAgICBoYXNDbG9uZSA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItaGFzLWNsb25lXCIpO1xyXG4gICAgICAgIGlmIChmYWRlKSB7XHJcbiAgICAgICAgICAgIGZhZGVTbGlkZXJNb3ZlKHBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgZmluZFNjcmVlbkNvbnN0KCk7XHJcbiAgICAgICAgICAgIHNldEJhc2VXaWR0aCgpO1xyXG4gICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyb3cpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJndC1zbGlkZXItYXJyb3ctaG9sZGVyXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIGNyZWF0ZUFycm93cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG90cykge1xyXG4gICAgICAgICAgICBjcmVhdGVEb3RzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgY3JlYXRlVG91Y2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhhc0Nsb25lKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUNsb25lTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2xvbmVMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZCgnLmd0LXNsaWRlci1pbm5lci1jb3ZlcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ2xvbmVTbGlkZXIoJCh0aGlzKS5wYXJlbnQoKS5pbmRleCgpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgIFxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFycm93cygpIHtcclxuICAgICAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICB2YXIgbnVtSW5uZXIgPSAnJztcclxuICAgICAgICAgICAgaWYgKG51bVBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICBudW1Jbm5lciA9ICc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLWFycm93LW51bVwiPjxpIGNsYXNzPVwiZ3Qtc2xpZGVyLW51bS1jdXJyXCI+PC9pPjxpPtC40Lc8L2k+PGkgY2xhc3M9XCJndC1zbGlkZXItbnVtLW1heFwiPjwvaT48L2Rpdj4nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIikuaHRtbChcclxuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcyA9IFwiZ3Qtc2xpZGVyLWFycm93IGxlZnRcIj4nICtcclxuICAgICAgICAgICAgICAgICc8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWxlZnQgZmEtMnhcIj48L2k+JyArXHJcbiAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cIiArIG51bUlubmVyICtcclxuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcyA9IFwiZ3Qtc2xpZGVyLWFycm93IHJpZ2h0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1yaWdodCBmYS0yeFwiPjwvaT4nICtcclxuICAgICAgICAgICAgICAgIFwiPC9zcGFuPlwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNyZWF0ZUFycm93c0xpc3RlbmVycygpO1xyXG4gICAgICAgICAgICBzaG93TnVtKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lBcnJvd3MoY2xvbmUpIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gY2xvbmUgfHwgY3VyclNsaWRlclxyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmxlZnRcIikub2ZmKCk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIucmlnaHRcIikub2ZmKCk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3Qtc2xpZGVyLWFycm93LWhvbGRlclwiKS5odG1sKFwiXCIpO1xyXG4gICAgICAgICAgICBhcnJvd3NSZWFkeSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFycm93c0xpc3RlbmVycygpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmxlZnRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLnJpZ2h0XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2hlY2tQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAobnVtUGFuZWwpIHNob3dOdW0oKVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZURvdHMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLW5hdlwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB2YXIgbmF2ID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXZcIiksXHJcbiAgICAgICAgICAgICAgICBzcGFucyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzcGFucyArPSBcIjxzcGFuIGRhdGEtbnVtID0gXCIgKyBpICsgXCI+PC9zcGFuPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5hdi5odG1sKHNwYW5zKTtcclxuICAgIFxyXG4gICAgICAgICAgICBuYXYuZmluZChcInNwYW5cIikuZmlyc3QoKS5hZGRDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXYgc3BhblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlLCArJCh0aGlzKS5hdHRyKFwiZGF0YS1udW1cIikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBvbmVNb3ZlRnVuY3Rpb24oYnVsLCBudW0pIHtcclxuICAgICAgICAgICAgaWYgKG51bSB8fCBudW0gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IG51bTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChidWwpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiArPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uIC09IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0O1xyXG4gICAgICAgICAgICAgICAgLy8gc2VsZi5zbGlkZXJFbmRMZWZ0KGN1cnJTbGlkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgLy8gc2VsZi5zbGlkZXJFbmRSaWdodChjdXJyU2xpZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHJhbSkge1xyXG4gICAgICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZhZGVTbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFycm93KSBjaGVja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChudW1QYW5lbCkgc2hvd051bSgpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrUG9zaXRpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gY3VyclNsaWRlci5maW5kKFwiLmxlZnRcIiksXHJcbiAgICAgICAgICAgICAgICByaWdodCA9IGN1cnJTbGlkZXIuZmluZChcIi5yaWdodFwiKTtcclxuICAgICAgICAgICAgcmlnaHQucmVtb3ZlQ2xhc3MoXCJub3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBsZWZ0LnJlbW92ZUNsYXNzKFwibm90LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0LmFkZENsYXNzKFwibm90LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID09IGlubmVyQ291bnQgLSAxIHx8IGN1cnJQb3NpdGlvbiA9PSBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgIHJpZ2h0LmFkZENsYXNzKFwibm90LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHRyYW1TbGlkZXJNb3ZlKCkge1xyXG4gICAgICAgICAgICBpZiAoZG90cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsbERvdHMgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLW5hdiBzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgYWxsRG90cy5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICQoYWxsRG90c1tjdXJyUG9zaXRpb25dKS5hZGRDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250YWluZXIuY3NzKFwibWFyZ2luLWxlZnRcIiwgYmFzZVdpZHRoICogLTEgKiBjdXJyUG9zaXRpb24gKyBcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGZhZGVTbGlkZXJNb3ZlKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBvc2l0aW9uIHx8IGN1cnJQb3NpdGlvbjtcclxuICAgICAgICAgICAgJChpbm5lcikucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgJChpbm5lcltpbmRleF0pLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2hvd051bSgpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLW51bS1jdXJyJykudGV4dChjdXJyUG9zaXRpb24gKyAxKTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLW51bS1tYXgnKS50ZXh0KGlubmVyQ291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRvdWNoKCkge1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbFBvaW50ID0gMCxcclxuICAgICAgICAgICAgICAgIGZpbmFsUG9pbnQgPSAwO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLm9uKFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxQb2ludCA9IE1hdGguYWJzKGUudG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvdWNoc3RhcnRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLm9uKFwidG91Y2hlbmRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBmaW5hbFBvaW50ID0gTWF0aC5hYnMoZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoaW5pdGlhbFBvaW50IC0gZmluYWxQb2ludCkgPiA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsUG9pbnQgPiBmaW5hbFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVRvdWNoKGNsb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGNsb25lIHx8IGN1cnJTbGlkZXI7XHJcbiAgICAgICAgICAgIGVsLm9mZigpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRTY3JlZW5Db25zdCgpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJTbGlkZXIuYXR0cihcImRhdGEtY291bnRcIikpIHtcclxuICAgICAgICAgICAgICAgIHNjcmVlbkNvbnN0ID0gcGFyc2VJbnQoY3VyclNsaWRlci5hdHRyKFwiZGF0YS1jb3VudFwiKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0b2tlbjc2OCkuaXMoXCI6dmlzaWJsZVwiKSkgc2NyZWVuQ29uc3QgPSAzO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodG9rZW42NjcpLmlzKFwiOnZpc2libGVcIikpIHNjcmVlbkNvbnN0ID0gMjtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRva2VuMzYwKS5pcyhcIjp2aXNpYmxlXCIpKSBzY3JlZW5Db25zdCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzZXRCYXNlV2lkdGgoKSB7XHJcbiAgICAgICAgICAgIGJhc2VXaWR0aCA9IGN1cnJTbGlkZXIub3V0ZXJXaWR0aCgpIC8gc2NyZWVuQ29uc3Q7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItY29udGFpbmVyXCIpLm91dGVyV2lkdGgoKGlubmVyQ291bnQgKyAxKSAqIGJhc2VXaWR0aCk7XHJcbiAgICAgICAgICAgIGlubmVyLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vdXRlcldpZHRoKGJhc2VXaWR0aCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lU2xpZGVyKGNsaWNrUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIjZ3QtY2xvbmVcIikpIHJldHVybjtcclxuICAgICAgICAgICAgc2VsZi5maXhCb2R5KCk7XHJcbiAgICAgICAgICAgIHZhciBib2R5V3JhcHBlciA9ICQoXCIjZ3QtYm9keS13cmFwcGVyXCIpXHJcbiAgICAgICAgICAgIGJvZHlXcmFwcGVyLmFwcGVuZCgnPGRpdiBpZCA9IFwiZ3QtY2xvbmUtd3JhcHBlclwiICAgY2xhc3M9XCJjb250YWluZXJcIj48ZGl2IGlkID0gXCJndC1jbG9uZS1jbG9zZVwiIGNsYXNzID0gXCJndC1zbGlkZXItY2xvbmUtY2xvc2VcIj48L2Rpdj48ZGl2IGlkID0gXCJndC1jbG9uZVwiIGNsYXNzPVwiZ3Qtc2xpZGVyIGd0LXNsaWRlci1jbG9uZSBndC1zbGlkZXItZmFkZSBndC1zbGlkZXItaGFzLWFycm93XCI+PGRpdiAgaWQgPSBcImd0LWNsb25lLWNvbnRhaW5lclwiIGNsYXNzPVwiZ3Qtc2xpZGVyLWNvbnRhaW5lclwiPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICBib2R5V3JhcHBlci5zaG93KCk7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZVNsaWRlciA9ICQoJyNndC1jbG9uZScpLFxyXG4gICAgICAgICAgICAgICAgaW5uZXJzID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1pbm5lclwiKS5jbG9uZSh0cnVlKTtcclxuICAgICAgICAgICAgaW5uZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vdXRlcldpZHRoKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJyNndC1jbG9uZS1jb250YWluZXInKS5hcHBlbmQoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZVNsaWRlcihjbG9uZVNsaWRlciwgY2xpY2tQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtY2xvbmUtY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBkZXN0cm95Q2xvbmVTbGlkZXIoY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lBcnJvd3MoY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICBkZXN0cm95VG91Y2goY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9mZigpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLXdyYXBwZXJcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtYm9keS13cmFwcGVyXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgc2VsZi51bmZpeEJvZHkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8vLy8vLy8vL3Jlc2l6ZVNsaWRlclxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZVNsaWRlcigpIHtcclxuICAgICAgICAgICAgaWYgKCFzbGlkZXJUaW1lT3V0KSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXJUaW1lT3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyVGltZU91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTMyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGRvY1dpbmRvdy5yZXNpemUocmVzaXplU2xpZGVyKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZUZ1bmMoKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lUb3VjaCgpO1xyXG4gICAgICAgICAgICBpZiAodHJhbSkge1xyXG4gICAgICAgICAgICAgICAgZmluZFNjcmVlbkNvbnN0KCk7XHJcbiAgICAgICAgICAgICAgICBzZXRCYXNlV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHJlc2l6ZU1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFycm93c1JlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICBkZXN0cm95QXJyb3dzKCk7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVBcnJvd3MoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVRvdWNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgIGZ1bmN0aW9uIHJlc2l6ZU1vdmUoKSB7XHJcbiAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdClcclxuICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0O1xyXG4gICAgICAgICAgIGlmIChpbm5lckNvdW50IDw9IHNjcmVlbkNvbnN0KSBjdXJyUG9zaXRpb24gPSAwO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgIH1cclxuICAgIFxyXG4gICAgfTtcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXNsaWRlclwiKSkge1xyXG4gICAgICAgICQoXCIuZ3Qtc2xpZGVyXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZVNsaWRlcigkKHRoaXMpKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgdGhpcy5tYW5hZ2VHdEFjdGl2ZVVsTWVudSA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmIChlbC50YWdOYW1lICE9IFwibGlcIilcclxuICAgICAgICAgICAgZWwgPSAkKGVsKS5jbG9zZXN0KFwibGlcIilcclxuICAgIFxyXG4gICAgICAgICQoZWwpLmNsb3Nlc3QoJChcInVsXCIpKS5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1odW5kcmV0LW1lbnVcIikpIHtcclxuICAgICAgICAkKFwiLmd0LWh1bmRyZXQtbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LWJ1dHRvbi1tZW51XCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1idXR0b24tbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1tZW51LW5ld3NcIikpIHtcclxuICAgICAgICAkKFwiLmd0LW1lbnUtbmV3c1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMudGFiU2xpZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJTbGlkZXJzID0gJChcIi5ndC10YWJzXCIpO1xyXG4gICAgICAgIHRhYlNsaWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyVGFicyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGN1cnJUYWJzLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudGFiU2xpZGVyQWN0aW9uKGN1cnJUYWJzLCAkKHRoaXMpLmluZGV4KCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLnRhYlNsaWRlckFjdGl2YXRpb24oY3VyclRhYnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy50YWJTbGlkZXJBY3RpdmF0aW9uID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5oaWRlKCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpWzBdKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpWzBdKS5zaG93KCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKVswXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnRhYlNsaWRlckFjdGlvbiA9IGZ1bmN0aW9uIChlbCwgbnVtKSB7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5oaWRlKCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpW251bV0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbbnVtXSkuc2hvdygpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbbnVtXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXRhYnNcIikpIHtcclxuICAgICAgICBzZWxmLnRhYlNsaWRlcigpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICAgIHRhZy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgICAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9wbGF5ZXJfYXBpXCI7XHJcbiAgICAgICAgdmFyIGxhc3RTY3JpcHRUYWcgPSAkKFwic2NyaXB0XCIpWyQoXCJzY3JpcHRcIikubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgbGFzdFNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YWcsIGxhc3RTY3JpcHRUYWcpO1xyXG4gICAgICAgIHZhciBndFZpZGVvcyA9ICQoXCIuZ3QtdmlkZW9cIik7XHJcbiAgICAgICAgZ3RWaWRlb3MuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGxheWVyID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgY3VycmVudFBsYXllci5maW5kKFwiLmd0LXZpZGVvLXN3aXRjaFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkZFlvdVR1YmUoY3VycmVudFBsYXllcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5hZGRZb3VUdWJlID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIHBsYXllcixcclxuICAgICAgICAgICAgZWxJZCA9IFwiZ3QtdmlkZW8tXCIgKyBlbC5pbmRleCgpO1xyXG4gICAgXHJcbiAgICAgICAgZWwuZmluZChcIi5ndC12aWRlby1zd2l0Y2hcIikuaGlkZSgnc2xvdycpO1xyXG4gICAgXHJcbiAgICAgICAgZWxcclxuICAgICAgICAgICAgLmZpbmQoXCIuZ3QtdmlkZW8taW5uZXJcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBlbElkKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJndC12aWRlby1mb3JlZ3JvdW5kXCIpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbiAgICAgICAgICAgIHBsYXllciA9IG5ldyBZVC5QbGF5ZXIoZWxJZCwge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDYwMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICAgICAgICAgICAgdmlkZW9JZDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgIHBsYXllclZhcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5bGlzdDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDFcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxla2I6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udHJvbHM6IDBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBvblJlYWR5OiBpbml0aWFsaXplXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIubXV0ZSgpO1xyXG4gICAgICAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiZ3QtdmlkZW8tb25cIik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tdW5jb3ZlclwiKS5vbignY2xpY2snLCBwbGF5RnVsbFNjcmVlbik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGF1c2VcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGxheVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcGxheUZ1bGxTY3JlZW4oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5RnVsbFNjcmVlbicpO1xyXG4gICAgICAgICAgICB2YXIgaWZyYW1lID0gZWwuZmluZCgnaWZyYW1lJylbMF07XHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0RnVsbFNjcmVlbiA9IGlmcmFtZS5yZXF1ZXN0RnVsbFNjcmVlbiB8fCBpZnJhbWUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgaWZyYW1lLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuO1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuLmJpbmQoaWZyYW1lKSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtdmlkZW9cIikpIHtcclxuICAgICAgICBzZWxmLnNldFBsYXllcnMoKTtcclxuICAgIH1cclxuICAgIHRoaXMuZml4QXJ0aWNsZVNjcm9sbFRhYmxlUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIHZhciB0YWJsZSA9ICQoXCIuZ3QtYXJ0aWNsZS10YWJsZS13cmFwcGVyXCIpLFxyXG4gICAgICAgICAgICB0YWJsZVBhcmVudCA9IHRhYmxlLnBhcmVudCgpLFxyXG4gICAgICAgICAgICB0YWJsZVBhcmVudFRvcCA9IHRhYmxlUGFyZW50LnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICB0YWJsZVBhcmVudEJvdHRvbSA9IHRhYmxlUGFyZW50VG9wICsgdGFibGVQYXJlbnQub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgdGFibGVXaWR0aCA9IHRhYmxlLm91dGVyV2lkdGgoKSxcclxuICAgICAgICAgICAgd2luZG93VG9wID0gZG9jLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICB3aWRvd0hlaWdodCA9IGRvY1dpbmRvdy5vdXRlckhlaWdodCgpO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3AgPiB3aW5kb3dUb3ApIHtcclxuICAgICAgICAgICAgaWYgKHRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNsYXNzKFwiZ3QtZml4ZWRcIik7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3AgPCB3aW5kb3dUb3AgKyA5MCkge1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdGFibGUub2Zmc2V0KCkubGVmdCArIFwicHhcIixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGFibGVXaWR0aFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5hZGRDbGFzcyhcImd0LWZpeGVkXCIpO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAod2luZG93VG9wICsgd2lkb3dIZWlnaHQgPiB0YWJsZVBhcmVudEJvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuYWRkQ2xhc3MoXCJndC1maXhlZC1ib3R0b21cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmVDbGFzcyhcImd0LWZpeGVkLWJvdHRvbVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZS5oYXNDbGFzcyhcImd0LWZpeGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogKHdpZG93SGVpZ2h0IC0gMTIwKSArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVBcnRpY3RlU2Nyb2xsVGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkKFwiZGl2XCIpLmlzKFwiLmd0LWFydGljbGVcIikpIHJldHVybjtcclxuICAgICAgICB2YXIgYXJ0aWNsZXMgPSAkKFwiLmd0LWFydGljbGVcIiksXHJcbiAgICAgICAgICAgIGh0bWwgPSBcIlwiO1xyXG4gICAgICAgIGFydGljbGVzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBodG1sICs9XHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcyA9IFwiZ3QtYXJ0aWNsZS1zY3JvbGxcIj48ZGl2IGNsYXNzID0gXCJndC1hcnRpY2xlLXNjcm9sbC1zaGFkb3dcIj48L2Rpdj48cD4nICtcclxuICAgICAgICAgICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICAuZmluZChcImgyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoKSArXHJcbiAgICAgICAgICAgICAgICBcIjwvcD48L2Rpdj5cIjtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiI2d0LWFydGljbGUtc2Nyb2xsLXRhYmxlXCIpLmh0bWwoaHRtbCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnNob3dBcnRpZGxlU2hhZG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIuZ3QtYXJ0aWNsZVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyUG9zaXRpb24gPSAkKHRoaXMpLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICAgICAgZWxIZWlnaHQgPSAkKHRoaXMpLm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICB3aW5kb3dQb3NpdGlvbiA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiB3aW5kb3dQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHdpbmRvd1Bvc2l0aW9uIC0gY3VyclBvc2l0aW9uKSAvIGVsSGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh4ID4gMSkgeCA9IDE7XHJcbiAgICAgICAgICAgIHZhciBjdXJyU2hhZG93ID0gJChcIi5ndC1hcnRpY2xlLXNjcm9sbFwiKVskKHRoaXMpLmluZGV4KCldO1xyXG4gICAgICAgICAgICAkKGN1cnJTaGFkb3cpXHJcbiAgICAgICAgICAgICAgICAuZmluZChcIi5ndC1hcnRpY2xlLXNjcm9sbC1zaGFkb3dcIilcclxuICAgICAgICAgICAgICAgIC5jc3MoXCJ3aWR0aFwiLCB4ICogMTAwICsgXCIlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJCgnZGl2JykuaXMoJy5ndC1hcnRpY2xlLXRhYmxlLXdyYXBwZXInKSkge1xyXG4gICAgICAgIHZhciBzaGFkb3cgPSBmYWxzZSxcclxuICAgICAgICAgICAgc2Nyb2xsVGltZW91dDtcclxuICAgIFxyXG4gICAgICAgIGlmICgkKCdkaXYnKS5pcyhcIi5ndC1hcnRpY2xlLXNjcm9sbC10YWJsZVwiKSkge1xyXG4gICAgICAgICAgICBzaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSgpO1xyXG4gICAgICAgICAgICBzZWxmLnNob3dBcnRpZGxlU2hhZG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzY3JvbGxUaHJvdHRsZXIoKSB7XHJcbiAgICAgICAgICAgIGlmICghc2Nyb2xsVGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZml4QXJ0aWNsZVNjcm9sbFRhYmxlUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hhZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd0FydGlkbGVTaGFkb3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH0sIDY2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgZG9jV2luZG93LnNjcm9sbChzY3JvbGxUaHJvdHRsZXIpO1xyXG4gICAgICAgIGRvY1dpbmRvdy5yZXNpemUoc2Nyb2xsVGhyb3R0bGVyKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldEN1cnJUaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VyclRpbWUoKTtcclxuICAgICAgICB2YXIgdCA9IHNldEludGVydmFsKHNlbGYuY3VyclRpbWUsIDMwMDAwKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmN1cnJUaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIuZ3QtY3Vyci10aW1lXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJkYXRhLWdtdFwiKSkgZGF0ZS5zZXRVVENIb3VycygrJCh0aGlzKS5hdHRyKFwiZGF0YS1nbXRcIikpO1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICB3ZWVrZGF5ID0gZGF0ZS5nZXREYXkoKSxcclxuICAgICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCksXHJcbiAgICAgICAgICAgICAgICB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgd2Vla2RheXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQktC+0YHQutGA0LXRgdC10L3RjNC1XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQn9C+0L3QtdC00LXQu9GM0L3QuNC6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQktGC0L7RgNC90LjQulwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KHRgNC10LTQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KfQtdGC0LLQtdGA0LNcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCf0Y/RgtC90LjRhtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQodGD0LHQsdC+0YLQsFwiXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBcItGP0L3QstCw0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0YTQtdCy0YDQsNC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC80LDRgNGC0LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCw0L/RgNC10LvRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LzQsNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQuNGO0L3Rj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LjRjtC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItCw0LLQs9GD0YHRgtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLRgdC10L3RgtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvtC60YLRj9Cx0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0L3QvtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQtNC10LrQsNCx0YDRj1wiXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBpZiAoaG91cnMgPCAxMCkgaG91cnMgPSBcIjBcIiArIGhvdXJzO1xyXG4gICAgICAgICAgICBpZiAobWludXRlcyA8IDEwKSBtaW51dGVzID0gXCIwXCIgKyBtaW51dGVzO1xyXG4gICAgICAgICAgICB3ZWVrZGF5ID0gd2Vla2RheXNbd2Vla2RheV07XHJcbiAgICAgICAgICAgIG1vbnRoID0gbW9udGhlc1ttb250aF07XHJcbiAgICAgICAgICAgIGlmICgkKFwiLmd0LWN1cnItdGltZS10aW1lXCIpKVxyXG4gICAgICAgICAgICAgICAgJChcIi5ndC1jdXJyLXRpbWUtdGltZVwiKS5odG1sKGhvdXJzICsgXCI6XCIgKyBtaW51dGVzKTtcclxuICAgICAgICAgICAgaWYgKCQoXCIuZ3QtY3Vyci10aW1lLWRhdGVcIikpXHJcbiAgICAgICAgICAgICAgICAkKFwiLmd0LWN1cnItdGltZS1kYXRlXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla2RheSArIFwiLCBcIiArIGRheSArIFwiIFwiICsgbW9udGggKyBcIiBcIiArIHllYXJcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWN1cnItdGltZVwiKSkge1xyXG4gICAgICAgIHNlbGYuc2V0Q3VyclRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlubmVyU2Nyb2xsID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKGVsLmZpbmQoXCIub3ZlcnZpZXdcIikuaGVpZ2h0KCkgPiBlbC5oZWlnaHQoKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBlbC5hZGRDbGFzcyhcImlzU2Nyb2xsZWRcIik7XHJcbiAgICAgICAgICAgIGVsLnRpbnlzY3JvbGxiYXIoe1xyXG4gICAgICAgICAgICAgICAgdGh1bWJTaXplOiA0MCxcclxuICAgICAgICAgICAgICAgIHdoZWVsU3BlZWQ6IDEwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbm5lci1zY3JvbGxcIikpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAkKCcuZ3QtaW5uZXItc2Nyb2xsJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmlubmVyU2Nyb2xsKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy9kb2VzIG5vdCB3b3JrXHJcblxyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlSWNvbnNJdGVtc0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIuZ3Qtdmlldy1jYXJkcy1pY29ucy1pdGVtXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtdmlzaXRcIikpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlVmlzaXRMaW5rKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy1ib29rbWFya3NcIikpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQm9va21hcmtzTGluaygkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy1waW5cIikgfHxcclxuICAgICAgICAgICAgICAgICQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLXNoYXJlXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b2dnbGVHdEFjdGl2ZSgkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtc2hhcmVcIikpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlU2hhcmVMaW5rKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZVNoYXJlTGluayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGVsLnJlbW92ZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgIGVsLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBlbC50b2dnbGVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudG9nZ2xlR3RBY3RpdmUgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICB2YXIgZWwgPSAkKGVsKTtcclxuICAgICAgICBlbC5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZWwudG9nZ2xlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlVmlzaXRMaW5rID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKCFlbC5jbG9zZXN0KFwiLmd0LXZpZXctY2FyZHMtaW5uZXJcIikuYXR0cihcImRhdGEtaHJlZlwiKSkgcmV0dXJuO1xyXG4gICAgICAgIGVsLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmFkZFZpc2l0ZWRMaW5rKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5hZGRWaXNpdGVkTGluayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgICBcItC/0L7RgdC70LDQu9C4INC00LDQvdC90YvQtSDQvdCwINCx0LXQulwiLFxyXG4gICAgICAgICAgICBlbC5jbG9zZXN0KFwiLmd0LXZpZXctY2FyZHMtaW5uZXJcIikuYXR0cihcImRhdGEtaHJlZlwiKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZWwudG9nZ2xlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuYWRkQm9va21hcmsgPSBmdW5jdGlvbiAoYSwgdXJsLCB0aXRsZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5leHRlcm5hbC5BZGRGYXZvcml0ZSh1cmwsIHRpdGxlKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2lkZWJhci5hZGRQYW5lbCh0aXRsZSwgdXJsLCBcIlwiKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcGVyYSA9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYS50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGEudXJsID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcItCd0LDQttC80LjRgtC1IEN0cmwtRCDRh9GC0L7QsdGLINC00L7QsdCw0LLQuNGC0Ywg0YHRgtGA0LDQvdC40YbRgyDQsiDQt9Cw0LrQu9Cw0LTQutC4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUJvb2ttYXJrc0xpbmsgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICB2YXIgZWwgPSAkKGVsKTtcclxuICAgICAgICB2YXIgcGFyZW50ID0gZWwuY2xvc2VzdChcIi5ndC12aWV3LWNhcmRzLWlubmVyXCIpO1xyXG4gICAgICAgIHBhcmVudCA9ICQocGFyZW50KTtcclxuICAgICAgICBpZiAoIXBhcmVudC5hdHRyKFwiZGF0YS1ocmVmXCIpKVxyXG4gICAgICAgICAgICBwYXJlbnQuYXR0cihcImRhdGEtaHJlZlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgICAgaWYgKCFwYXJlbnQuYXR0cihcImRhdGEtYm9va21hcmtcIikpIHBhcmVudC5hdHRyKFwiZGF0YS1ib29rbWFya1wiLCBcIkdvVG9UcmlwXCIpO1xyXG4gICAgICAgIGVsLmF0dHIoXCJocmVmXCIsIHBhcmVudC5hdHRyKFwiZGF0YS1ocmVmXCIpKTtcclxuICAgICAgICBlbC5hdHRyKFwicmVsXCIsIFwic2lkZWJhclwiKTtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5hZGRCb29rbWFyayhcclxuICAgICAgICAgICAgICAgIGVsLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50LmF0dHIoXCJkYXRhLWhyZWZcIiksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXR0cihcImRhdGEtYm9va21hcmtcIilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LXZpZXctY2FyZHMtaWNvbnMtYm9va21hcmtzXCIpKSB7XHJcbiAgICAgICAgc2VsZi5jcmVhdGVCb29rbWFya3NMaW5rKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LXZpZXctY2FyZHMtaWNvbnMtaXRlbVwiKSkge1xyXG4gICAgICAgIHNlbGYuY3JlYXRlSWNvbnNJdGVtc0NsaWNrKCk7XHJcbiAgICB9XHJcbiAgICAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0L3QsNC70LjRh9C40LUgLSDQvtCx0YHRg9C00LjRgtGMINGBINCx0LXQutC+0Lwg0L/QvtCy0LXQtNC10LPRgtC1XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1mYWNlYm9vaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbEVudGVyKCdmYWNlYm9vaycpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1lbnRlci1mb3JtLXR3aXR0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcigndHdpdHRlcicpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1lbnRlci1mb3JtLWdvb2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbEVudGVyKCdnb29nbGUnKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJyNndC1yZWctZm9ybS1mYWNlYm9vaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbFJlZ2lzdHJhdGlvbignZmFjZWJvb2snKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tdHdpdHRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbFJlZ2lzdHJhdGlvbigndHdpdHRlcicpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1yZWctZm9ybS1nb29nbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ2dvb2dsZScpXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy5zb2NpYWxSZWdpc3RyYXRpb24gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIFxyXG4gICAgICAgIGFsZXJ0KFwi0KDQtdCz0LjRgdGC0YDQsNGG0LjRjyDRh9C10YDQtdC3IFwiICsgdG9rZW4pXHJcbiAgICBcclxuICAgIH07XHJcbiAgICB0aGlzLnNvY2lhbEVudGVyID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBcclxuICAgICAgICBhbGVydChcItCS0YXQvtC0INGH0LXRgNC10LcgXCIgKyB0b2tlbilcclxuICAgIFxyXG4gICAgfTtcclxuICAgdGhpcy5jdXROZXdzID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICB2YXIgbWF4SGVpZ2h0ID0gZWwuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgbGlua3MgPSBlbC5maW5kKCdhJyk7XHJcbiAgIFxyXG4gICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgIGlmICgkKGxpbmtzW2ldKS5vdXRlckhlaWdodCh0cnVlKSA8IG1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAkKGxpbmtzW2ldKS5hZGRDbGFzcygnZ3QtcmVhZHknKTtcclxuICAgICAgICAgICAgICAgbWF4SGVpZ2h0IC09ICQobGlua3NbaV0pLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHZhciBjdXR0aW5nTGVuZ3RoID0gTWF0aC5mbG9vcigoJChsaW5rc1tpXSkudGV4dCgpLmxlbmd0aCAtIDMwKSAqIG1heEhlaWdodCAvICQobGlua3NbaV0pLmhlaWdodCgpKTtcclxuICAgICAgICAgICAgICAgdmFyIGN1dHRuaW5nID0gJChsaW5rc1tpXSkudGV4dCgpLnN1YnN0cmluZygwLCBjdXR0aW5nTGVuZ3RoIC0gNSk7XHJcbiAgICAgICAgICAgICAgICQobGlua3NbaV0pLnRleHQoY3V0dG5pbmcgKyAnLi4uJyk7XHJcbiAgICAgICAgICAgICAgICQobGlua3NbaV0pLmFkZENsYXNzKCdndC1yZWFkeScpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuICAgfTtcclxuICAgXHJcbiAgIFxyXG4gICB0aGlzLmN1dFJlYWRNb3JlU2xpZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgdmFyIGN1dHRpbmdzID0gJChcIi5ndC1yZWFkLW1vcmUtc2xpZGVyLXRleHQtaW5uZXJcIik7XHJcbiAgICAgICBjdXR0aW5ncy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBzZWxmLmN1dHRpbmcoJCh0aGlzKSwgMTYwKTtcclxuICAgICAgIH0pO1xyXG4gICB9O1xyXG4gICBcclxuICAgdGhpcy5jdXR0aW5nID0gZnVuY3Rpb24gKGVsLCBudW0pIHtcclxuICAgICAgIHZhciBuZXdzVGV4dCA9IGVsLnRleHQoKTtcclxuICAgICAgIGlmIChuZXdzVGV4dC5sZW5ndGggPiBudW0pIHtcclxuICAgICAgICAgICBuZXdzVGV4dCA9IG5ld3NUZXh0LnNsaWNlKDAsIG51bSkgKyBcIi4uLlwiO1xyXG4gICAgICAgICAgIGVsLnRleHQobmV3c1RleHQpO1xyXG4gICAgICAgfVxyXG4gICB9O1xyXG4gICBcclxuICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtbmV3cy1jdXRcIikpIHtcclxuICAgICAgICQoXCIuZ3QtbmV3cy1jdXRcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgc2VsZi5jdXROZXdzKCQodGhpcykpO1xyXG4gICAgICAgfSlcclxuICAgfVxyXG4gICBcclxuICAgaWYgKCQoXCJwXCIpLmlzKFwiLmd0LXJlYWQtbW9yZS1zbGlkZXItdGV4dC1pbm5lclwiKSkge1xyXG4gICAgICAgc2VsZi5jdXRSZWFkTW9yZVNsaWRlcigpO1xyXG4gICB9XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgZG9jLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgICAgIHNlbGYuZm9vdGVySGVpZ2h0KCk7Ly9fZm9vdGVyX2hlaWdodC5qc1xyXG4gICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTsvL19kZXNjdG9wX2hlYWRlcl9mdW5jLmpzXHJcbiAgICBcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBkb2NXaW5kb3cuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnVwUGFnZUJ1dHRvbigpOy8vX3VwX2J1dHRvbi5qc1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAoJChcIi5ndC1oZWFkZXItbWVudVwiKS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTsvL19kZXNjdG9wX2hlYWRlcl9mdW5jLmpzXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBkb2NXaW5kb3cucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRlc2tUb3BNZW51U2Nyb2xsKCk7XHJcbiAgICAgICAgc2VsZi5mb290ZXJIZWlnaHQoKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChndEhlYWRlci5oYXNDbGFzcyhcImd0LW9wZW5cIikpIHNlbGYubW9iaWxlTWVudUNsb3NlKCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyLWFic1wiKSkge1xyXG4gICAgICAgICAgICAkKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LXdpZHRoXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikpIHtcclxuICAgICAgICAgICAgJChcIi5ndC1pbWctaG9sZGVyLWFic1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYm9keS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudC50YXJnZXQpO1xyXG4gICAgXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG52YXIgZ29Ub1RyaXAgPSBuZXcgR29Ub1RyaXAoKTsiXX0=
