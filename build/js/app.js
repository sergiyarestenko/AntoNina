GoToTrip=function(){function t(){k||(k=setTimeout(function(){k=null,i.fixArticleScrollTablePosition(),w&&i.showArtidleShadow()}))}var i=this,e=$(document.body),s=$(document),n=$(window),o={top:!1,left:!1},a=$("#gt-is-360"),r=($("#gt-is-480"),$("#gt-is-667")),c=$("#gt-is-768"),l=$("#gt-is-1024"),d=($("#gt-is-1231"),$("header")),g=$("footer"),u=$("#gt-wrapper"),h=$("#gt-up"),f=$("#gt-mobile-menu-switch"),v=$(".gt-enter"),m=$("#gt-header-enter-wrapper"),p=$("#gt-header-enter"),b=$("#gt-header-enter-chose"),C=$("#gt-header-enter-close");if(this.fixBody=function(){o.top||o.left||(o.top=s.scrollTop(),o.left=e.offset().left,e.css({position:"fixed",left:o.left+"px",top:-1*o.top+"px"}))},this.unfixBody=function(){e.css({position:"",left:"",top:""}),s.scrollTop(o.top),o.top=!1,o.left=!1},this.footerHeight=function(){g.outerHeight()>n.height()-50?(g.css("position","static"),u.css("margin-bottom",""),h.css("position","static")):(g.css("position",""),h.css("position",""),u.css("margin-bottom",g.outerHeight()+"px"))},this.deskTopMenuScroll=function(){n.scrollTop()>d.outerHeight()?d.addClass("gt-header-scrolled"):d.removeClass("gt-header-scrolled")},this.pageUp=function(){return $("body,html").animate({scrollTop:0},800),!1},this.upPageButton=function(){$(document).scrollTop()>30?h.addClass("gt-visible"):h.removeClass("gt-visible")},h.on("click",i.pageUp),this.mobileMenuClose=function(){i.unfixBody(),f.removeClass("gt-open"),d.removeClass("gt-open")},this.mobileMenuOpen=function(){i.fixBody(),d.addClass("gt-open"),f.addClass("gt-open")},f.on("click",function(){$(this).hasClass("gt-open")?i.mobileMenuClose():i.mobileMenuOpen()}),this.openEnterForm=function(){m.addClass("gt-open"),setTimeout(function(){p.addClass("gt-open"),C.addClass("gt-open")})},this.closeEnterForm=function(){C.removeClass("gt-open"),p.removeClass("gt-open"),setTimeout(function(){m.removeClass("gt-open")},750)},this.changeEnterRegistration=function(t){p.hasClass($(t.target).attr("class"))||p.removeClass("gt-chosen-enter").removeClass("gt-chosen-registration").addClass($(t.target).attr("class"))},v.each(function(){$(this).on("click",i.openEnterForm)}),C.on("click",i.closeEnterForm),b.on("click",function(t){i.changeEnterRegistration(t)}),this.setBackground=function(){$(".gt-img-holder").each(function(){if($(this).attr("data-bg")){var t=$(this).attr("data-bg");r.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/phone/'+t+'")'):l.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/tablet/'+t+'")'):$(this).css("background-image",'url("./img/backgrounds/desktop/'+t+'")')}})},this.imgHolderFunc=function(t){var i=t.outerHeight()/t.outerWidth(),e=t.find("img");e.outerHeight()/e.outerWidth()>i?$(t).addClass("gt-width"):$(t).addClass("gt-height"),$(t).addClass("gt-visible")},$("div").is(".gt-img-holder")&&i.setBackground(),this.createSlider=function(t,e){function s(){if(y>k){var i="";H&&(i='<div class="gt-slider-arrow-num"><i class="gt-slider-num-curr"></i><i>из</i><i class="gt-slider-num-max"></i></div>'),t.find(".gt-slider-arrow-holder").html('<span class = "gt-slider-arrow left"><i class="fa fa-angle-left fa-2x"></i></span>'+i+'<span class = "gt-slider-arrow right"><i class="fa fa-angle-right fa-2x"></i></span>'),t.find(".left").on("click",function(){l(!1)}),t.find(".right").on("click",function(){l(!0)}),d(),H&&h(),h()}w=!0}function o(i){var e=i||t;e.find(".left").off(),e.find(".right").off(),e.find(".gt-slider-arrow-holder").html(""),w=!1}function l(t,i){i||0===i?S=i:t?S+=1:S-=1,S>y-k?S=y-k:S<0?S=0:(B?g():u(),M&&d(),H&&h())}function d(){var i=t.find(".left"),e=t.find(".right");e.removeClass("not-active"),i.removeClass("not-active"),0==S&&i.addClass("not-active"),S!=y-1&&S!=y-k||e.addClass("not-active")}function g(){if(A){var i=t.find(".gt-slider-nav span");i.removeClass("gt-active"),$(i[S]).addClass("gt-active")}T.css("margin-left",-1*C*S+"px")}function u(t){var i=t||S;$(x).removeClass("gt-open"),$(x[i]).addClass("gt-open")}function h(){t.find(".gt-slider-num-curr").text(S+1),t.find(".gt-slider-num-max").text(y)}function f(){var i=0,e=0;t.on("touchstart",function(t){var e=t.originalEvent;i=Math.abs(e.touches[0].pageX),console.log("touchstart")}),t.on("touchend",function(t){var s=t.originalEvent;e=Math.abs(s.changedTouches[0].pageX),Math.abs(i-e)>50&&l(i>e?!0:!1)})}function v(i){(i||t).off()}function m(){t.attr("data-count")&&(k=parseInt(t.attr("data-count")),$(c).is(":visible")&&(k=3),$(r).is(":visible")&&(k=2),$(a).is(":visible")&&(k=1))}function p(){C=t.outerWidth()/k,t.find(".gt-slider-container").outerWidth((y+1)*C),x.each(function(){$(this).outerWidth(C)})}var b,C,k=1,w=!1,x=t.find(".gt-slider-inner"),T=t.find(".gt-slider-container"),y=x.length,S=e||0,M=t.hasClass("gt-slider-has-arrow"),A=t.hasClass("gt-slider-has-dots"),H=t.hasClass("gt-slider-num"),B=t.hasClass("gt-slider-tram"),E=t.hasClass("gt-slider-fade"),F=t.hasClass("gt-slider-has-clone");E&&u(e),B&&(m(),p(),g()),M&&(t.append('<div class="gt-slider-arrow-holder"></div>'),s()),A&&function(){t.append('<div class="gt-slider-nav"></div>');for(var i=t.find(".gt-slider-nav"),e="",s=0;s<y;s++)e+="<span data-num = "+s+"></span>";i.html(e),i.find("span").first().addClass("gt-active"),t.find(".gt-slider-nav span").on("click",function(){l(!0,+$(this).attr("data-num"))})}(),y>k&&f(),F&&t.find(".gt-slider-inner-cover").each(function(){$(this).on("click",function(){!function(e){if(!$("div").is("#gt-clone")){i.fixBody();var s=$("#gt-body-wrapper");s.append('<div id = "gt-clone-wrapper"   class="container"><div id = "gt-clone-close" class = "gt-slider-clone-close"></div><div id = "gt-clone" class="gt-slider gt-slider-clone gt-slider-fade gt-slider-has-arrow"><div  id = "gt-clone-container" class="gt-slider-container"></div></div></div>'),s.show();var n=$("#gt-clone");t.find(".gt-slider-inner").clone(!0).each(function(){$(this).outerWidth(""),$("#gt-clone-container").append($(this))}),i.createSlider(n,e),$("#gt-clone-close").on("click",function(){!function(t){o(t),v(t),$("#gt-clone-close").off(),$("#gt-clone-wrapper").remove(),$("#gt-body-wrapper").hide(),i.unfixBody()}(n)})}}($(this).parent().index())})}),n.resize(function(){b||(b=setTimeout(function(){b=null,v(),B&&(m(),p(),S>y-k&&(S=y-k),y<=k&&(S=0),g()),w&&(o(),s()),y>k&&f()},132))})},$("div").is(".gt-slider")&&$(".gt-slider").each(function(){i.createSlider($(this))}),this.manageGtActiveUlMenu=function(t){"li"!=t.tagName&&(t=$(t).closest("li")),$(t).closest($("ul")).find("li").removeClass("gt-active"),$(t).addClass("gt-active")},$("*").is(".gt-hundret-menu")&&$(".gt-hundret-menu").on("click",function(t){t.preventDefault(),i.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-button-menu")&&$(".gt-button-menu").on("click",function(t){t.preventDefault(),i.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-menu-news")&&$(".gt-menu-news").on("click",function(t){t.preventDefault(),i.manageGtActiveUlMenu(t.target)}),this.tabSlider=function(){$(".gt-tabs").each(function(){var t=$(this);t.find(".gt-tabs-button").each(function(){$(this).on("click",function(){i.tabSliderAction(t,$(this).index())})}),i.tabSliderActivation(t)})},this.tabSliderActivation=function(t){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-main")).hide(),$(t.find(".gt-tabs-button")[0]).addClass("active"),$(t.find(".gt-tabs-main")[0]).show(),$(t.find(".gt-tabs-main")[0]).addClass("active")},this.tabSliderAction=function(t,i){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-main")).hide(),$(t.find(".gt-tabs-button")[i]).addClass("active"),$(t.find(".gt-tabs-main")[i]).show(),$(t.find(".gt-tabs-main")[i]).addClass("active")},$("div").is(".gt-tabs")&&i.tabSlider(),this.setPlayers=function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/player_api";var e=$("script")[$("script").length-1];e.parentNode.insertBefore(t,e);$(".gt-video").each(function(){var t=$(this);t.find(".gt-video-switch").on("click",function(){$(this).addClass("gt-open"),t.addClass("gt-open"),i.addYouTube(t)})})},this.addYouTube=function(t){function i(){s.mute(),s.playVideo(),t.addClass("gt-video-on"),t.find(".gt-video-uncover").on("click",e),t.find(".gt-video-pause").on("click",function(){s.pauseVideo()}),t.find(".gt-video-play").on("click",function(){s.playVideo()})}function e(){console.log("playFullScreen");var i=t.find("iframe")[0],e=i.requestFullScreen||i.mozRequestFullScreen||i.webkitRequestFullScreen;e&&e.bind(i)()}var s,n="gt-video-"+t.index();t.find(".gt-video-switch").hide("slow"),t.find(".gt-video-inner").attr("id",n).addClass("gt-video-foreground"),s=new YT.Player(n,{width:600,height:400,videoId:t.attr("data-youtube"),playerVars:{playlist:t.attr("data-youtube"),color:"white",loop:1,autoplay:1},events:{onReady:i}})},$("div").is(".gt-video")&&i.setPlayers(),this.fixArticleScrollTablePosition=function(){var t=$(".gt-article-table-wrapper"),i=t.parent(),e=i.position().top,o=e+i.outerHeight(),a=t.outerWidth(),r=s.scrollTop(),c=n.outerHeight();console.log(e),console.log(r),e+90>r&&t.hasClass("gt-fixed")&&(t.removeClass("gt-fixed"),t.css({left:"",width:""})),e<r+90&&(t.hasClass("gt-fixed")||(t.css({left:t.offset().left+"px",width:a}),t.addClass("gt-fixed")),r+c>o?t.addClass("gt-fixed-bottom"):t.removeClass("gt-fixed-bottom")),t.hasClass("gt-fixed")?t.css({height:c-120+"px"}):t.css({height:""})},this.createArticteScrollTable=function(){if($("div").is(".gt-article")){var t="";$(".gt-article").each(function(){t+='<div class = "gt-article-scroll"><div class = "gt-article-scroll-shadow"></div><p>'+$(this).find("h2").text()+"</p></div>"}),$("#gt-article-scroll-table").html(t)}},this.showArtidleShadow=function(){$(".gt-article").each(function(){var t=$(this).position().top,i=$(this).outerHeight(),e=$(document).scrollTop(),s=0;(s=t>e?0:(e-t)/i)>1&&(s=1);var n=$(".gt-article-scroll")[$(this).index()];$(n).find(".gt-article-scroll-shadow").css("width",100*s+"%")})},$("div").is(".gt-article-table-wrapper")){var k,w=!1;$("div").is(".gt-article-scroll-table")&&(w=!0,i.createArticteScrollTable(),i.showArtidleShadow()),n.scroll(t),n.resize(t)}this.setCurrTime=function(){i.currTime();setInterval(i.currTime,3e4)},this.currTime=function(){$(".gt-curr-time").each(function(){var t=new Date;$(this).attr("data-gmt")&&t.setUTCHours(+$(this).attr("data-gmt"));var i=t.getHours(),e=t.getMinutes(),s=t.getDay(),n=t.getDate(),o=t.getMonth(),a=t.getFullYear();i<10&&(i="0"+i),e<10&&(e="0"+e),s=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],o=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][o],$(".gt-curr-time-time")&&$(".gt-curr-time-time").html(i+":"+e),$(".gt-curr-time-date")&&$(".gt-curr-time-date").html(s+", "+n+" "+o+" "+a)})},$("div").is(".gt-curr-time")&&i.setCurrTime(),this.innerScroll=function(t){t.find(".overview").height()>t.height()&&(t.addClass("isScrolled"),t.tinyscrollbar({thumbSize:40,wheelSpeed:10}))},$("div").is(".gt-inner-scroll")&&$(".gt-inner-scroll").each(function(){i.innerScroll($(this))}),this.createIconsItemsClick=function(){$(".gt-view-cards-icons-item").each(function(){$(this).hasClass("gt-view-cards-icons-visit")?i.createVisitLink($(this)):$(this).hasClass("gt-view-cards-icons-bookmarks")?i.createBookmarksLink($(this)):$(this).hasClass("gt-view-cards-icons-pin")||$(this).hasClass("gt-view-cards-icons-share")?i.toggleGtActive($(this)):$(this).hasClass("gt-view-cards-icons-share")&&i.createShareLink($(this))})},this.createShareLink=function(t){t.removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.toggleGtActive=function(t){(t=$(t)).removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.createVisitLink=function(t){t.closest(".gt-view-cards-inner").attr("data-href")&&t.on("click",function(){i.addVisitedLink(t)})},this.addVisitedLink=function(t){alert("послали данные на бек",t.closest(".gt-view-cards-inner").attr("data-href")),t.toggleClass("gt-active")},this.addBookmark=function(t,i,e){try{window.external.AddFavorite(i,e)}catch(s){try{window.sidebar.addPanel(e,i,"")}catch(s){if("object"==typeof opera)return t.title=e,t.url=i,!0;alert("Нажмите Ctrl-D чтобы добавить страницу в закладки")}}return!1},this.createBookmarksLink=function(t){var e=(t=$(t)).closest(".gt-view-cards-inner");(e=$(e)).attr("data-href")||e.attr("data-href",window.location.href),e.attr("data-bookmark")||e.attr("data-bookmark","GoToTrip"),t.attr("href",e.attr("data-href")),t.attr("rel","sidebar"),t.on("click",function(s){s.preventDefault(),i.addBookmark(t,e.attr("data-href"),e.attr("data-bookmark"))})},$("*").is(".gt-view-cards-icons-bookmarks")&&i.createBookmarksLink(),$("*").is(".gt-view-cards-icons-item")&&i.createIconsItemsClick(),$("#gt-enter-form-facebook").on("click",function(){i.socialEnter("facebook")}),$("#gt-enter-form-twitter").on("click",function(){i.socialEnter("twitter")}),$("#gt-enter-form-google").on("click",function(){i.socialEnter("google")}),$("#gt-reg-form-facebook").on("click",function(){i.socialRegistration("facebook")}),$("#gt-reg-form-twitter").on("click",function(){i.socialRegistration("twitter")}),$("#gt-reg-form-google").on("click",function(){i.socialRegistration("google")}),this.socialRegistration=function(t){alert("Регистрация через "+t)},this.socialEnter=function(t){alert("Вход через "+t)},this.cutNews=function(t){for(var i=t.height(),e=t.find("a"),s=0;s<e.length;s++)if($(e[s]).outerHeight(!0)<i)$(e[s]).addClass("gt-ready"),i-=$(e[s]).outerHeight(!0);else{var n=Math.floor(($(e[s]).text().length-30)*i/$(e[s]).height()),o=$(e[s]).text().substring(0,n-5);$(e[s]).text(o+"..."),$(e[s]).addClass("gt-ready")}},this.cutReadMoreSlider=function(){$(".gt-read-more-slider-text-inner").each(function(){i.cutting($(this),160)})},this.cutting=function(t,i){var e=t.text();e.length>i&&(e=e.slice(0,i)+"...",t.text(e))},$("div").is(".gt-news-cut")&&$(".gt-news-cut").each(function(){i.cutNews($(this))}),$("p").is(".gt-read-more-slider-text-inner")&&i.cutReadMoreSlider(),s.ready(function(){i.footerHeight(),i.deskTopMenuScroll()}),n.scroll(function(){i.upPageButton(),$(".gt-header-menu").is(":visible")&&i.deskTopMenuScroll()}),n.resize(function(){i.deskTopMenuScroll(),i.footerHeight(),d.hasClass("gt-open")&&i.mobileMenuClose(),$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){$(this).removeClass("gt-width"),$(this).removeClass("gt-height"),i.imgHolderFunc($(this))})}),$(window).on("load",function(){$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){i.imgHolderFunc($(this))})}),e.on("click",function(t){})};var goToTrip=new GoToTrip;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJHb1RvVHJpcCIsInNjcm9sbFRocm90dGxlciIsInNjcm9sbFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VsZiIsImZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uIiwic2hhZG93Iiwic2hvd0FydGlkbGVTaGFkb3ciLCJ0aGlzIiwiYm9keSIsIiQiLCJkb2N1bWVudCIsImRvYyIsImRvY1dpbmRvdyIsIndpbmRvdyIsImJvZHlQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0b2tlbjM2MCIsInRva2VuNjY3IiwidG9rZW43NjgiLCJ0b2tlbjEwMjQiLCJndEhlYWRlciIsImd0Rm9vdGVyIiwiZ3RXcmFwcGVyIiwidXBCdXR0b24iLCJtb2JpbGVNZW51U3dpdGNoIiwiZW50ZXJCdXR0b24iLCJlbnRlcldyYXBwZXIiLCJlbnRlckZvcm0iLCJlbnRlckNob3NlIiwiZW50ZXJDbG9zZSIsImZpeEJvZHkiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJjc3MiLCJwb3NpdGlvbiIsInVuZml4Qm9keSIsImZvb3RlckhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwiZGVza1RvcE1lbnVTY3JvbGwiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFnZVVwIiwiYW5pbWF0ZSIsInVwUGFnZUJ1dHRvbiIsIm9uIiwibW9iaWxlTWVudUNsb3NlIiwibW9iaWxlTWVudU9wZW4iLCJoYXNDbGFzcyIsIm9wZW5FbnRlckZvcm0iLCJjbG9zZUVudGVyRm9ybSIsImNoYW5nZUVudGVyUmVnaXN0cmF0aW9uIiwiZXZlbnQiLCJ0YXJnZXQiLCJhdHRyIiwiZWFjaCIsInNldEJhY2tncm91bmQiLCJwYXRoIiwiaXMiLCJpbWdIb2xkZXJGdW5jIiwiZWwiLCJob2xkZXJDb25zdCIsIm91dGVyV2lkdGgiLCJpbWciLCJmaW5kIiwiY3JlYXRlU2xpZGVyIiwiY3VyclNsaWRlciIsImNyZWF0ZUFycm93cyIsImlubmVyQ291bnQiLCJzY3JlZW5Db25zdCIsIm51bUlubmVyIiwibnVtUGFuZWwiLCJodG1sIiwib25lTW92ZUZ1bmN0aW9uIiwiY2hlY2tQb3NpdGlvbiIsInNob3dOdW0iLCJhcnJvd3NSZWFkeSIsImRlc3Ryb3lBcnJvd3MiLCJjbG9uZSIsIm9mZiIsImJ1bCIsIm51bSIsImN1cnJQb3NpdGlvbiIsInRyYW0iLCJ0cmFtU2xpZGVyTW92ZSIsImZhZGVTbGlkZXJNb3ZlIiwiYXJyb3ciLCJyaWdodCIsImRvdHMiLCJhbGxEb3RzIiwiY29udGFpbmVyIiwiYmFzZVdpZHRoIiwiaW5kZXgiLCJpbm5lciIsInRleHQiLCJjcmVhdGVUb3VjaCIsImluaXRpYWxQb2ludCIsImZpbmFsUG9pbnQiLCJlIiwib3JpZ2luYWxFdmVudCIsIk1hdGgiLCJhYnMiLCJ0b3VjaGVzIiwicGFnZVgiLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlZFRvdWNoZXMiLCJkZXN0cm95VG91Y2giLCJmaW5kU2NyZWVuQ29uc3QiLCJwYXJzZUludCIsInNldEJhc2VXaWR0aCIsInNsaWRlclRpbWVPdXQiLCJsZW5ndGgiLCJmYWRlIiwiaGFzQ2xvbmUiLCJhcHBlbmQiLCJuYXYiLCJzcGFucyIsImkiLCJmaXJzdCIsImNyZWF0ZURvdHMiLCJjbGlja1Bvc2l0aW9uIiwiYm9keVdyYXBwZXIiLCJzaG93IiwiY2xvbmVTbGlkZXIiLCJyZW1vdmUiLCJoaWRlIiwiZGVzdHJveUNsb25lU2xpZGVyIiwiY3JlYXRlQ2xvbmVTbGlkZXIiLCJwYXJlbnQiLCJyZXNpemUiLCJtYW5hZ2VHdEFjdGl2ZVVsTWVudSIsInRhZ05hbWUiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJ0YWJTbGlkZXIiLCJjdXJyVGFicyIsInRhYlNsaWRlckFjdGlvbiIsInRhYlNsaWRlckFjdGl2YXRpb24iLCJzZXRQbGF5ZXJzIiwidGFnIiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJzcmMiLCJsYXN0U2NyaXB0VGFnIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsImN1cnJlbnRQbGF5ZXIiLCJhZGRZb3VUdWJlIiwiaW5pdGlhbGl6ZSIsInBsYXllciIsIm11dGUiLCJwbGF5VmlkZW8iLCJwbGF5RnVsbFNjcmVlbiIsInBhdXNlVmlkZW8iLCJpZnJhbWUiLCJyZXF1ZXN0RnVsbFNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4iLCJiaW5kIiwiZWxJZCIsIllUIiwiUGxheWVyIiwid2lkdGgiLCJ2aWRlb0lkIiwicGxheWVyVmFycyIsInBsYXlsaXN0IiwiY29sb3IiLCJsb29wIiwiYXV0b3BsYXkiLCJldmVudHMiLCJvblJlYWR5IiwidGFibGUiLCJ0YWJsZVBhcmVudCIsInRhYmxlUGFyZW50VG9wIiwidGFibGVQYXJlbnRCb3R0b20iLCJ0YWJsZVdpZHRoIiwid2luZG93VG9wIiwid2lkb3dIZWlnaHQiLCJjcmVhdGVBcnRpY3RlU2Nyb2xsVGFibGUiLCJlbEhlaWdodCIsIndpbmRvd1Bvc2l0aW9uIiwieCIsImN1cnJTaGFkb3ciLCJzY3JvbGwiLCJzZXRDdXJyVGltZSIsImN1cnJUaW1lIiwic2V0SW50ZXJ2YWwiLCJkYXRlIiwiRGF0ZSIsInNldFVUQ0hvdXJzIiwiaG91cnMiLCJnZXRIb3VycyIsIm1pbnV0ZXMiLCJnZXRNaW51dGVzIiwid2Vla2RheSIsImdldERheSIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiaW5uZXJTY3JvbGwiLCJ0aW55c2Nyb2xsYmFyIiwidGh1bWJTaXplIiwid2hlZWxTcGVlZCIsImNyZWF0ZUljb25zSXRlbXNDbGljayIsImNyZWF0ZVZpc2l0TGluayIsImNyZWF0ZUJvb2ttYXJrc0xpbmsiLCJ0b2dnbGVHdEFjdGl2ZSIsImNyZWF0ZVNoYXJlTGluayIsInRvZ2dsZUNsYXNzIiwiYWRkVmlzaXRlZExpbmsiLCJhbGVydCIsImFkZEJvb2ttYXJrIiwiYSIsInVybCIsInRpdGxlIiwiZXh0ZXJuYWwiLCJBZGRGYXZvcml0ZSIsInNpZGViYXIiLCJhZGRQYW5lbCIsIm9wZXJhIiwibG9jYXRpb24iLCJocmVmIiwic29jaWFsRW50ZXIiLCJzb2NpYWxSZWdpc3RyYXRpb24iLCJ0b2tlbiIsImN1dE5ld3MiLCJtYXhIZWlnaHQiLCJsaW5rcyIsImN1dHRpbmdMZW5ndGgiLCJmbG9vciIsImN1dHRuaW5nIiwic3Vic3RyaW5nIiwiY3V0UmVhZE1vcmVTbGlkZXIiLCJjdXR0aW5nIiwibmV3c1RleHQiLCJzbGljZSIsInJlYWR5IiwiZ29Ub1RyaXAiXSwibWFwcGluZ3MiOiJBQUtBQSxTQUFXLFdBaXVCSCxTQUFTQyxJQUNBQyxJQUNEQSxFQUFnQkMsV0FBVyxXQUN2QkQsRUFBZ0IsS0FDaEJFLEVBQUtDLGdDQUNEQyxHQUNBRixFQUFLRyx1QkFydUJ6QixJQUFJSCxFQUFPSSxLQUNQQyxFQUFPQyxFQUFFQyxTQUFTRixNQUNsQkcsRUFBTUYsRUFBRUMsVUFDUkUsRUFBWUgsRUFBRUksUUFDZEMsR0FDSUMsS0FBSyxFQUNMQyxNQUFNLEdBRVZDLEVBQVdSLEVBQUUsY0FFYlMsR0FEV1QsRUFBRSxjQUNGQSxFQUFFLGVBQ2JVLEVBQVdWLEVBQUUsY0FDYlcsRUFBWVgsRUFBRSxlQUVkWSxHQURZWixFQUFFLGVBQ0hBLEVBQUUsV0FDYmEsRUFBV2IsRUFBRSxVQUNiYyxFQUFZZCxFQUFFLGVBQ2RlLEVBQVdmLEVBQUUsVUFDYmdCLEVBQW1CaEIsRUFBRSwwQkFDckJpQixFQUFjakIsRUFBRSxhQUNoQmtCLEVBQWVsQixFQUFFLDRCQUNqQm1CLEVBQVluQixFQUFFLG9CQUNkb0IsRUFBYXBCLEVBQUUsMEJBQ2ZxQixFQUFhckIsRUFBRSwwQkE2ckJuQixHQTVyQkFGLEtBQUt3QixRQUFVLFdBQ1BqQixFQUFhQyxLQUFPRCxFQUFhRSxPQUNyQ0YsRUFBYUMsSUFBTUosRUFBSXFCLFlBQ3ZCbEIsRUFBYUUsS0FBT1IsRUFBS3lCLFNBQVNqQixLQUNsQ1IsRUFBSzBCLEtBQ0RDLFNBQVUsUUFDVm5CLEtBQU1GLEVBQWFFLEtBQU8sS0FDMUJELEtBQU0s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Q1psRCxFQUFFLHNCQUFzQitDLEtBQUssV0FDekJyRCxFQUFLeUQsY0FBY25ELEVBQUVGLFdBS2pDQyxFQUFLc0MsR0FBRyxRQUFTLFNBQVVPLE9BTy9CLElBQUk2TCxTQUFXLElBQUluUCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL9GE0YPQvdC60YbQuNGPLCDQvtC/0YDQtdC00LXQu9GP0Y7RidCw0Y8g0LfQsNGA0LXQs9C40YHRgtCy0LjRgNC+0LLQsNC90L3Ri9C5INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQuNC70Lgg0L3QtdGCXHJcblxyXG4vLyDQv9GA0LXQtNGD0YHQvNC+0YLRgNC10YLRjCDQstGL0YXQvtC0INC40Lcg0LDQutC60LDRg9C90YLQsFxyXG5cclxuXHJcbkdvVG9UcmlwID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICBib2R5ID0gJChkb2N1bWVudC5ib2R5KSxcclxuICAgICAgICBkb2MgPSAkKGRvY3VtZW50KSxcclxuICAgICAgICBkb2NXaW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgYm9keVBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB0b3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBsZWZ0OiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG9rZW4zNjAgPSAkKFwiI2d0LWlzLTM2MFwiKSxcclxuICAgICAgICB0b2tlbjQ4MCA9ICQoXCIjZ3QtaXMtNDgwXCIpLFxyXG4gICAgICAgIHRva2VuNjY3ID0gJChcIiNndC1pcy02NjdcIiksXHJcbiAgICAgICAgdG9rZW43NjggPSAkKFwiI2d0LWlzLTc2OFwiKSxcclxuICAgICAgICB0b2tlbjEwMjQgPSAkKFwiI2d0LWlzLTEwMjRcIiksXHJcbiAgICAgICAgdG9rZW4xMjMxID0gJChcIiNndC1pcy0xMjMxXCIpLFxyXG4gICAgICAgIGd0SGVhZGVyID0gJChcImhlYWRlclwiKSxcclxuICAgICAgICBndEZvb3RlciA9ICQoXCJmb290ZXJcIiksXHJcbiAgICAgICAgZ3RXcmFwcGVyID0gJChcIiNndC13cmFwcGVyXCIpLFxyXG4gICAgICAgIHVwQnV0dG9uID0gJChcIiNndC11cFwiKSxcclxuICAgICAgICBtb2JpbGVNZW51U3dpdGNoID0gJChcIiNndC1tb2JpbGUtbWVudS1zd2l0Y2hcIiksXHJcbiAgICAgICAgZW50ZXJCdXR0b24gPSAkKCcuZ3QtZW50ZXInKSxcclxuICAgICAgICBlbnRlcldyYXBwZXIgPSAkKCcjZ3QtaGVhZGVyLWVudGVyLXdyYXBwZXInKSxcclxuICAgICAgICBlbnRlckZvcm0gPSAkKCcjZ3QtaGVhZGVyLWVudGVyJyksXHJcbiAgICAgICAgZW50ZXJDaG9zZSA9ICQoJyNndC1oZWFkZXItZW50ZXItY2hvc2UnKSxcclxuICAgICAgICBlbnRlckNsb3NlID0gJCgnI2d0LWhlYWRlci1lbnRlci1jbG9zZScpO1xyXG4gICAgdGhpcy5maXhCb2R5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChib2R5UG9zaXRpb24udG9wIHx8IGJvZHlQb3NpdGlvbi5sZWZ0KSByZXR1cm47XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLnRvcCA9IGRvYy5zY3JvbGxUb3AoKTtcclxuICAgICAgICBib2R5UG9zaXRpb24ubGVmdCA9IGJvZHkub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICBib2R5LmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXHJcbiAgICAgICAgICAgIGxlZnQ6IGJvZHlQb3NpdGlvbi5sZWZ0ICsgXCJweFwiLFxyXG4gICAgICAgICAgICB0b3A6IC0xICogYm9keVBvc2l0aW9uLnRvcCArIFwicHhcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy51bmZpeEJvZHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYm9keS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJcIixcclxuICAgICAgICAgICAgbGVmdDogXCJcIixcclxuICAgICAgICAgICAgdG9wOiBcIlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jLnNjcm9sbFRvcChib2R5UG9zaXRpb24udG9wKTtcclxuICAgICAgICBib2R5UG9zaXRpb24udG9wID0gZmFsc2U7XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLmxlZnQgPSBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5mb290ZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvb3RlckhlaWdodCA9IGd0Rm9vdGVyLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgaWYgKGZvb3RlckhlaWdodCA+IGRvY1dpbmRvdy5oZWlnaHQoKSAtIDUwKSB7XHJcbiAgICAgICAgICAgIGd0Rm9vdGVyLmNzcyhcInBvc2l0aW9uXCIsIFwic3RhdGljXCIpO1xyXG4gICAgICAgICAgICBndFdyYXBwZXIuY3NzKFwibWFyZ2luLWJvdHRvbVwiLCBcIlwiKTtcclxuICAgICAgICAgICAgdXBCdXR0b24uY3NzKFwicG9zaXRpb25cIiwgXCJzdGF0aWNcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3RGb290ZXIuY3NzKFwicG9zaXRpb25cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLmNzcyhcInBvc2l0aW9uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICBndFdyYXBwZXIuY3NzKFwibWFyZ2luLWJvdHRvbVwiLCBndEZvb3Rlci5vdXRlckhlaWdodCgpICsgXCJweFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5kZXNrVG9wTWVudVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZG9jV2luZG93LnNjcm9sbFRvcCgpID4gZ3RIZWFkZXIub3V0ZXJIZWlnaHQoKSkge1xyXG4gICAgICAgICAgICBndEhlYWRlci5hZGRDbGFzcyhcImd0LWhlYWRlci1zY3JvbGxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBndEhlYWRlci5yZW1vdmVDbGFzcyhcImd0LWhlYWRlci1zY3JvbGxlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucGFnZVVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCJib2R5LGh0bWxcIikuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSw4MDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudXBQYWdlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+IDMwKSB7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLmFkZENsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5yZW1vdmVDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIHVwQnV0dG9uLm9uKFwiY2xpY2tcIiwgc2VsZi5wYWdlVXApO1xyXG4gICAgdGhpcy5tb2JpbGVNZW51Q2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi51bmZpeEJvZHkoKTtcclxuICAgICAgICBtb2JpbGVNZW51U3dpdGNoLnJlbW92ZUNsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgICAgICBndEhlYWRlci5yZW1vdmVDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLm1vYmlsZU1lbnVPcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZml4Qm9keSgpO1xyXG4gICAgICAgIGd0SGVhZGVyLmFkZENsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgICAgICBtb2JpbGVNZW51U3dpdGNoLmFkZENsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBtb2JpbGVNZW51U3dpdGNoLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtb3BlblwiKSkge1xyXG4gICAgICAgICAgICBzZWxmLm1vYmlsZU1lbnVDbG9zZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYubW9iaWxlTWVudU9wZW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMub3BlbkVudGVyRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBlbnRlcldyYXBwZXIuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBzZXRUaW1lb3V0KHNob3cpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcclxuICAgICAgICAgICAgZW50ZXJGb3JtLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgIGVudGVyQ2xvc2UuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNsb3NlRW50ZXJGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVudGVyQ2xvc2UucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBlbnRlckZvcm0ucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDc1MCk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xyXG4gICAgICAgICAgICBlbnRlcldyYXBwZXIucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNoYW5nZUVudGVyUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGVudGVyRm9ybS5oYXNDbGFzcygkKGV2ZW50LnRhcmdldCkuYXR0cihcImNsYXNzXCIpKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGVudGVyRm9ybS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1lbnRlclwiKS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1yZWdpc3RyYXRpb25cIikuYWRkQ2xhc3MoJChldmVudC50YXJnZXQpLmF0dHIoXCJjbGFzc1wiKSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBlbnRlckJ1dHRvbi5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLm9uKCdjbGljaycsIHNlbGYub3BlbkVudGVyRm9ybSlcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBlbnRlckNsb3NlLm9uKCdjbGljaycsIHNlbGYuY2xvc2VFbnRlckZvcm0pO1xyXG4gICAgXHJcbiAgICBlbnRlckNob3NlLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHNlbGYuY2hhbmdlRW50ZXJSZWdpc3RyYXRpb24oZXZlbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZXRCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbWdIb2xkZXJzID0gJChcIi5ndC1pbWctaG9sZGVyXCIpO1xyXG4gICAgICAgIGltZ0hvbGRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghJCh0aGlzKS5hdHRyKFwiZGF0YS1iZ1wiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9ICQodGhpcykuYXR0cihcImRhdGEtYmdcIik7XHJcbiAgICAgICAgICAgIGlmICh0b2tlbjY2Ny5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyhcclxuICAgICAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICAndXJsKFwiLi9pbWcvYmFja2dyb3VuZHMvcGhvbmUvJyArIHBhdGggKyAnXCIpJ1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodG9rZW4xMDI0LmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICd1cmwoXCIuL2ltZy9iYWNrZ3JvdW5kcy90YWJsZXQvJyArIHBhdGggKyAnXCIpJ1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcyhcclxuICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgJ3VybChcIi4vaW1nL2JhY2tncm91bmRzL2Rlc2t0b3AvJyArIHBhdGggKyAnXCIpJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmltZ0hvbGRlckZ1bmMgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICB2YXIgaG9sZGVyQ29uc3QgPSBlbC5vdXRlckhlaWdodCgpIC8gZWwub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICBpbWcgPSBlbC5maW5kKCdpbWcnKSxcclxuICAgICAgICAgICAgaW1nQ29uc3QgPSBpbWcub3V0ZXJIZWlnaHQoKSAvIGltZy5vdXRlcldpZHRoKCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoaW1nQ29uc3QgPiBob2xkZXJDb25zdCkge1xyXG4gICAgICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LXdpZHRoXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC1oZWlnaHRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW1nLWhvbGRlclwiKSkge1xyXG4gICAgICAgIHNlbGYuc2V0QmFja2dyb3VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3JlYXRlU2xpZGVyID0gZnVuY3Rpb24gKGN1cnJTbGlkZXIsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlclRpbWVPdXQsXHJcbiAgICAgICAgICAgIHNjcmVlbkNvbnN0ID0gMSxcclxuICAgICAgICAgICAgYmFzZVdpZHRoLFxyXG4gICAgICAgICAgICBhcnJvd3NSZWFkeSA9IGZhbHNlLFxyXG4gICAgICAgICAgICBpbm5lciA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItaW5uZXJcIiksXHJcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItY29udGFpbmVyXCIpLFxyXG4gICAgICAgICAgICBpbm5lckNvdW50ID0gaW5uZXIubGVuZ3RoLFxyXG4gICAgICAgICAgICBjdXJyUG9zaXRpb24gPSBwb3NpdGlvbiB8fCAwLFxyXG4gICAgICAgICAgICBhcnJvdyA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItaGFzLWFycm93XCIpLFxyXG4gICAgICAgICAgICBkb3RzID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1oYXMtZG90c1wiKSxcclxuICAgICAgICAgICAgbnVtUGFuZWwgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLW51bVwiKSxcclxuICAgICAgICAgICAgdHJhbSA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItdHJhbVwiKSxcclxuICAgICAgICAgICAgZmFkZSA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItZmFkZVwiKSxcclxuICAgICAgICAgICAgaGFzQ2xvbmUgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWhhcy1jbG9uZVwiKTtcclxuICAgICAgICBpZiAoZmFkZSkge1xyXG4gICAgICAgICAgICBmYWRlU2xpZGVyTW92ZShwb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0cmFtKSB7XHJcbiAgICAgICAgICAgIGZpbmRTY3JlZW5Db25zdCgpO1xyXG4gICAgICAgICAgICBzZXRCYXNlV2lkdGgoKTtcclxuICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFycm93KSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLWFycm93LWhvbGRlclwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICBjcmVhdGVBcnJvd3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRvdHMpIHtcclxuICAgICAgICAgICAgY3JlYXRlRG90cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5uZXJDb3VudCA+IHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVRvdWNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChoYXNDbG9uZSkge1xyXG4gICAgICAgICAgICBjcmVhdGVDbG9uZUxpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lTGlzdGVuZXJzKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoJy5ndC1zbGlkZXItaW5uZXItY292ZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNsb25lU2xpZGVyKCQodGhpcykucGFyZW50KCkuaW5kZXgoKSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcnJvd3MoKSB7XHJcbiAgICAgICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgdmFyIG51bUlubmVyID0gJyc7XHJcbiAgICAgICAgICAgIGlmIChudW1QYW5lbCkge1xyXG4gICAgICAgICAgICAgICAgbnVtSW5uZXIgPSAnPGRpdiBjbGFzcz1cImd0LXNsaWRlci1hcnJvdy1udW1cIj48aSBjbGFzcz1cImd0LXNsaWRlci1udW0tY3VyclwiPjwvaT48aT7QuNC3PC9pPjxpIGNsYXNzPVwiZ3Qtc2xpZGVyLW51bS1tYXhcIj48L2k+PC9kaXY+J1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItYXJyb3ctaG9sZGVyXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3MgPSBcImd0LXNsaWRlci1hcnJvdyBsZWZ0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1sZWZ0IGZhLTJ4XCI+PC9pPicgK1xyXG4gICAgICAgICAgICAgICAgXCI8L3NwYW4+XCIgKyBudW1Jbm5lciArXHJcbiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3MgPSBcImd0LXNsaWRlci1hcnJvdyByaWdodFwiPicgK1xyXG4gICAgICAgICAgICAgICAgJzxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtcmlnaHQgZmEtMnhcIj48L2k+JyArXHJcbiAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjcmVhdGVBcnJvd3NMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgc2hvd051bSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95QXJyb3dzKGNsb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGNsb25lIHx8IGN1cnJTbGlkZXJcclxuICAgICAgICAgICAgZWwuZmluZChcIi5sZWZ0XCIpLm9mZigpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLnJpZ2h0XCIpLm9mZigpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIikuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcnJvd3NMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5sZWZ0XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5yaWdodFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNoZWNrUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKG51bVBhbmVsKSBzaG93TnVtKClcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVEb3RzKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImd0LXNsaWRlci1uYXZcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgdmFyIG5hdiA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItbmF2XCIpLFxyXG4gICAgICAgICAgICAgICAgc3BhbnMgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlubmVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc3BhbnMgKz0gXCI8c3BhbiBkYXRhLW51bSA9IFwiICsgaSArIFwiPjwvc3Bhbj5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuYXYuaHRtbChzcGFucyk7XHJcbiAgICBcclxuICAgICAgICAgICAgbmF2LmZpbmQoXCJzcGFuXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItbmF2IHNwYW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24odHJ1ZSwgKyQodGhpcykuYXR0cihcImRhdGEtbnVtXCIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gb25lTW92ZUZ1bmN0aW9uKGJ1bCwgbnVtKSB7XHJcbiAgICAgICAgICAgIGlmIChudW0gfHwgbnVtID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gPSBudW07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYnVsKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gKz0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiAtPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdDtcclxuICAgICAgICAgICAgICAgIC8vIHNlbGYuc2xpZGVyRW5kTGVmdChjdXJyU2xpZGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gMDtcclxuICAgICAgICAgICAgICAgIC8vIHNlbGYuc2xpZGVyRW5kUmlnaHQoY3VyclNsaWRlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmYWRlU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcnJvdykgY2hlY2tQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAobnVtUGFuZWwpIHNob3dOdW0oKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjaGVja1Bvc2l0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IGN1cnJTbGlkZXIuZmluZChcIi5sZWZ0XCIpLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQgPSBjdXJyU2xpZGVyLmZpbmQoXCIucmlnaHRcIik7XHJcbiAgICAgICAgICAgIHJpZ2h0LnJlbW92ZUNsYXNzKFwibm90LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgbGVmdC5yZW1vdmVDbGFzcyhcIm5vdC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbGVmdC5hZGRDbGFzcyhcIm5vdC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA9PSBpbm5lckNvdW50IC0gMSB8fCBjdXJyUG9zaXRpb24gPT0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgICAgICByaWdodC5hZGRDbGFzcyhcIm5vdC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiB0cmFtU2xpZGVyTW92ZSgpIHtcclxuICAgICAgICAgICAgaWYgKGRvdHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhbGxEb3RzID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXYgc3BhblwiKTtcclxuICAgICAgICAgICAgICAgIGFsbERvdHMucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAkKGFsbERvdHNbY3VyclBvc2l0aW9uXSkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udGFpbmVyLmNzcyhcIm1hcmdpbi1sZWZ0XCIsIGJhc2VXaWR0aCAqIC0xICogY3VyclBvc2l0aW9uICsgXCJweFwiKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBmYWRlU2xpZGVyTW92ZShwb3NpdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBwb3NpdGlvbiB8fCBjdXJyUG9zaXRpb247XHJcbiAgICAgICAgICAgICQoaW5uZXIpLnJlbW92ZUNsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgICQoaW5uZXJbaW5kZXhdKS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNob3dOdW0oKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZCgnLmd0LXNsaWRlci1udW0tY3VycicpLnRleHQoY3VyclBvc2l0aW9uICsgMSk7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZCgnLmd0LXNsaWRlci1udW0tbWF4JykudGV4dChpbm5lckNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVUb3VjaCgpIHtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxQb2ludCA9IDAsXHJcbiAgICAgICAgICAgICAgICBmaW5hbFBvaW50ID0gMDtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5vbihcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsUG9pbnQgPSBNYXRoLmFicyhlLnRvdWNoZXNbMF0ucGFnZVgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0b3VjaHN0YXJ0XCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5vbihcInRvdWNoZW5kXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICAgICAgICAgICAgZmluYWxQb2ludCA9IE1hdGguYWJzKGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGluaXRpYWxQb2ludCAtIGZpbmFsUG9pbnQpID4gNTApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFBvaW50ID4gZmluYWxQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lUb3VjaChjbG9uZSkge1xyXG4gICAgICAgICAgICB2YXIgZWwgPSBjbG9uZSB8fCBjdXJyU2xpZGVyO1xyXG4gICAgICAgICAgICBlbC5vZmYoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBmaW5kU2NyZWVuQ29uc3QoKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyU2xpZGVyLmF0dHIoXCJkYXRhLWNvdW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JlZW5Db25zdCA9IHBhcnNlSW50KGN1cnJTbGlkZXIuYXR0cihcImRhdGEtY291bnRcIikpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodG9rZW43NjgpLmlzKFwiOnZpc2libGVcIikpIHNjcmVlbkNvbnN0ID0gMztcclxuICAgICAgICAgICAgICAgIGlmICgkKHRva2VuNjY3KS5pcyhcIjp2aXNpYmxlXCIpKSBzY3JlZW5Db25zdCA9IDI7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0b2tlbjM2MCkuaXMoXCI6dmlzaWJsZVwiKSkgc2NyZWVuQ29uc3QgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0QmFzZVdpZHRoKCkge1xyXG4gICAgICAgICAgICBiYXNlV2lkdGggPSBjdXJyU2xpZGVyLm91dGVyV2lkdGgoKSAvIHNjcmVlbkNvbnN0O1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWNvbnRhaW5lclwiKS5vdXRlcldpZHRoKChpbm5lckNvdW50ICsgMSkgKiBiYXNlV2lkdGgpO1xyXG4gICAgICAgICAgICBpbm5lci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub3V0ZXJXaWR0aChiYXNlV2lkdGgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDbG9uZVNsaWRlcihjbGlja1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiI2d0LWNsb25lXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHNlbGYuZml4Qm9keSgpO1xyXG4gICAgICAgICAgICB2YXIgYm9keVdyYXBwZXIgPSAkKFwiI2d0LWJvZHktd3JhcHBlclwiKVxyXG4gICAgICAgICAgICBib2R5V3JhcHBlci5hcHBlbmQoJzxkaXYgaWQgPSBcImd0LWNsb25lLXdyYXBwZXJcIiAgIGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBpZCA9IFwiZ3QtY2xvbmUtY2xvc2VcIiBjbGFzcyA9IFwiZ3Qtc2xpZGVyLWNsb25lLWNsb3NlXCI+PC9kaXY+PGRpdiBpZCA9IFwiZ3QtY2xvbmVcIiBjbGFzcz1cImd0LXNsaWRlciBndC1zbGlkZXItY2xvbmUgZ3Qtc2xpZGVyLWZhZGUgZ3Qtc2xpZGVyLWhhcy1hcnJvd1wiPjxkaXYgIGlkID0gXCJndC1jbG9uZS1jb250YWluZXJcIiBjbGFzcz1cImd0LXNsaWRlci1jb250YWluZXJcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgYm9keVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgICAgICB2YXIgY2xvbmVTbGlkZXIgPSAkKCcjZ3QtY2xvbmUnKSxcclxuICAgICAgICAgICAgICAgIGlubmVycyA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItaW5uZXJcIikuY2xvbmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlubmVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub3V0ZXJXaWR0aCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZ3QtY2xvbmUtY29udGFpbmVyJykuYXBwZW5kKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZXIoY2xvbmVTbGlkZXIsIGNsaWNrUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lDbG9uZVNsaWRlcihjbG9uZVNsaWRlcikge1xyXG4gICAgICAgICAgICBkZXN0cm95QXJyb3dzKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgZGVzdHJveVRvdWNoKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgJChcIiNndC1jbG9uZS1jbG9zZVwiKS5vZmYoKTtcclxuICAgICAgICAgICAgJChcIiNndC1jbG9uZS13cmFwcGVyXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWJvZHktd3JhcHBlclwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIHNlbGYudW5maXhCb2R5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vLy8vLy8vLy9yZXNpemVTbGlkZXJcclxuICAgICAgICBmdW5jdGlvbiByZXNpemVTbGlkZXIoKSB7XHJcbiAgICAgICAgICAgIGlmICghc2xpZGVyVGltZU91dCkge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVyVGltZU91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlclRpbWVPdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZUZ1bmMoKTtcclxuICAgICAgICAgICAgICAgIH0sIDEzMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBkb2NXaW5kb3cucmVzaXplKHJlc2l6ZVNsaWRlcik7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiByZXNpemVGdW5jKCkge1xyXG4gICAgICAgICAgICBkZXN0cm95VG91Y2goKTtcclxuICAgICAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgICAgIGZpbmRTY3JlZW5Db25zdCgpO1xyXG4gICAgICAgICAgICAgICAgc2V0QmFzZVdpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICByZXNpemVNb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcnJvd3NSZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveUFycm93cygpO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQXJyb3dzKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5uZXJDb3VudCA+IHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVUb3VjaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICBmdW5jdGlvbiByZXNpemVNb3ZlKCkge1xyXG4gICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpXHJcbiAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdDtcclxuICAgICAgICAgICBpZiAoaW5uZXJDb3VudCA8PSBzY3JlZW5Db25zdCkgY3VyclBvc2l0aW9uID0gMDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICB9XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1zbGlkZXJcIikpIHtcclxuICAgICAgICAkKFwiLmd0LXNsaWRlclwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZXIoJCh0aGlzKSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHRoaXMubWFuYWdlR3RBY3RpdmVVbE1lbnUgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBpZiAoZWwudGFnTmFtZSAhPSBcImxpXCIpXHJcbiAgICAgICAgICAgIGVsID0gJChlbCkuY2xvc2VzdChcImxpXCIpXHJcbiAgICBcclxuICAgICAgICAkKGVsKS5jbG9zZXN0KCQoXCJ1bFwiKSkuZmluZChcImxpXCIpLnJlbW92ZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcIipcIikuaXMoXCIuZ3QtaHVuZHJldC1tZW51XCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1odW5kcmV0LW1lbnVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5tYW5hZ2VHdEFjdGl2ZVVsTWVudShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1idXR0b24tbWVudVwiKSkge1xyXG4gICAgICAgICQoXCIuZ3QtYnV0dG9uLW1lbnVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5tYW5hZ2VHdEFjdGl2ZVVsTWVudShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoJChcIipcIikuaXMoXCIuZ3QtbWVudS1uZXdzXCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1tZW51LW5ld3NcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5tYW5hZ2VHdEFjdGl2ZVVsTWVudShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLnRhYlNsaWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFiU2xpZGVycyA9ICQoXCIuZ3QtdGFic1wiKTtcclxuICAgICAgICB0YWJTbGlkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VyclRhYnMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBjdXJyVGFicy5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRhYlNsaWRlckFjdGlvbihjdXJyVGFicywgJCh0aGlzKS5pbmRleCgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZi50YWJTbGlkZXJBY3RpdmF0aW9uKGN1cnJUYWJzKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudGFiU2xpZGVyQWN0aXZhdGlvbiA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLWJ1dHRvblwiKSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKSkuaGlkZSgpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLWJ1dHRvblwiKVswXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKVswXSkuc2hvdygpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbMF0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy50YWJTbGlkZXJBY3Rpb24gPSBmdW5jdGlvbiAoZWwsIG51bSkge1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLWJ1dHRvblwiKSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKSkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKSkuaGlkZSgpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLWJ1dHRvblwiKVtudW1dKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpW251bV0pLnNob3coKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpW251bV0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC10YWJzXCIpKSB7XHJcbiAgICAgICAgc2VsZi50YWJTbGlkZXIoKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0UGxheWVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuICAgICAgICB0YWcudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiAgICAgICAgdGFnLnNyYyA9IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vcGxheWVyX2FwaVwiO1xyXG4gICAgICAgIHZhciBsYXN0U2NyaXB0VGFnID0gJChcInNjcmlwdFwiKVskKFwic2NyaXB0XCIpLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIGxhc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFnLCBsYXN0U2NyaXB0VGFnKTtcclxuICAgICAgICB2YXIgZ3RWaWRlb3MgPSAkKFwiLmd0LXZpZGVvXCIpO1xyXG4gICAgICAgIGd0VmlkZW9zLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFBsYXllciA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIuZmluZChcIi5ndC12aWRlby1zd2l0Y2hcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hZGRZb3VUdWJlKGN1cnJlbnRQbGF5ZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuYWRkWW91VHViZSA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIHZhciBwbGF5ZXIsXHJcbiAgICAgICAgICAgIGVsSWQgPSBcImd0LXZpZGVvLVwiICsgZWwuaW5kZXgoKTtcclxuICAgIFxyXG4gICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tc3dpdGNoXCIpLmhpZGUoJ3Nsb3cnKTtcclxuICAgIFxyXG4gICAgICAgIGVsXHJcbiAgICAgICAgICAgIC5maW5kKFwiLmd0LXZpZGVvLWlubmVyXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgZWxJZClcclxuICAgICAgICAgICAgLmFkZENsYXNzKFwiZ3QtdmlkZW8tZm9yZWdyb3VuZFwiKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKGVsSWQsIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA2MDAsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgICAgICAgICAgIHZpZGVvSWQ6IGVsLmF0dHIoXCJkYXRhLXlvdXR1YmVcIiksXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJWYXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWxpc3Q6IGVsLmF0dHIoXCJkYXRhLXlvdXR1YmVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZWtiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRyb2xzOiAwXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25SZWFkeTogaW5pdGlhbGl6ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvbllvdVR1YmVJZnJhbWVBUElSZWFkeSgpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgcGxheWVyLm11dGUoKTtcclxuICAgICAgICAgICAgcGxheWVyLnBsYXlWaWRlbygpO1xyXG4gICAgICAgICAgICBlbC5hZGRDbGFzcyhcImd0LXZpZGVvLW9uXCIpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXZpZGVvLXVuY292ZXJcIikub24oJ2NsaWNrJywgcGxheUZ1bGxTY3JlZW4pO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXZpZGVvLXBhdXNlXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5wYXVzZVZpZGVvKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXZpZGVvLXBsYXlcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHBsYXlGdWxsU2NyZWVuKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncGxheUZ1bGxTY3JlZW4nKTtcclxuICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGVsLmZpbmQoJ2lmcmFtZScpWzBdO1xyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdEZ1bGxTY3JlZW4gPSBpZnJhbWUucmVxdWVzdEZ1bGxTY3JlZW4gfHwgaWZyYW1lLm1velJlcXVlc3RGdWxsU2NyZWVuIHx8IGlmcmFtZS53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbjtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3RGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0RnVsbFNjcmVlbi5iaW5kKGlmcmFtZSkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXZpZGVvXCIpKSB7XHJcbiAgICAgICAgc2VsZi5zZXRQbGF5ZXJzKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJsZSA9ICQoXCIuZ3QtYXJ0aWNsZS10YWJsZS13cmFwcGVyXCIpLFxyXG4gICAgICAgICAgICB0YWJsZVBhcmVudCA9IHRhYmxlLnBhcmVudCgpLFxyXG4gICAgICAgICAgICB0YWJsZVBhcmVudFRvcCA9IHRhYmxlUGFyZW50LnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICB0YWJsZVBhcmVudEJvdHRvbSA9IHRhYmxlUGFyZW50VG9wICsgdGFibGVQYXJlbnQub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgdGFibGVXaWR0aCA9IHRhYmxlLm91dGVyV2lkdGgoKSxcclxuICAgICAgICAgICAgd2luZG93VG9wID0gZG9jLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICB3aWRvd0hlaWdodCA9IGRvY1dpbmRvdy5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgIC8vIHRhYmxlUGFyZW50LmFkZENsYXNzKCd0ZXN0Jyk7XHJcbiAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyh0YWJsZVBhcmVudFRvcCk7XHJcbiAgICAgICAgY29uc29sZS5sb2cod2luZG93VG9wKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgaWYgKHRhYmxlUGFyZW50VG9wKzkwID4gd2luZG93VG9wKSB7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZS5oYXNDbGFzcyhcImd0LWZpeGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmVDbGFzcyhcImd0LWZpeGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIlwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmICh0YWJsZVBhcmVudFRvcCA8IHdpbmRvd1RvcCArIDkwKSB7XHJcbiAgICAgICAgICAgIGlmICghdGFibGUuaGFzQ2xhc3MoXCJndC1maXhlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0YWJsZS5vZmZzZXQoKS5sZWZ0ICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0YWJsZVdpZHRoXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmFkZENsYXNzKFwiZ3QtZml4ZWRcIik7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3dUb3AgKyB3aWRvd0hlaWdodCA+IHRhYmxlUGFyZW50Qm90dG9tKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5hZGRDbGFzcyhcImd0LWZpeGVkLWJvdHRvbVwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNsYXNzKFwiZ3QtZml4ZWQtYm90dG9tXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAod2lkb3dIZWlnaHQgLSAxMjApICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJydcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVBcnRpY3RlU2Nyb2xsVGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkKFwiZGl2XCIpLmlzKFwiLmd0LWFydGljbGVcIikpIHJldHVybjtcclxuICAgICAgICB2YXIgYXJ0aWNsZXMgPSAkKFwiLmd0LWFydGljbGVcIiksXHJcbiAgICAgICAgICAgIGh0bWwgPSBcIlwiO1xyXG4gICAgICAgIGFydGljbGVzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBodG1sICs9XHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcyA9IFwiZ3QtYXJ0aWNsZS1zY3JvbGxcIj48ZGl2IGNsYXNzID0gXCJndC1hcnRpY2xlLXNjcm9sbC1zaGFkb3dcIj48L2Rpdj48cD4nICtcclxuICAgICAgICAgICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICAuZmluZChcImgyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoKSArXHJcbiAgICAgICAgICAgICAgICBcIjwvcD48L2Rpdj5cIjtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiI2d0LWFydGljbGUtc2Nyb2xsLXRhYmxlXCIpLmh0bWwoaHRtbCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnNob3dBcnRpZGxlU2hhZG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIuZ3QtYXJ0aWNsZVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyUG9zaXRpb24gPSAkKHRoaXMpLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICAgICAgZWxIZWlnaHQgPSAkKHRoaXMpLm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICB3aW5kb3dQb3NpdGlvbiA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiB3aW5kb3dQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHdpbmRvd1Bvc2l0aW9uIC0gY3VyclBvc2l0aW9uKSAvIGVsSGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh4ID4gMSkgeCA9IDE7XHJcbiAgICAgICAgICAgIHZhciBjdXJyU2hhZG93ID0gJChcIi5ndC1hcnRpY2xlLXNjcm9sbFwiKVskKHRoaXMpLmluZGV4KCldO1xyXG4gICAgICAgICAgICAkKGN1cnJTaGFkb3cpXHJcbiAgICAgICAgICAgICAgICAuZmluZChcIi5ndC1hcnRpY2xlLXNjcm9sbC1zaGFkb3dcIilcclxuICAgICAgICAgICAgICAgIC5jc3MoXCJ3aWR0aFwiLCB4ICogMTAwICsgXCIlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJCgnZGl2JykuaXMoJy5ndC1hcnRpY2xlLXRhYmxlLXdyYXBwZXInKSkge1xyXG4gICAgICAgIHZhciBzaGFkb3cgPSBmYWxzZSxcclxuICAgICAgICAgICAgc2Nyb2xsVGltZW91dDtcclxuICAgIFxyXG4gICAgICAgIGlmICgkKCdkaXYnKS5pcyhcIi5ndC1hcnRpY2xlLXNjcm9sbC10YWJsZVwiKSkge1xyXG4gICAgICAgICAgICBzaGFkb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSgpO1xyXG4gICAgICAgICAgICBzZWxmLnNob3dBcnRpZGxlU2hhZG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzY3JvbGxUaHJvdHRsZXIoKSB7XHJcbiAgICAgICAgICAgIGlmICghc2Nyb2xsVGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZml4QXJ0aWNsZVNjcm9sbFRhYmxlUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hhZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd0FydGlkbGVTaGFkb3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBkb2NXaW5kb3cuc2Nyb2xsKHNjcm9sbFRocm90dGxlcik7XHJcbiAgICAgICAgZG9jV2luZG93LnJlc2l6ZShzY3JvbGxUaHJvdHRsZXIpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIH1cclxuICAgIHRoaXMuc2V0Q3VyclRpbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyVGltZSgpO1xyXG4gICAgICAgIHZhciB0ID0gc2V0SW50ZXJ2YWwoc2VsZi5jdXJyVGltZSwgMzAwMDApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3VyclRpbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5ndC1jdXJyLXRpbWVcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cihcImRhdGEtZ210XCIpKSBkYXRlLnNldFVUQ0hvdXJzKCskKHRoaXMpLmF0dHIoXCJkYXRhLWdtdFwiKSk7XHJcbiAgICAgICAgICAgIHZhciBob3VycyA9IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgIHdlZWtkYXkgPSBkYXRlLmdldERheSgpLFxyXG4gICAgICAgICAgICAgICAgZGF5ID0gZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSxcclxuICAgICAgICAgICAgICAgIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICB3ZWVrZGF5cyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBcItCS0L7RgdC60YDQtdGB0LXQvdGM0LVcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCf0L7QvdC10LTQtdC70YzQvdC40LpcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCS0YLQvtGA0L3QuNC6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQodGA0LXQtNCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQp9C10YLQstC10YDQs1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0J/Rj9GC0L3QuNGG0LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCh0YPQsdCx0L7RgtCwXCJcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBtb250aGVzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIFwi0Y/QvdCy0LDRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLRhNC10LLRgNCw0LvRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LzQsNGA0YLQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LDQv9GA0LXQu9GPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvNCw0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC40Y7QvdGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQuNGO0LvRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LDQstCz0YPRgdGC0LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItGB0LXQvdGC0Y/QsdGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC+0LrRgtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvdC+0Y/QsdGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC00LXQutCw0LHRgNGPXCJcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmIChob3VycyA8IDEwKSBob3VycyA9IFwiMFwiICsgaG91cnM7XHJcbiAgICAgICAgICAgIGlmIChtaW51dGVzIDwgMTApIG1pbnV0ZXMgPSBcIjBcIiArIG1pbnV0ZXM7XHJcbiAgICAgICAgICAgIHdlZWtkYXkgPSB3ZWVrZGF5c1t3ZWVrZGF5XTtcclxuICAgICAgICAgICAgbW9udGggPSBtb250aGVzW21vbnRoXTtcclxuICAgICAgICAgICAgaWYgKCQoXCIuZ3QtY3Vyci10aW1lLXRpbWVcIikpXHJcbiAgICAgICAgICAgICAgICAkKFwiLmd0LWN1cnItdGltZS10aW1lXCIpLmh0bWwoaG91cnMgKyBcIjpcIiArIG1pbnV0ZXMpO1xyXG4gICAgICAgICAgICBpZiAoJChcIi5ndC1jdXJyLXRpbWUtZGF0ZVwiKSlcclxuICAgICAgICAgICAgICAgICQoXCIuZ3QtY3Vyci10aW1lLWRhdGVcIikuaHRtbChcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5ICsgXCIsIFwiICsgZGF5ICsgXCIgXCIgKyBtb250aCArIFwiIFwiICsgeWVhclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtY3Vyci10aW1lXCIpKSB7XHJcbiAgICAgICAgc2VsZi5zZXRDdXJyVGltZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5uZXJTY3JvbGwgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBpZiAoZWwuZmluZChcIi5vdmVydmlld1wiKS5oZWlnaHQoKSA+IGVsLmhlaWdodCgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiaXNTY3JvbGxlZFwiKTtcclxuICAgICAgICAgICAgZWwudGlueXNjcm9sbGJhcih7XHJcbiAgICAgICAgICAgICAgICB0aHVtYlNpemU6IDQwLFxyXG4gICAgICAgICAgICAgICAgd2hlZWxTcGVlZDogMTBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWlubmVyLXNjcm9sbFwiKSkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICQoJy5ndC1pbm5lci1zY3JvbGwnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5uZXJTY3JvbGwoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIH1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vL2RvZXMgbm90IHdvcmtcclxuXHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVJY29uc0l0ZW1zQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5ndC12aWV3LWNhcmRzLWljb25zLWl0ZW1cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy12aXNpdFwiKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVWaXNpdExpbmsoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLWJvb2ttYXJrc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVCb29rbWFya3NMaW5rKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLXBpblwiKSB8fFxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtc2hhcmVcIilcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRvZ2dsZUd0QWN0aXZlKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy1zaGFyZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVTaGFyZUxpbmsoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlU2hhcmVMaW5rID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgZWwub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGVsLnRvZ2dsZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy50b2dnbGVHdEFjdGl2ZSA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIHZhciBlbCA9ICQoZWwpO1xyXG4gICAgICAgIGVsLnJlbW92ZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgIGVsLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBlbC50b2dnbGVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVWaXNpdExpbmsgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBpZiAoIWVsLmNsb3Nlc3QoXCIuZ3Qtdmlldy1jYXJkcy1pbm5lclwiKS5hdHRyKFwiZGF0YS1ocmVmXCIpKSByZXR1cm47XHJcbiAgICAgICAgZWwub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYWRkVmlzaXRlZExpbmsoZWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmFkZFZpc2l0ZWRMaW5rID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgYWxlcnQoXHJcbiAgICAgICAgICAgIFwi0L/QvtGB0LvQsNC70Lgg0LTQsNC90L3Ri9C1INC90LAg0LHQtdC6XCIsXHJcbiAgICAgICAgICAgIGVsLmNsb3Nlc3QoXCIuZ3Qtdmlldy1jYXJkcy1pbm5lclwiKS5hdHRyKFwiZGF0YS1ocmVmXCIpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBlbC50b2dnbGVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5hZGRCb29rbWFyayA9IGZ1bmN0aW9uIChhLCB1cmwsIHRpdGxlKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgd2luZG93LmV4dGVybmFsLkFkZEZhdm9yaXRlKHVybCwgdGl0bGUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zaWRlYmFyLmFkZFBhbmVsKHRpdGxlLCB1cmwsIFwiXCIpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wZXJhID09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYS51cmwgPSB1cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi0J3QsNC20LzQuNGC0LUgQ3RybC1EINGH0YLQvtCx0Ysg0LTQvtCx0LDQstC40YLRjCDRgdGC0YDQsNC90LjRhtGDINCyINC30LDQutC70LDQtNC60LhcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlQm9va21hcmtzTGluayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIHZhciBlbCA9ICQoZWwpO1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBlbC5jbG9zZXN0KFwiLmd0LXZpZXctY2FyZHMtaW5uZXJcIik7XHJcbiAgICAgICAgcGFyZW50ID0gJChwYXJlbnQpO1xyXG4gICAgICAgIGlmICghcGFyZW50LmF0dHIoXCJkYXRhLWhyZWZcIikpXHJcbiAgICAgICAgICAgIHBhcmVudC5hdHRyKFwiZGF0YS1ocmVmXCIsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgICAgICBpZiAoIXBhcmVudC5hdHRyKFwiZGF0YS1ib29rbWFya1wiKSkgcGFyZW50LmF0dHIoXCJkYXRhLWJvb2ttYXJrXCIsIFwiR29Ub1RyaXBcIik7XHJcbiAgICAgICAgZWwuYXR0cihcImhyZWZcIiwgcGFyZW50LmF0dHIoXCJkYXRhLWhyZWZcIikpO1xyXG4gICAgICAgIGVsLmF0dHIoXCJyZWxcIiwgXCJzaWRlYmFyXCIpO1xyXG4gICAgICAgIGVsLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLmFkZEJvb2ttYXJrKFxyXG4gICAgICAgICAgICAgICAgZWwsXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXR0cihcImRhdGEtaHJlZlwiKSxcclxuICAgICAgICAgICAgICAgIHBhcmVudC5hdHRyKFwiZGF0YS1ib29rbWFya1wiKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcIipcIikuaXMoXCIuZ3Qtdmlldy1jYXJkcy1pY29ucy1ib29rbWFya3NcIikpIHtcclxuICAgICAgICBzZWxmLmNyZWF0ZUJvb2ttYXJrc0xpbmsoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcIipcIikuaXMoXCIuZ3Qtdmlldy1jYXJkcy1pY29ucy1pdGVtXCIpKSB7XHJcbiAgICAgICAgc2VsZi5jcmVhdGVJY29uc0l0ZW1zQ2xpY2soKTtcclxuICAgIH1cclxuICAgIC8vINC/0YDQvtCy0LXRgNC60LAg0L3QsCDQvdCw0LvQuNGH0LjQtSAtINC+0LHRgdGD0LTQuNGC0Ywg0YEg0LHQtdC60L7QvCDQv9C+0LLQtdC00LXQs9GC0LVcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICQoJyNndC1lbnRlci1mb3JtLWZhY2Vib29rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsRW50ZXIoJ2ZhY2Vib29rJylcclxuICAgIH0pO1xyXG4gICAgJCgnI2d0LWVudGVyLWZvcm0tdHdpdHRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbEVudGVyKCd0d2l0dGVyJylcclxuICAgIH0pO1xyXG4gICAgJCgnI2d0LWVudGVyLWZvcm0tZ29vZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsRW50ZXIoJ2dvb2dsZScpXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgJCgnI2d0LXJlZy1mb3JtLWZhY2Vib29rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsUmVnaXN0cmF0aW9uKCdmYWNlYm9vaycpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1yZWctZm9ybS10d2l0dGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsUmVnaXN0cmF0aW9uKCd0d2l0dGVyJylcclxuICAgIH0pO1xyXG4gICAgJCgnI2d0LXJlZy1mb3JtLWdvb2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbFJlZ2lzdHJhdGlvbignZ29vZ2xlJylcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGlzLnNvY2lhbFJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgXHJcbiAgICAgICAgYWxlcnQoXCLQoNC10LPQuNGB0YLRgNCw0YbQuNGPINGH0LXRgNC10LcgXCIgKyB0b2tlbilcclxuICAgIFxyXG4gICAgfTtcclxuICAgIHRoaXMuc29jaWFsRW50ZXIgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIFxyXG4gICAgICAgIGFsZXJ0KFwi0JLRhdC+0LQg0YfQtdGA0LXQtyBcIiArIHRva2VuKVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICB0aGlzLmN1dE5ld3MgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgIHZhciBtYXhIZWlnaHQgPSBlbC5oZWlnaHQoKSxcclxuICAgICAgICAgICBsaW5rcyA9IGVsLmZpbmQoJ2EnKTtcclxuICAgXHJcbiAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgaWYgKCQobGlua3NbaV0pLm91dGVySGVpZ2h0KHRydWUpIDwgbWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICQobGlua3NbaV0pLmFkZENsYXNzKCdndC1yZWFkeScpO1xyXG4gICAgICAgICAgICAgICBtYXhIZWlnaHQgLT0gJChsaW5rc1tpXSkub3V0ZXJIZWlnaHQodHJ1ZSk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgdmFyIGN1dHRpbmdMZW5ndGggPSBNYXRoLmZsb29yKCgkKGxpbmtzW2ldKS50ZXh0KCkubGVuZ3RoIC0gMzApICogbWF4SGVpZ2h0IC8gJChsaW5rc1tpXSkuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAgICB2YXIgY3V0dG5pbmcgPSAkKGxpbmtzW2ldKS50ZXh0KCkuc3Vic3RyaW5nKDAsIGN1dHRpbmdMZW5ndGggLSA1KTtcclxuICAgICAgICAgICAgICAgJChsaW5rc1tpXSkudGV4dChjdXR0bmluZyArICcuLi4nKTtcclxuICAgICAgICAgICAgICAgJChsaW5rc1tpXSkuYWRkQ2xhc3MoJ2d0LXJlYWR5Jyk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfVxyXG4gICB9O1xyXG4gICBcclxuICAgXHJcbiAgIHRoaXMuY3V0UmVhZE1vcmVTbGlkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICB2YXIgY3V0dGluZ3MgPSAkKFwiLmd0LXJlYWQtbW9yZS1zbGlkZXItdGV4dC1pbm5lclwiKTtcclxuICAgICAgIGN1dHRpbmdzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIHNlbGYuY3V0dGluZygkKHRoaXMpLCAxNjApO1xyXG4gICAgICAgfSk7XHJcbiAgIH07XHJcbiAgIFxyXG4gICB0aGlzLmN1dHRpbmcgPSBmdW5jdGlvbiAoZWwsIG51bSkge1xyXG4gICAgICAgdmFyIG5ld3NUZXh0ID0gZWwudGV4dCgpO1xyXG4gICAgICAgaWYgKG5ld3NUZXh0Lmxlbmd0aCA+IG51bSkge1xyXG4gICAgICAgICAgIG5ld3NUZXh0ID0gbmV3c1RleHQuc2xpY2UoMCwgbnVtKSArIFwiLi4uXCI7XHJcbiAgICAgICAgICAgZWwudGV4dChuZXdzVGV4dCk7XHJcbiAgICAgICB9XHJcbiAgIH07XHJcbiAgIFxyXG4gICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1uZXdzLWN1dFwiKSkge1xyXG4gICAgICAgJChcIi5ndC1uZXdzLWN1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBzZWxmLmN1dE5ld3MoJCh0aGlzKSk7XHJcbiAgICAgICB9KVxyXG4gICB9XHJcbiAgIFxyXG4gICBpZiAoJChcInBcIikuaXMoXCIuZ3QtcmVhZC1tb3JlLXNsaWRlci10ZXh0LWlubmVyXCIpKSB7XHJcbiAgICAgICBzZWxmLmN1dFJlYWRNb3JlU2xpZGVyKCk7XHJcbiAgIH1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICBkb2MucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgXHJcbiAgICAgICAgc2VsZi5mb290ZXJIZWlnaHQoKTsvL19mb290ZXJfaGVpZ2h0LmpzXHJcbiAgICAgICAgc2VsZi5kZXNrVG9wTWVudVNjcm9sbCgpOy8vX2Rlc2N0b3BfaGVhZGVyX2Z1bmMuanNcclxuICAgIFxyXG4gICAgXHJcbiAgICB9KTtcclxuICAgIGRvY1dpbmRvdy5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudXBQYWdlQnV0dG9uKCk7Ly9fdXBfYnV0dG9uLmpzXHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGlmICgkKFwiLmd0LWhlYWRlci1tZW51XCIpLmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgc2VsZi5kZXNrVG9wTWVudVNjcm9sbCgpOy8vX2Rlc2N0b3BfaGVhZGVyX2Z1bmMuanNcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICB9KTtcclxuICAgIGRvY1dpbmRvdy5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTtcclxuICAgICAgICBzZWxmLmZvb3RlckhlaWdodCgpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKGd0SGVhZGVyLmhhc0NsYXNzKFwiZ3Qtb3BlblwiKSkgc2VsZi5tb2JpbGVNZW51Q2xvc2UoKTtcclxuICAgIFxyXG4gICAgICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpKSB7XHJcbiAgICAgICAgICAgICQoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiZ3Qtd2lkdGhcIik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiZ3QtaGVpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbWdIb2xkZXJGdW5jKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyLWFic1wiKSkge1xyXG4gICAgICAgICAgICAkKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbWdIb2xkZXJGdW5jKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBib2R5Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldCk7XHJcbiAgICBcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcbnZhciBnb1RvVHJpcCA9IG5ldyBHb1RvVHJpcCgpOyJdfQ==
