GoToTrip=function(){function t(){w||(w=setTimeout(function(){w=null,e.fixArticleScrollTablePosition(),k&&e.showArtidleShadow()}))}var e=this,i=$(document.body),s=$(document),n=$(window),o={top:!1,left:!1},a=$("#gt-is-360"),r=($("#gt-is-480"),$("#gt-is-667")),c=$("#gt-is-768"),l=$("#gt-is-1024"),d=($("#gt-is-1231"),$("header")),g=$("footer"),h=$("#gt-wrapper"),u=$("#gt-up"),f=$("#gt-mobile-menu-switch"),v=$(".gt-enter"),p=$("#gt-header-enter-wrapper"),m=$("#gt-header-enter"),b=$("#gt-header-enter-chose"),C=$("#gt-header-enter-close");if(this.fixBody=function(){o.top||o.left||(o.top=s.scrollTop(),o.left=i.offset().left,i.css({position:"fixed",left:o.left+"px",top:-1*o.top+"px"}))},this.unfixBody=function(){i.css({position:"",left:"",top:""}),s.scrollTop(o.top),o.top=!1,o.left=!1},this.footerHeight=function(){g.outerHeight()>n.height()-50?(g.css("position","static"),h.css("margin-bottom",""),u.css("position","static")):(g.css("position",""),u.css("position",""),h.css("margin-bottom",g.outerHeight()+"px"))},this.deskTopMenuScroll=function(){n.scrollTop()>d.outerHeight()?d.addClass("gt-header-scrolled"):d.removeClass("gt-header-scrolled")},this.pageUp=function(){return $("body,html").animate({scrollTop:0},800),!1},this.upPageButton=function(){$(document).scrollTop()>30?u.addClass("gt-visible"):u.removeClass("gt-visible")},u.on("click",e.pageUp),this.mobileMenuClose=function(){e.unfixBody(),f.removeClass("gt-open"),d.removeClass("gt-open")},this.mobileMenuOpen=function(){e.fixBody(),d.addClass("gt-open"),f.addClass("gt-open")},f.on("click",function(){$(this).hasClass("gt-open")?e.mobileMenuClose():e.mobileMenuOpen()}),this.openEnterForm=function(){p.addClass("gt-open"),setTimeout(function(){$("#gt-header-registered").addClass("gt-open"),m.addClass("gt-open"),C.addClass("gt-open")})},this.closeEnterForm=function(){C.removeClass("gt-open"),m.removeClass("gt-open"),$("#gt-header-registered").removeClass("gt-open"),e.closeRestorePass(),setTimeout(function(){p.removeClass("gt-open")},750)},this.changeEnterRegistration=function(t){m.hasClass($(t.target).attr("class"))||m.removeClass("gt-chosen-enter").removeClass("gt-chosen-registration").addClass($(t.target).attr("class"))},this.openRestorePass=function(){$("#gt-enter-pass-restore-wrapper").addClass("gt-open")},this.closeRestorePass=function(){$("#gt-enter-pass-restore-wrapper").removeClass("gt-open")},v.each(function(){$(this).on("click",e.openEnterForm)}),C.on("click",e.closeEnterForm),b.on("click",function(t){e.changeEnterRegistration(t)}),$("#gt-enter-form-restore-pass").on("click",e.openRestorePass),$("#gt-enter-pass-restore-submit").on("click",e.closeRestorePass),this.setBackground=function(){$(".gt-img-holder").each(function(){if($(this).attr("data-bg")){var t=$(this).attr("data-bg");r.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/phone/'+t+'")'):l.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/tablet/'+t+'")'):$(this).css("background-image",'url("./img/backgrounds/desktop/'+t+'")')}})},this.imgHolderFunc=function(t){$(t).removeClass("gt-width"),$(t).removeClass("gt-height"),$(t).removeClass("gt-visible");var e=t.outerHeight()/t.outerWidth(),i=t.find("img");i.outerHeight()/i.outerWidth()>e?$(t).addClass("gt-width"):$(t).addClass("gt-height"),$(t).addClass("gt-visible")},$("div").is(".gt-img-holder")&&e.setBackground(),this.createSlider=function(t,i){function s(){if(T>C){var e="";H&&(e='<div class="gt-slider-arrow-num"><i class="gt-slider-num-curr"></i><i>из</i><i class="gt-slider-num-max"></i></div>'),t.find(".gt-slider-arrow-holder").html('<span class = "gt-slider-arrow left"></span>'+e+'<span class = "gt-slider-arrow right"></span>'),t.find(".left").on("click",function(){l(!1)}),t.find(".right").on("click",function(){l(!0)}),H&&h(),h()}w=!0}function o(e){var i=e||t;i.find(".left").off(),i.find(".right").off(),i.find(".gt-slider-arrow-holder").html(""),w=!1}function l(e,i){if(i||0===i?y=i:e?y++:y--,R&&(y>T-C&&(y=0),y<0&&(y=T-C),g()),A&&(console.log("start",y),y>T-C&&(x.css("left",-(y-2)*b+"px"),x.append(x.children().first().clone()),x.children().first().remove(),y--),y<0?(x.css("left",-(y+2)*b+"px"),x.prepend(x.children().last().clone()),x.children().last().remove(),y++,d()):d()),H&&h(),M){var s=t.find(".gt-slider-nav span");s.removeClass("gt-active"),$(s[x.find(".gt-open").attr("data-count")]).addClass("gt-active")}}function d(){x.children().removeClass("gt-open"),x.animate({left:-y*b},B),x.children().eq(y).addClass("gt-open")}function g(t){var e=t||y;$(k).removeClass("gt-open"),$(k[e]).addClass("gt-open")}function h(){t.find(".gt-slider-num-curr").text(+x.find(".gt-open").attr("data-count")+1),t.find(".gt-slider-num-max").text(T)}function u(){var e=0,i=0;t.on("touchstart",function(t){var i=t.originalEvent;e=Math.abs(i.touches[0].pageX),console.log("touchstart")}),t.on("touchend",function(t){var s=t.originalEvent;i=Math.abs(s.changedTouches[0].pageX),Math.abs(e-i)>50&&l(e>i?!0:!1)})}function f(e){(e||t).off()}function v(){t.attr("data-count")&&(C=parseInt(t.attr("data-count")),$(c).is(":visible")&&(C=3),$(r).is(":visible")&&(C=2),$(a).is(":visible")&&(C=1))}function p(){b=t.outerWidth()/C,t.find(".gt-slider-container").outerWidth((T+1)*b),k.each(function(){$(this).outerWidth(b),$(this).attr("data-count",$(this).index())})}var m,b,C=1,w=!1,k=t.find(".gt-slider-inner"),x=t.find(".gt-slider-container"),T=k.length,y=i||0,S=t.hasClass("gt-slider-has-arrow"),M=t.hasClass("gt-slider-has-dots"),H=t.hasClass("gt-slider-num"),A=t.hasClass("gt-slider-tram"),B=t.attr("data-duration")||300,R=t.hasClass("gt-slider-fade"),E=t.hasClass("gt-slider-has-clone");R&&g(i),A&&(v(),p(),d()),S&&(t.append('<div class="gt-slider-arrow-holder"></div>'),s()),M&&function(){t.append('<div class="gt-slider-nav"></div>');for(var e=t.find(".gt-slider-nav"),i="",s=0;s<T;s++)i+="<span data-num = "+s+"></span>";e.html(i),e.find("span").first().addClass("gt-active"),t.find(".gt-slider-nav span").on("click",function(){l(!0,+$(this).attr("data-num"))})}(),T>C&&u(),E&&t.find(".gt-slider-inner-cover").each(function(){$(this).on("click",function(){!function(i){if(!$("div").is("#gt-clone")){e.fixBody();var s=$("#gt-body-wrapper");s.append('<div id = "gt-clone-wrapper"   class="container"><div id = "gt-clone" class="gt-slider gt-slider-clone gt-slider-fade gt-slider-num  gt-slider-has-arrow"><div id = "gt-clone-close" class = "gt-slider-clone-close"></div><div  id = "gt-clone-container" class="gt-slider-container"></div></div></div>'),s.show();var n=$("#gt-clone");t.find(".gt-slider-inner").clone(!0).each(function(){$(this).outerWidth(""),$("#gt-clone-container").append($(this))}),e.createSlider(n,i),$("#gt-clone-close").on("click",function(){!function(t){o(t),f(t),$("#gt-clone-close").off(),$("#gt-clone-wrapper").remove(),$("#gt-body-wrapper").hide(),e.unfixBody()}(n)})}}($(this).parent().index())})}),n.resize(function(){m||(m=setTimeout(function(){m=null,f(),A&&(v(),p(),y>T-C&&(y=T-C),T<=C&&(y=0),d()),w&&(o(),s()),T>C&&u()},132))})},$("div").is(".gt-slider")&&$(".gt-slider").each(function(){e.createSlider($(this))}),this.manageGtActiveUlMenu=function(t){"li"!=t.tagName&&(t=$(t).closest("li")),$(t).closest($("ul")).find("li").removeClass("gt-active"),$(t).addClass("gt-active")},$("*").is(".gt-button-menu")&&$(".gt-button-menu").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-menu-news")&&$(".gt-menu-news").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),this.tabSlider=function(){$(".gt-tabs").each(function(){var t=$(this);t.find(".gt-tabs-button").each(function(){$(this).on("click",function(){e.tabSliderAction(t,$(this).index())})}),e.tabSliderActivation(t)})},this.tabSliderActivation=function(t){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-button")[0]).addClass("active"),$(t.find(".gt-tabs-main")[0]).addClass("active")},this.tabSliderAction=function(t,e){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-button")[e]).addClass("active"),$(t.find(".gt-tabs-main")[e]).addClass("active")},$("div").is(".gt-tabs")&&e.tabSlider(),this.setPlayers=function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/player_api";var i=$("script")[$("script").length-1];i.parentNode.insertBefore(t,i);$(".gt-video").each(function(){var t=$(this);t.find(".gt-video-switch").on("click",function(){$(this).addClass("gt-open"),t.addClass("gt-open"),e.addYouTube(t)})})},this.addYouTube=function(t){function e(){s.mute(),s.playVideo(),t.addClass("gt-video-on"),t.find(".gt-video-uncover").on("click",i),t.find(".gt-video-pause").on("click",function(){s.pauseVideo()}),t.find(".gt-video-play").on("click",function(){s.playVideo()})}function i(){console.log("playFullScreen");var e=t.find("iframe")[0],i=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;i&&i.bind(e)()}var s,n="gt-video-"+t.index();t.find(".gt-video-switch").hide("slow"),t.find(".gt-video-inner").attr("id",n).addClass("gt-video-foreground"),s=new YT.Player(n,{width:600,height:400,videoId:t.attr("data-youtube"),playerVars:{playlist:t.attr("data-youtube"),color:"white",loop:1,autoplay:1},events:{onReady:e}})},$("div").is(".gt-video")&&e.setPlayers(),this.fixArticleScrollTablePosition=function(){var t=$(".gt-article-table-wrapper"),e=t.parent(),i=e.position().top,o=i+e.outerHeight(),a=t.outerWidth(),r=s.scrollTop(),c=n.outerHeight();console.log(i),console.log(r),i+90>r&&t.hasClass("gt-fixed")&&(t.removeClass("gt-fixed"),t.css({left:"",width:""})),i<r+90&&(t.hasClass("gt-fixed")||(t.css({left:t.offset().left+"px",width:a}),t.addClass("gt-fixed")),r+c>o?t.addClass("gt-fixed-bottom"):t.removeClass("gt-fixed-bottom")),t.hasClass("gt-fixed")?t.css({height:c-120+"px"}):t.css({height:""})},this.createArticteScrollTable=function(){if($("div").is(".gt-article")){var t="";$(".gt-article").each(function(){t+='<div class = "gt-article-scroll"><div class = "gt-article-scroll-shadow"></div><p>'+$(this).find("h2").text()+"</p></div>"}),$("#gt-article-scroll-table").html(t)}},this.showArtidleShadow=function(){$(".gt-article").each(function(){var t=$(this).position().top,e=$(this).outerHeight(),i=$(document).scrollTop(),s=0;(s=t>i?0:(i-t)/e)>1&&(s=1);var n=$(".gt-article-scroll")[$(this).index()];$(n).find(".gt-article-scroll-shadow").css("width",100*s+"%")})},$("div").is(".gt-article-table-wrapper")){var w,k=!1;$("div").is(".gt-article-scroll-table")&&(k=!0,e.createArticteScrollTable(),e.showArtidleShadow()),n.scroll(t),n.resize(t)}this.setCurrTime=function(){e.currTime();setInterval(e.currTime,3e4)},this.currTime=function(){$(".gt-curr-time").each(function(){var t=new Date;$(this).attr("data-gmt")&&t.setUTCHours(+$(this).attr("data-gmt"));var e=t.getHours(),i=t.getMinutes(),s=t.getDay(),n=t.getDate(),o=t.getMonth(),a=t.getFullYear();e<10&&(e="0"+e),i<10&&(i="0"+i),s=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],o=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][o],$(".gt-curr-time-time")&&$(".gt-curr-time-time").html(e+":"+i),$(".gt-curr-time-date")&&$(".gt-curr-time-date").html(s+", "+n+" "+o+" "+a)})},$("div").is(".gt-curr-time")&&e.setCurrTime(),this.innerScroll=function(t){t.find(".overview").height()>t.height()&&(t.addClass("isScrolled"),t.tinyscrollbar({thumbSize:40,wheelSpeed:10}))},$("div").is(".gt-inner-scroll")&&$(".gt-inner-scroll").each(function(){e.innerScroll($(this))}),this.createIconsItemsClick=function(){$(".gt-view-cards-icons-item").each(function(){$(this).hasClass("gt-view-cards-icons-visit")?e.createVisitLink($(this)):$(this).hasClass("gt-view-cards-icons-bookmarks")?e.createBookmarksLink($(this)):$(this).hasClass("gt-view-cards-icons-pin")||$(this).hasClass("gt-view-cards-icons-share")?e.toggleGtActive($(this)):$(this).hasClass("gt-view-cards-icons-share")&&e.createShareLink($(this))})},this.createShareLink=function(t){t.removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.toggleGtActive=function(t){(t=$(t)).removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.createVisitLink=function(t){t.closest(".gt-view-cards-inner").attr("data-href")&&t.on("click",function(){e.addVisitedLink(t)})},this.addVisitedLink=function(t){alert("послали данные на бек",t.closest(".gt-view-cards-inner").attr("data-href")),t.toggleClass("gt-active")},this.addBookmark=function(t,e,i){try{window.external.AddFavorite(e,i)}catch(s){try{window.sidebar.addPanel(i,e,"")}catch(s){if("object"==typeof opera)return t.title=i,t.url=e,!0;alert("Нажмите Ctrl-D чтобы добавить страницу в закладки")}}return!1},this.createBookmarksLink=function(t){var i=(t=$(t)).closest(".gt-view-cards-inner");(i=$(i)).attr("data-href")||i.attr("data-href",window.location.href),i.attr("data-bookmark")||i.attr("data-bookmark","GoToTrip"),t.attr("href",i.attr("data-href")),t.attr("rel","sidebar"),t.on("click",function(s){s.preventDefault(),e.addBookmark(t,i.attr("data-href"),i.attr("data-bookmark"))})},$("*").is(".gt-view-cards-icons-bookmarks")&&e.createBookmarksLink(),$("*").is(".gt-view-cards-icons-item")&&e.createIconsItemsClick(),$("#gt-enter-form-facebook").on("click",function(){e.socialEnter("facebook")}),$("#gt-enter-form-twitter").on("click",function(){e.socialEnter("twitter")}),$("#gt-enter-form-google").on("click",function(){e.socialEnter("google")}),$("#gt-reg-form-facebook").on("click",function(){e.socialRegistration("facebook")}),$("#gt-reg-form-twitter").on("click",function(){e.socialRegistration("twitter")}),$("#gt-reg-form-google").on("click",function(){e.socialRegistration("google")}),this.socialRegistration=function(t){alert("Регистрация через "+t)},this.socialEnter=function(t){alert("Вход через "+t)},this.cutNews=function(t){var e,i,s,n=t.parent(),o=n.height(),a=t.find("p");n.children().each(function(){o-=$(this).outerHeight(!0)}),o=o+t.height()-20,a.each(function(){(e=$(this).outerHeight(!0))<o?o-=e:o?(i=Math.floor($(this).text().length*o/e),s=$(this).text().substring(0,i-5),$(this).text(s+"..."),o=0):$(this).css("display","none")})},$("div").is(".js-news-cut")&&($(".js-news-cut").each(function(){e.cutNews($(this))}),n.resize(function(){$(".js-news-cut").each(function(){e.cutNews($(this))})})),this.cutReadMoreSlider=function(){$(".gt-read-more-slider-text-inner").each(function(){e.cutting($(this),160)})},this.cutting=function(t,e){var i=t.text();i.length>e&&(i=i.slice(0,e)+"...",t.text(i))},$("p").is(".gt-read-more-slider-text-inner")&&e.cutReadMoreSlider(),s.ready(function(){e.footerHeight(),e.deskTopMenuScroll()}),n.scroll(function(){e.upPageButton(),$(".gt-header-menu").is(":visible")&&e.deskTopMenuScroll()}),n.resize(function(){e.deskTopMenuScroll(),e.footerHeight(),d.hasClass("gt-open")&&e.mobileMenuClose(),$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){$(this).removeClass("gt-width"),$(this).removeClass("gt-height"),e.imgHolderFunc($(this))})}),$(window).on("load",function(){$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){e.imgHolderFunc($(this))})}),i.on("click",function(t){})};var goToTrip=new GoToTrip;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJHb1RvVHJpcCIsInNjcm9sbFRocm90dGxlciIsInNjcm9sbFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VsZiIsImZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uIiwic2hhZG93Iiwic2hvd0FydGlkbGVTaGFkb3ciLCJ0aGlzIiwiYm9keSIsIiQiLCJkb2N1bWVudCIsImRvYyIsImRvY1dpbmRvdyIsIndpbmRvdyIsImJvZHlQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0b2tlbjM2MCIsInRva2VuNjY3IiwidG9rZW43NjgiLCJ0b2tlbjEwMjQiLCJndEhlYWRlciIsImd0Rm9vdGVyIiwiZ3RXcmFwcGVyIiwidXBCdXR0b24iLCJtb2JpbGVNZW51U3dpdGNoIiwiZW50ZXJCdXR0b24iLCJlbnRlcldyYXBwZXIiLCJlbnRlckZvcm0iLCJlbnRlckNob3NlIiwiZW50ZXJDbG9zZSIsImZpeEJvZHkiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJjc3MiLCJwb3NpdGlvbiIsInVuZml4Qm9keSIsImZvb3RlckhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwiZGVza1RvcE1lbnVTY3JvbGwiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFnZVVwIiwiYW5pbWF0ZSIsInVwUGFnZUJ1dHRvbiIsIm9uIiwibW9iaWxlTWVudUNsb3NlIiwibW9iaWxlTWVudU9wZW4iLCJoYXNDbGFzcyIsIm9wZW5FbnRlckZvcm0iLCJjbG9zZUVudGVyRm9ybSIsImNsb3NlUmVzdG9yZVBhc3MiLCJjaGFuZ2VFbnRlclJlZ2lzdHJhdGlvbiIsImV2ZW50IiwidGFyZ2V0IiwiYXR0ciIsIm9wZW5SZXN0b3JlUGFzcyIsImVhY2giLCJzZXRCYWNrZ3JvdW5kIiwicGF0aCIsImlzIiwiaW1nSG9sZGVyRnVuYyIsImVsIiwiaG9sZGVyQ29uc3QiLCJvdXRlcldpZHRoIiwiaW1nIiwiZmluZCIsImNyZWF0ZVNsaWRlciIsImN1cnJTbGlkZXIiLCJjcmVhdGVBcnJvd3MiLCJpbm5lckNvdW50Iiwic2NyZWVuQ29uc3QiLCJudW1Jbm5lciIsIm51bVBhbmVsIiwiaHRtbCIsIm9uZU1vdmVGdW5jdGlvbiIsInNob3dOdW0iLCJhcnJvd3NSZWFkeSIsImRlc3Ryb3lBcnJvd3MiLCJjbG9uZSIsIm9mZiIsImJ1bCIsIm51bSIsImN1cnJQb3NpdGlvbiIsImZhZGUiLCJmYWRlU2xpZGVyTW92ZSIsInRyYW0iLCJjb25zb2xlIiwibG9nIiwiY29udGFpbmVyIiwiYmFzZVdpZHRoIiwiYXBwZW5kIiwiY2hpbGRyZW4iLCJmaXJzdCIsInJlbW92ZSIsInByZXBlbmQiLCJsYXN0IiwidHJhbVNsaWRlck1vdmUiLCJkb3RzIiwiYWxsRG90cyIsInRyYW1BbmltYXRpb24iLCJlcSIsImluZGV4IiwiaW5uZXIiLCJ0ZXh0IiwiY3JlYXRlVG91Y2giLCJpbml0aWFsUG9pbnQiLCJmaW5hbFBvaW50IiwiZSIsIm9yaWdpbmFsRXZlbnQiLCJNYXRoIiwiYWJzIiwidG91Y2hlcyIsInBhZ2VYIiwiY2hhbmdlZFRvdWNoZXMiLCJkZXN0cm95VG91Y2giLCJmaW5kU2NyZWVuQ29uc3QiLCJwYXJzZUludCIsInNldEJhc2VXaWR0aCIsInNsaWRlclRpbWVPdXQiLCJsZW5ndGgiLCJhcnJvdyIsImhhc0Nsb25lIiwibmF2Iiwic3BhbnMiLCJpIiwiY3JlYXRlRG90cyIsImNsaWNrUG9zaXRpb24iLCJib2R5V3JhcHBlciIsInNob3ciLCJjbG9uZVNsaWRlciIsImhpZGUiLCJkZXN0cm95Q2xvbmVTbGlkZXIiLCJjcmVhdGVDbG9uZVNsaWRlciIsInBhcmVudCIsInJlc2l6ZSIsIm1hbmFnZUd0QWN0aXZlVWxNZW51IiwidGFnTmFtZSIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsInRhYlNsaWRlciIsImN1cnJUYWJzIiwidGFiU2xpZGVyQWN0aW9uIiwidGFiU2xpZGVyQWN0aXZhdGlvbiIsInNldFBsYXllcnMiLCJ0YWciLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsInNyYyIsImxhc3RTY3JpcHRUYWciLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiY3VycmVudFBsYXllciIsImFkZFlvdVR1YmUiLCJpbml0aWFsaXplIiwicGxheWVyIiwibXV0ZSIsInBsYXlWaWRlbyIsInBsYXlGdWxsU2NyZWVuIiwicGF1c2VWaWRlbyIsImlmcmFtZSIsInJlcXVlc3RGdWxsU2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJ3ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiIsImJpbmQiLCJlbElkIiwiWVQiLCJQbGF5ZXIiLCJ3aWR0aCIsInZpZGVvSWQiLCJwbGF5ZXJWYXJzIiwicGxheWxpc3QiLCJjb2xvciIsImxvb3AiLCJhdXRvcGxheSIsImV2ZW50cyIsIm9uUmVhZHkiLCJ0YWJsZSIsInRhYmxlUGFyZW50IiwidGFibGVQYXJlbnRUb3AiLCJ0YWJsZVBhcmVudEJvdHRvbSIsInRhYmxlV2lkdGgiLCJ3aW5kb3dUb3AiLCJ3aWRvd0hlaWdodCIsImNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSIsImVsSGVpZ2h0Iiwid2luZG93UG9zaXRpb24iLCJ4IiwiY3VyclNoYWRvdyIsInNjcm9sbCIsInNldEN1cnJUaW1lIiwiY3VyclRpbWUiLCJzZXRJbnRlcnZhbCIsImRhdGUiLCJEYXRlIiwic2V0VVRDSG91cnMiLCJob3VycyIsImdldEhvdXJzIiwibWludXRlcyIsImdldE1pbnV0ZXMiLCJ3ZWVrZGF5IiwiZ2V0RGF5IiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJpbm5lclNjcm9sbCIsInRpbnlzY3JvbGxiYXIiLCJ0aHVtYlNpemUiLCJ3aGVlbFNwZWVkIiwiY3JlYXRlSWNvbnNJdGVtc0NsaWNrIiwiY3JlYXRlVmlzaXRMaW5rIiwiY3JlYXRlQm9va21hcmtzTGluayIsInRvZ2dsZUd0QWN0aXZlIiwiY3JlYXRlU2hhcmVMaW5rIiwidG9nZ2xlQ2xhc3MiLCJhZGRWaXNpdGVkTGluayIsImFsZXJ0IiwiYWRkQm9va21hcmsiLCJhIiwidXJsIiwidGl0bGUiLCJleHRlcm5hbCIsIkFkZEZhdm9yaXRlIiwic2lkZWJhciIsImFkZFBhbmVsIiwib3BlcmEiLCJsb2NhdGlvbiIsImhyZWYiLCJzb2NpYWxFbnRlciIsInNvY2lhbFJlZ2lzdHJhdGlvbiIsInRva2VuIiwiY3V0TmV3cyIsImN1cnJIZWlnaHQiLCJjdXR0aW5nTGVuZ2h0IiwibmV3VGV4dCIsIm1heEhlaWdodCIsImN1dHRpbmdFbCIsImZsb29yIiwic3Vic3RyaW5nIiwiY3V0UmVhZE1vcmVTbGlkZXIiLCJjdXR0aW5nIiwibmV3c1RleHQiLCJzbGljZSIsInJlYWR5IiwiZ29Ub1RyaXAiXSwibWFwcGluZ3MiOiJBQUtBQSxTQUFXLFdBc3ZCSCxTQUFTQyxJQUNBQyxJQUNEQSxFQUFnQkMsV0FBVyxXQUN2QkQsRUFBZ0IsS0FDaEJFLEVBQUtDLGdDQUNEQyxHQUNBRixFQUFLRyx1QkExdkJ6QixJQUFJSCxFQUFPSSxLQUNQQyxFQUFPQyxFQUFFQyxTQUFTRixNQUNsQkcsRUFBTUYsRUFBRUMsVUFDUkUsRUFBWUgsRUFBRUksUUFDZEMsR0FDSUMsS0FBSyxFQUNMQyxNQUFNLEdBRVZDLEVBQVdSLEVBQUUsY0FFYlMsR0FEV1QsRUFBRSxjQUNGQSxFQUFFLGVBQ2JVLEVBQVdWLEVBQUUsY0FDYlcsRUFBWVgsRUFBRSxlQUVkWSxHQURZWixFQUFFLGVBQ0hBLEVBQUUsV0FDYmEsRUFBV2IsRUFBRSxVQUNiYyxFQUFZZCxFQUFFLGVBQ2RlLEVBQVdmLEVBQUUsVUFDYmdCLEVBQW1CaEIsRUFBRSwwQkFDckJpQixFQUFjakIsRUFBRSxhQUNoQmtCLEVBQWVsQixFQUFFLDRCQUNqQm1CLEVBQVluQixFQUFFLG9CQUNkb0IsRUFBYXBCLEVBQUUsMEJBQ2ZxQixFQUFhckIsRUFBRSwwQkFrdEJuQixHQWp0QkFGLEtBQUt3QixRQUFVLFdBQ1BqQixFQUFhQyxLQUFPRCxFQUFhRSxPQUNyQ0YsRUFBYUMsSUFBTUosRUFBSXFCLFlBQ3ZCbEIsRUFBYUUsS0FB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QUFNLEVBQUduSyxHQUFPLE1BQ3BDcEIsRUFBRzBDLEtBQUs0SSxLQU1aNU8sRUFBRSxLQUFLb0QsR0FBRyxvQ0FDVjFELEVBQUtnUCxvQkFLUnhPLEVBQUk0TyxNQUFNLFdBRU5wUCxFQUFLa0MsZUFDTGxDLEVBQUtxQyxzQkFJVDVCLEVBQVVrTCxPQUFPLFdBQ2IzTCxFQUFLMEMsZUFHRHBDLEVBQUUsbUJBQW1Cb0QsR0FBRyxhQUN4QjFELEVBQUtxQyxzQkFNYjVCLEVBQVU0SCxPQUFPLFdBQ2JySSxFQUFLcUMsb0JBQ0xyQyxFQUFLa0MsZUFFRGhCLEVBQVM0QixTQUFTLFlBQVk5QyxFQUFLNEMsa0JBRW5DdEMsRUFBRSxPQUFPb0QsR0FBRyx1QkFDWnBELEVBQUUsc0JBQXNCaUQsS0FBSyxXQUN6QmpELEVBQUVGLE1BQU1tQyxZQUFZLFlBQ3BCakMsRUFBRUYsTUFBTW1DLFlBQVksYUFDcEJ2QyxFQUFLMkQsY0FBY3JELEVBQUVGLFdBSWpDRSxFQUFFSSxRQUFRaUMsR0FBRyxPQUFRLFdBQ2JyQyxFQUFFLE9BQU9vRCxHQUFHLHVCQUNacEQsRUFBRSxzQkFBc0JpRCxLQUFLLFdBQ3pCdkQsRUFBSzJELGNBQWNyRCxFQUFFRixXQUtqQ0MsRUFBS3NDLEdBQUcsUUFBUyxTQUFVUSxPQU8vQixJQUFJa00sU0FBVyxJQUFJelAiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy/RhNGD0L3QutGG0LjRjywg0L7Qv9GA0LXQtNC10LvRj9GO0YnQsNGPINC30LDRgNC10LPQuNGB0YLQstC40YDQvtCy0LDQvdC90YvQuSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LjQu9C4INC90LXRglxyXG5cclxuLy8g0L/RgNC10LTRg9GB0LzQvtGC0YDQtdGC0Ywg0LLRi9GF0L7QtCDQuNC3INCw0LrQutCw0YPQvdGC0LBcclxuXHJcblxyXG5Hb1RvVHJpcCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgYm9keSA9ICQoZG9jdW1lbnQuYm9keSksXHJcbiAgICAgICAgZG9jID0gJChkb2N1bWVudCksXHJcbiAgICAgICAgZG9jV2luZG93ID0gJCh3aW5kb3cpLFxyXG4gICAgICAgIGJvZHlQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgbGVmdDogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRva2VuMzYwID0gJChcIiNndC1pcy0zNjBcIiksXHJcbiAgICAgICAgdG9rZW40ODAgPSAkKFwiI2d0LWlzLTQ4MFwiKSxcclxuICAgICAgICB0b2tlbjY2NyA9ICQoXCIjZ3QtaXMtNjY3XCIpLFxyXG4gICAgICAgIHRva2VuNzY4ID0gJChcIiNndC1pcy03NjhcIiksXHJcbiAgICAgICAgdG9rZW4xMDI0ID0gJChcIiNndC1pcy0xMDI0XCIpLFxyXG4gICAgICAgIHRva2VuMTIzMSA9ICQoXCIjZ3QtaXMtMTIzMVwiKSxcclxuICAgICAgICBndEhlYWRlciA9ICQoXCJoZWFkZXJcIiksXHJcbiAgICAgICAgZ3RGb290ZXIgPSAkKFwiZm9vdGVyXCIpLFxyXG4gICAgICAgIGd0V3JhcHBlciA9ICQoXCIjZ3Qtd3JhcHBlclwiKSxcclxuICAgICAgICB1cEJ1dHRvbiA9ICQoXCIjZ3QtdXBcIiksXHJcbiAgICAgICAgbW9iaWxlTWVudVN3aXRjaCA9ICQoXCIjZ3QtbW9iaWxlLW1lbnUtc3dpdGNoXCIpLFxyXG4gICAgICAgIGVudGVyQnV0dG9uID0gJCgnLmd0LWVudGVyJyksXHJcbiAgICAgICAgZW50ZXJXcmFwcGVyID0gJCgnI2d0LWhlYWRlci1lbnRlci13cmFwcGVyJyksXHJcbiAgICAgICAgZW50ZXJGb3JtID0gJCgnI2d0LWhlYWRlci1lbnRlcicpLFxyXG4gICAgICAgIGVudGVyQ2hvc2UgPSAkKCcjZ3QtaGVhZGVyLWVudGVyLWNob3NlJyksXHJcbiAgICAgICAgZW50ZXJDbG9zZSA9ICQoJyNndC1oZWFkZXItZW50ZXItY2xvc2UnKTtcclxuICAgIHRoaXMuZml4Qm9keSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYm9keVBvc2l0aW9uLnRvcCB8fCBib2R5UG9zaXRpb24ubGVmdCkgcmV0dXJuO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi50b3AgPSBkb2Muc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLmxlZnQgPSBib2R5Lm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgYm9keS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBib2R5UG9zaXRpb24ubGVmdCArIFwicHhcIixcclxuICAgICAgICAgICAgdG9wOiAtMSAqIGJvZHlQb3NpdGlvbi50b3AgKyBcInB4XCJcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudW5maXhCb2R5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGJvZHkuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiXCIsXHJcbiAgICAgICAgICAgIGxlZnQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHRvcDogXCJcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvYy5zY3JvbGxUb3AoYm9keVBvc2l0aW9uLnRvcCk7XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLnRvcCA9IGZhbHNlO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi5sZWZ0ID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZm9vdGVySGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmb290ZXJIZWlnaHQgPSBndEZvb3Rlci5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgIGlmIChmb290ZXJIZWlnaHQgPiBkb2NXaW5kb3cuaGVpZ2h0KCkgLSA1MCkge1xyXG4gICAgICAgICAgICBndEZvb3Rlci5jc3MoXCJwb3NpdGlvblwiLCBcInN0YXRpY1wiKTtcclxuICAgICAgICAgICAgZ3RXcmFwcGVyLmNzcyhcIm1hcmdpbi1ib3R0b21cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLmNzcyhcInBvc2l0aW9uXCIsIFwic3RhdGljXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGd0Rm9vdGVyLmNzcyhcInBvc2l0aW9uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5jc3MoXCJwb3NpdGlvblwiLCBcIlwiKTtcclxuICAgICAgICAgICAgZ3RXcmFwcGVyLmNzcyhcIm1hcmdpbi1ib3R0b21cIiwgZ3RGb290ZXIub3V0ZXJIZWlnaHQoKSArIFwicHhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZGVza1RvcE1lbnVTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRvY1dpbmRvdy5zY3JvbGxUb3AoKSA+IGd0SGVhZGVyLm91dGVySGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgZ3RIZWFkZXIuYWRkQ2xhc3MoXCJndC1oZWFkZXItc2Nyb2xsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3RIZWFkZXIucmVtb3ZlQ2xhc3MoXCJndC1oZWFkZXItc2Nyb2xsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnBhZ2VVcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiYm9keSxodG1sXCIpLmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sODAwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnVwUGFnZUJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPiAzMCkge1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5hZGRDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXBCdXR0b24ucmVtb3ZlQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICB1cEJ1dHRvbi5vbihcImNsaWNrXCIsIHNlbGYucGFnZVVwKTtcclxuICAgIHRoaXMubW9iaWxlTWVudUNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudW5maXhCb2R5KCk7XHJcbiAgICAgICAgbW9iaWxlTWVudVN3aXRjaC5yZW1vdmVDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgZ3RIZWFkZXIucmVtb3ZlQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5tb2JpbGVNZW51T3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmZpeEJvZHkoKTtcclxuICAgICAgICBndEhlYWRlci5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgbW9iaWxlTWVudVN3aXRjaC5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgbW9iaWxlTWVudVN3aXRjaC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LW9wZW5cIikpIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVNZW51Q2xvc2UoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLm1vYmlsZU1lbnVPcGVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLm9wZW5FbnRlckZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZW50ZXJXcmFwcGVyLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgc2V0VGltZW91dChzaG93KTtcclxuICAgICAgICBmdW5jdGlvbiBzaG93KCkge1xyXG4gICAgICAgICAgICAkKCcjZ3QtaGVhZGVyLXJlZ2lzdGVyZWQnKS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgICAgICBlbnRlckZvcm0uYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgZW50ZXJDbG9zZS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuY2xvc2VFbnRlckZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZW50ZXJDbG9zZS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIGVudGVyRm9ybS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgICQoJyNndC1oZWFkZXItcmVnaXN0ZXJlZCcpLnJlbW92ZUNsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgc2VsZi5jbG9zZVJlc3RvcmVQYXNzKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChoaWRlLCA3NTApO1xyXG4gICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7XHJcbiAgICAgICAgICAgIGVudGVyV3JhcHBlci5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuY2hhbmdlRW50ZXJSZWdpc3RyYXRpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZW50ZXJGb3JtLmhhc0NsYXNzKCQoZXZlbnQudGFyZ2V0KS5hdHRyKFwiY2xhc3NcIikpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZW50ZXJGb3JtLnJlbW92ZUNsYXNzKFwiZ3QtY2hvc2VuLWVudGVyXCIpLnJlbW92ZUNsYXNzKFwiZ3QtY2hvc2VuLXJlZ2lzdHJhdGlvblwiKS5hZGRDbGFzcygkKGV2ZW50LnRhcmdldCkuYXR0cihcImNsYXNzXCIpKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5vcGVuUmVzdG9yZVBhc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2d0LWVudGVyLXBhc3MtcmVzdG9yZS13cmFwcGVyJykuYWRkQ2xhc3MoJ2d0LW9wZW4nKVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgdGhpcy5jbG9zZVJlc3RvcmVQYXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJyNndC1lbnRlci1wYXNzLXJlc3RvcmUtd3JhcHBlcicpLnJlbW92ZUNsYXNzKCdndC1vcGVuJylcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgZW50ZXJCdXR0b24uZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5vbignY2xpY2snLCBzZWxmLm9wZW5FbnRlckZvcm0pXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgZW50ZXJDbG9zZS5vbignY2xpY2snLCBzZWxmLmNsb3NlRW50ZXJGb3JtKTtcclxuICAgIFxyXG4gICAgZW50ZXJDaG9zZS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBzZWxmLmNoYW5nZUVudGVyUmVnaXN0cmF0aW9uKGV2ZW50KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1yZXN0b3JlLXBhc3MnKS5vbignY2xpY2snLHNlbGYub3BlblJlc3RvcmVQYXNzKTtcclxuICAgICQoJyNndC1lbnRlci1wYXNzLXJlc3RvcmUtc3VibWl0Jykub24oJ2NsaWNrJyxzZWxmLmNsb3NlUmVzdG9yZVBhc3MpO1xyXG5cclxuICAgIHRoaXMuc2V0QmFja2dyb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW1nSG9sZGVycyA9ICQoXCIuZ3QtaW1nLWhvbGRlclwiKTtcclxuICAgICAgICBpbWdIb2xkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykuYXR0cihcImRhdGEtYmdcIikpIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWJnXCIpO1xyXG4gICAgICAgICAgICBpZiAodG9rZW42NjcuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybChcIi4vaW1nL2JhY2tncm91bmRzL3Bob25lLycgKyBwYXRoICsgJ1wiKSdcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRva2VuMTAyNC5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyhcclxuICAgICAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICAndXJsKFwiLi9pbWcvYmFja2dyb3VuZHMvdGFibGV0LycgKyBwYXRoICsgJ1wiKSdcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoXHJcbiAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIixcclxuICAgICAgICAgICAgICAgICd1cmwoXCIuL2ltZy9iYWNrZ3JvdW5kcy9kZXNrdG9wLycgKyBwYXRoICsgJ1wiKSdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5pbWdIb2xkZXJGdW5jID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgJChlbCkucmVtb3ZlQ2xhc3MoXCJndC13aWR0aFwiKTtcclxuICAgICAgICAkKGVsKS5yZW1vdmVDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICAkKGVsKS5yZW1vdmVDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICAgICAgdmFyIGhvbGRlckNvbnN0ID0gZWwub3V0ZXJIZWlnaHQoKSAvIGVsLm91dGVyV2lkdGgoKSxcclxuICAgICAgICAgICAgaW1nID0gZWwuZmluZCgnaW1nJyksXHJcbiAgICAgICAgICAgIGltZ0NvbnN0ID0gaW1nLm91dGVySGVpZ2h0KCkgLyBpbWcub3V0ZXJXaWR0aCgpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKGltZ0NvbnN0ID4gaG9sZGVyQ29uc3QpIHtcclxuICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC13aWR0aFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3QtaGVpZ2h0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWltZy1ob2xkZXJcIikpIHtcclxuICAgICAgICBzZWxmLnNldEJhY2tncm91bmQoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNyZWF0ZVNsaWRlciA9IGZ1bmN0aW9uIChjdXJyU2xpZGVyLCBwb3NpdGlvbikge1xyXG4gICAgICAgIHZhciBzbGlkZXJUaW1lT3V0LFxyXG4gICAgICAgICAgICBzY3JlZW5Db25zdCA9IDEsXHJcbiAgICAgICAgICAgIGJhc2VXaWR0aCxcclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSBmYWxzZSxcclxuICAgICAgICAgICAgaW5uZXIgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWlubmVyXCIpLFxyXG4gICAgICAgICAgICBjb250YWluZXIgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWNvbnRhaW5lclwiKSxcclxuICAgICAgICAgICAgaW5uZXJDb3VudCA9IGlubmVyLmxlbmd0aCxcclxuICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gcG9zaXRpb24gfHwgMCxcclxuICAgICAgICAgICAgYXJyb3cgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWhhcy1hcnJvd1wiKSxcclxuICAgICAgICAgICAgZG90cyA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItaGFzLWRvdHNcIiksXHJcbiAgICAgICAgICAgIG51bVBhbmVsID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1udW1cIiksXHJcbiAgICAgICAgICAgIHRyYW0gPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLXRyYW1cIiksXHJcbiAgICAgICAgICAgIHRyYW1BbmltYXRpb24gPSBjdXJyU2xpZGVyLmF0dHIoJ2RhdGEtZHVyYXRpb24nKSB8fCAzMDAsXHJcbiAgICAgICAgICAgIGZhZGUgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWZhZGVcIiksXHJcbiAgICAgICAgICAgIGhhc0Nsb25lID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1oYXMtY2xvbmVcIik7XHJcbiAgICAgICAgaWYgKGZhZGUpIHtcclxuICAgICAgICAgICAgZmFkZVNsaWRlck1vdmUocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHJhbSkge1xyXG4gICAgICAgICAgICBmaW5kU2NyZWVuQ29uc3QoKTtcclxuICAgICAgICAgICAgc2V0QmFzZVdpZHRoKCk7XHJcbiAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcnJvdykge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgY3JlYXRlQXJyb3dzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb3RzKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZURvdHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICBjcmVhdGVUb3VjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGFzQ2xvbmUpIHtcclxuICAgICAgICAgICAgY3JlYXRlQ2xvbmVMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDbG9uZUxpc3RlbmVycygpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLWlubmVyLWNvdmVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVDbG9uZVNsaWRlcigkKHRoaXMpLnBhcmVudCgpLmluZGV4KCkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFycm93cygpIHtcclxuICAgICAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG51bUlubmVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtUGFuZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBudW1Jbm5lciA9ICc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLWFycm93LW51bVwiPjxpIGNsYXNzPVwiZ3Qtc2xpZGVyLW51bS1jdXJyXCI+PC9pPjxpPtC40Lc8L2k+PGkgY2xhc3M9XCJndC1zbGlkZXItbnVtLW1heFwiPjwvaT48L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWFycm93LWhvbGRlclwiKS5odG1sKFxyXG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcyA9IFwiZ3Qtc2xpZGVyLWFycm93IGxlZnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cIiArIG51bUlubmVyICtcclxuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3MgPSBcImd0LXNsaWRlci1hcnJvdyByaWdodFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPC9zcGFuPlwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQXJyb3dzTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICBzaG93TnVtKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lBcnJvd3MoY2xvbmUpIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gY2xvbmUgfHwgY3VyclNsaWRlcjtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5sZWZ0XCIpLm9mZigpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLnJpZ2h0XCIpLm9mZigpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIikuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcnJvd3NMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5sZWZ0XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5yaWdodFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChudW1QYW5lbCkgc2hvd051bSgpXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRG90cygpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJndC1zbGlkZXItbmF2XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIHZhciBuYXYgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLW5hdlwiKSxcclxuICAgICAgICAgICAgICAgIHNwYW5zID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbm5lckNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHNwYW5zICs9IFwiPHNwYW4gZGF0YS1udW0gPSBcIiArIGkgKyBcIj48L3NwYW4+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmF2Lmh0bWwoc3BhbnMpO1xyXG4gICAgICAgICAgICBuYXYuZmluZChcInNwYW5cIikuZmlyc3QoKS5hZGRDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXYgc3BhblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlLCArJCh0aGlzKS5hdHRyKFwiZGF0YS1udW1cIikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBvbmVNb3ZlRnVuY3Rpb24oYnVsLCBudW0pIHtcclxuICAgICAgICAgICAgaWYgKG51bSB8fCBudW0gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IG51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGJ1bCkge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24tLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGZhZGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmFkZVNsaWRlck1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0cmFtKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhcnQnLCBjdXJyUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3MoJ2xlZnQnLCAoLShjdXJyUG9zaXRpb24gLSAyKSAqIGJhc2VXaWR0aCkgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKGNvbnRhaW5lci5jaGlsZHJlbigpLmZpcnN0KCkuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuKCkuZmlyc3QoKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24tLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcygnbGVmdCcsICgtKGN1cnJQb3NpdGlvbiArIDIpICogYmFzZVdpZHRoKSArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5wcmVwZW5kKGNvbnRhaW5lci5jaGlsZHJlbigpLmxhc3QoKS5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW4oKS5sYXN0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChudW1QYW5lbCkgc2hvd051bSgpO1xyXG4gICAgICAgICAgICBpZiAoZG90cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsbERvdHMgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLW5hdiBzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgYWxsRG90cy5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICQoYWxsRG90c1tjb250YWluZXIuZmluZCgnLmd0LW9wZW4nKS5hdHRyKCdkYXRhLWNvdW50JyldKS5hZGRDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHRyYW1TbGlkZXJNb3ZlKCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuYW5pbWF0ZSh7bGVmdDogLWN1cnJQb3NpdGlvbiAqIGJhc2VXaWR0aH0sIHRyYW1BbmltYXRpb24pO1xyXG4gICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW4oKS5lcShjdXJyUG9zaXRpb24pLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBmYWRlU2xpZGVyTW92ZShwb3NpdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBwb3NpdGlvbiB8fCBjdXJyUG9zaXRpb247XHJcbiAgICAgICAgICAgICQoaW5uZXIpLnJlbW92ZUNsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgICQoaW5uZXJbaW5kZXhdKS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNob3dOdW0oKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZCgnLmd0LXNsaWRlci1udW0tY3VycicpLnRleHQoKyhjb250YWluZXIuZmluZCgnLmd0LW9wZW4nKS5hdHRyKCdkYXRhLWNvdW50JykpICsgMSk7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZCgnLmd0LXNsaWRlci1udW0tbWF4JykudGV4dChpbm5lckNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVUb3VjaCgpIHtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxQb2ludCA9IDAsXHJcbiAgICAgICAgICAgICAgICBmaW5hbFBvaW50ID0gMDtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5vbihcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsUG9pbnQgPSBNYXRoLmFicyhlLnRvdWNoZXNbMF0ucGFnZVgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0b3VjaHN0YXJ0XCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5vbihcInRvdWNoZW5kXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICAgICAgICAgICAgZmluYWxQb2ludCA9IE1hdGguYWJzKGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGluaXRpYWxQb2ludCAtIGZpbmFsUG9pbnQpID4gNTApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFBvaW50ID4gZmluYWxQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lUb3VjaChjbG9uZSkge1xyXG4gICAgICAgICAgICB2YXIgZWwgPSBjbG9uZSB8fCBjdXJyU2xpZGVyO1xyXG4gICAgICAgICAgICBlbC5vZmYoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBmaW5kU2NyZWVuQ29uc3QoKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyU2xpZGVyLmF0dHIoXCJkYXRhLWNvdW50XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JlZW5Db25zdCA9IHBhcnNlSW50KGN1cnJTbGlkZXIuYXR0cihcImRhdGEtY291bnRcIikpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodG9rZW43NjgpLmlzKFwiOnZpc2libGVcIikpIHNjcmVlbkNvbnN0ID0gMztcclxuICAgICAgICAgICAgICAgIGlmICgkKHRva2VuNjY3KS5pcyhcIjp2aXNpYmxlXCIpKSBzY3JlZW5Db25zdCA9IDI7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0b2tlbjM2MCkuaXMoXCI6dmlzaWJsZVwiKSkgc2NyZWVuQ29uc3QgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0QmFzZVdpZHRoKCkge1xyXG4gICAgICAgICAgICBiYXNlV2lkdGggPSBjdXJyU2xpZGVyLm91dGVyV2lkdGgoKSAvIHNjcmVlbkNvbnN0O1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWNvbnRhaW5lclwiKS5vdXRlcldpZHRoKChpbm5lckNvdW50ICsgMSkgKiBiYXNlV2lkdGgpO1xyXG4gICAgICAgICAgICBpbm5lci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub3V0ZXJXaWR0aChiYXNlV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWNvdW50JywgJCh0aGlzKS5pbmRleCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2xvbmVTbGlkZXIoY2xpY2tQb3NpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIiNndC1jbG9uZVwiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBzZWxmLmZpeEJvZHkoKTtcclxuICAgICAgICAgICAgdmFyIGJvZHlXcmFwcGVyID0gJChcIiNndC1ib2R5LXdyYXBwZXJcIik7XHJcbiAgICAgICAgICAgIGJvZHlXcmFwcGVyLmFwcGVuZCgnPGRpdiBpZCA9IFwiZ3QtY2xvbmUtd3JhcHBlclwiICAgY2xhc3M9XCJjb250YWluZXJcIj48ZGl2IGlkID0gXCJndC1jbG9uZVwiIGNsYXNzPVwiZ3Qtc2xpZGVyIGd0LXNsaWRlci1jbG9uZSBndC1zbGlkZXItZmFkZSBndC1zbGlkZXItbnVtICBndC1zbGlkZXItaGFzLWFycm93XCI+PGRpdiBpZCA9IFwiZ3QtY2xvbmUtY2xvc2VcIiBjbGFzcyA9IFwiZ3Qtc2xpZGVyLWNsb25lLWNsb3NlXCI+PC9kaXY+PGRpdiAgaWQgPSBcImd0LWNsb25lLWNvbnRhaW5lclwiIGNsYXNzPVwiZ3Qtc2xpZGVyLWNvbnRhaW5lclwiPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICBib2R5V3JhcHBlci5zaG93KCk7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZVNsaWRlciA9ICQoJyNndC1jbG9uZScpLFxyXG4gICAgICAgICAgICAgICAgaW5uZXJzID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1pbm5lclwiKS5jbG9uZSh0cnVlKTtcclxuICAgICAgICAgICAgaW5uZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vdXRlcldpZHRoKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJyNndC1jbG9uZS1jb250YWluZXInKS5hcHBlbmQoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZVNsaWRlcihjbG9uZVNsaWRlciwgY2xpY2tQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtY2xvbmUtY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBkZXN0cm95Q2xvbmVTbGlkZXIoY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95Q2xvbmVTbGlkZXIoY2xvbmVTbGlkZXIpIHtcclxuICAgICAgICAgICAgZGVzdHJveUFycm93cyhjbG9uZVNsaWRlcik7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lUb3VjaChjbG9uZVNsaWRlcik7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtY2xvbmUtY2xvc2VcIikub2ZmKCk7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtY2xvbmUtd3JhcHBlclwiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgJChcIiNndC1ib2R5LXdyYXBwZXJcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICBzZWxmLnVuZml4Qm9keSgpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vLy8vLy8vLy9yZXNpemVTbGlkZXJcclxuICAgICAgICBmdW5jdGlvbiByZXNpemVTbGlkZXIoKSB7XHJcbiAgICAgICAgICAgIGlmICghc2xpZGVyVGltZU91dCkge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVyVGltZU91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlclRpbWVPdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZUZ1bmMoKTtcclxuICAgICAgICAgICAgICAgIH0sIDEzMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBkb2NXaW5kb3cucmVzaXplKHJlc2l6ZVNsaWRlcik7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiByZXNpemVGdW5jKCkge1xyXG4gICAgICAgICAgICBkZXN0cm95VG91Y2goKTtcclxuICAgICAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgICAgIGZpbmRTY3JlZW5Db25zdCgpO1xyXG4gICAgICAgICAgICAgICAgc2V0QmFzZVdpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICByZXNpemVNb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcnJvd3NSZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveUFycm93cygpO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQXJyb3dzKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5uZXJDb3VudCA+IHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVUb3VjaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZU1vdmUoKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpXHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gPSBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3Q7XHJcbiAgICAgICAgICAgIGlmIChpbm5lckNvdW50IDw9IHNjcmVlbkNvbnN0KSBjdXJyUG9zaXRpb24gPSAwO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1zbGlkZXJcIikpIHtcclxuICAgICAgICAkKFwiLmd0LXNsaWRlclwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZXIoJCh0aGlzKSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHRoaXMubWFuYWdlR3RBY3RpdmVVbE1lbnUgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBpZiAoZWwudGFnTmFtZSAhPSBcImxpXCIpXHJcbiAgICAgICAgICAgIGVsID0gJChlbCkuY2xvc2VzdChcImxpXCIpO1xyXG4gICAgXHJcbiAgICAgICAgJChlbCkuY2xvc2VzdCgkKFwidWxcIikpLmZpbmQoXCJsaVwiKS5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgLy8gaWYgKCQoXCIqXCIpLmlzKFwiLmd0LWh1bmRyZXQtbWVudVwiKSkge1xyXG4gICAgLy8gICAgICQoXCIuZ3QtaHVuZHJldC1tZW51XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAvLyAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgICAgIHNlbGYubWFuYWdlR3RBY3RpdmVVbE1lbnUoZXZlbnQudGFyZ2V0KTtcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcIipcIikuaXMoXCIuZ3QtYnV0dG9uLW1lbnVcIikpIHtcclxuICAgICAgICAkKFwiLmd0LWJ1dHRvbi1tZW51XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHNlbGYubWFuYWdlR3RBY3RpdmVVbE1lbnUoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LW1lbnUtbmV3c1wiKSkge1xyXG4gICAgICAgICQoXCIuZ3QtbWVudS1uZXdzXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHNlbGYubWFuYWdlR3RBY3RpdmVVbE1lbnUoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy50YWJTbGlkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYlNsaWRlcnMgPSAkKFwiLmd0LXRhYnNcIik7XHJcbiAgICAgICAgdGFiU2xpZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJUYWJzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgY3VyclRhYnMuZmluZChcIi5ndC10YWJzLWJ1dHRvblwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50YWJTbGlkZXJBY3Rpb24oY3VyclRhYnMsICQodGhpcykuaW5kZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNlbGYudGFiU2xpZGVyQWN0aXZhdGlvbihjdXJyVGFicyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnRhYlNsaWRlckFjdGl2YXRpb24gPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIikpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIikpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIC8vICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIikpLmhpZGUoKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIilbMF0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIC8vICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbMF0pLnNob3coKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpWzBdKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudGFiU2xpZGVyQWN0aW9uID0gZnVuY3Rpb24gKGVsLCBudW0pIHtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIikpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIikpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIC8vICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIikpLmhpZGUoKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIilbbnVtXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgLy8gJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKVtudW1dKS5zaG93KCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKVtudW1dKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtdGFic1wiKSkge1xyXG4gICAgICAgIHNlbGYudGFiU2xpZGVyKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFBsYXllcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbiAgICAgICAgdGFnLnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gICAgICAgIHRhZy5zcmMgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3BsYXllcl9hcGlcIjtcclxuICAgICAgICB2YXIgbGFzdFNjcmlwdFRhZyA9ICQoXCJzY3JpcHRcIilbJChcInNjcmlwdFwiKS5sZW5ndGggLSAxXTtcclxuICAgICAgICBsYXN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhZywgbGFzdFNjcmlwdFRhZyk7XHJcbiAgICAgICAgdmFyIGd0VmlkZW9zID0gJChcIi5ndC12aWRlb1wiKTtcclxuICAgICAgICBndFZpZGVvcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQbGF5ZXIgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBjdXJyZW50UGxheWVyLmZpbmQoXCIuZ3QtdmlkZW8tc3dpdGNoXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGxheWVyLmFkZENsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuYWRkWW91VHViZShjdXJyZW50UGxheWVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmFkZFlvdVR1YmUgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICB2YXIgcGxheWVyLFxyXG4gICAgICAgICAgICBlbElkID0gXCJndC12aWRlby1cIiArIGVsLmluZGV4KCk7XHJcbiAgICBcclxuICAgICAgICBlbC5maW5kKFwiLmd0LXZpZGVvLXN3aXRjaFwiKS5oaWRlKCdzbG93Jyk7XHJcbiAgICBcclxuICAgICAgICBlbFxyXG4gICAgICAgICAgICAuZmluZChcIi5ndC12aWRlby1pbm5lclwiKVxyXG4gICAgICAgICAgICAuYXR0cihcImlkXCIsIGVsSWQpXHJcbiAgICAgICAgICAgIC5hZGRDbGFzcyhcImd0LXZpZGVvLWZvcmVncm91bmRcIik7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBvbllvdVR1YmVJZnJhbWVBUElSZWFkeSgpIHtcclxuICAgICAgICAgICAgcGxheWVyID0gbmV3IFlULlBsYXllcihlbElkLCB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNjAwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgICAgICAgICAgICAgICB2aWRlb0lkOiBlbC5hdHRyKFwiZGF0YS15b3V0dWJlXCIpLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyVmFyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlsaXN0OiBlbC5hdHRyKFwiZGF0YS15b3V0dWJlXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIndoaXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogMSxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGVrYjogMCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb250cm9sczogMFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUmVhZHk6IGluaXRpYWxpemVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5tdXRlKCk7XHJcbiAgICAgICAgICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJndC12aWRlby1vblwiKTtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5ndC12aWRlby11bmNvdmVyXCIpLm9uKCdjbGljaycsIHBsYXlGdWxsU2NyZWVuKTtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5ndC12aWRlby1wYXVzZVwiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGF1c2VWaWRlbygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5ndC12aWRlby1wbGF5XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYXlWaWRlbygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBwbGF5RnVsbFNjcmVlbigpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BsYXlGdWxsU2NyZWVuJyk7XHJcbiAgICAgICAgICAgIHZhciBpZnJhbWUgPSBlbC5maW5kKCdpZnJhbWUnKVswXTtcclxuICAgICAgICAgICAgdmFyIHJlcXVlc3RGdWxsU2NyZWVuID0gaWZyYW1lLnJlcXVlc3RGdWxsU2NyZWVuIHx8IGlmcmFtZS5tb3pSZXF1ZXN0RnVsbFNjcmVlbiB8fCBpZnJhbWUud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW47XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0RnVsbFNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdEZ1bGxTY3JlZW4uYmluZChpZnJhbWUpKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC12aWRlb1wiKSkge1xyXG4gICAgICAgIHNlbGYuc2V0UGxheWVycygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5maXhBcnRpY2xlU2Nyb2xsVGFibGVQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFibGUgPSAkKFwiLmd0LWFydGljbGUtdGFibGUtd3JhcHBlclwiKSxcclxuICAgICAgICAgICAgdGFibGVQYXJlbnQgPSB0YWJsZS5wYXJlbnQoKSxcclxuICAgICAgICAgICAgdGFibGVQYXJlbnRUb3AgPSB0YWJsZVBhcmVudC5wb3NpdGlvbigpLnRvcCxcclxuICAgICAgICAgICAgdGFibGVQYXJlbnRCb3R0b20gPSB0YWJsZVBhcmVudFRvcCArIHRhYmxlUGFyZW50Lm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHRhYmxlV2lkdGggPSB0YWJsZS5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgIHdpbmRvd1RvcCA9IGRvYy5zY3JvbGxUb3AoKSxcclxuICAgICAgICAgICAgd2lkb3dIZWlnaHQgPSBkb2NXaW5kb3cub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICAvLyB0YWJsZVBhcmVudC5hZGRDbGFzcygndGVzdCcpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc29sZS5sb2codGFibGVQYXJlbnRUb3ApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHdpbmRvd1RvcCk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGlmICh0YWJsZVBhcmVudFRvcCs5MCA+IHdpbmRvd1RvcCkge1xyXG4gICAgICAgICAgICBpZiAodGFibGUuaGFzQ2xhc3MoXCJndC1maXhlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2xhc3MoXCJndC1maXhlZFwiKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3AgPCB3aW5kb3dUb3AgKyA5MCkge1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdGFibGUub2Zmc2V0KCkubGVmdCArIFwicHhcIixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGFibGVXaWR0aFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5hZGRDbGFzcyhcImd0LWZpeGVkXCIpO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAod2luZG93VG9wICsgd2lkb3dIZWlnaHQgPiB0YWJsZVBhcmVudEJvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuYWRkQ2xhc3MoXCJndC1maXhlZC1ib3R0b21cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmVDbGFzcyhcImd0LWZpeGVkLWJvdHRvbVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZS5oYXNDbGFzcyhcImd0LWZpeGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogKHdpZG93SGVpZ2h0IC0gMTIwKSArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlQXJ0aWN0ZVNjcm9sbFRhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJChcImRpdlwiKS5pcyhcIi5ndC1hcnRpY2xlXCIpKSByZXR1cm47XHJcbiAgICAgICAgdmFyIGFydGljbGVzID0gJChcIi5ndC1hcnRpY2xlXCIpLFxyXG4gICAgICAgICAgICBodG1sID0gXCJcIjtcclxuICAgICAgICBhcnRpY2xlcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaHRtbCArPVxyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3MgPSBcImd0LWFydGljbGUtc2Nyb2xsXCI+PGRpdiBjbGFzcyA9IFwiZ3QtYXJ0aWNsZS1zY3JvbGwtc2hhZG93XCI+PC9kaXY+PHA+JyArXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCJoMlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KCkgK1xyXG4gICAgICAgICAgICAgICAgXCI8L3A+PC9kaXY+XCI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChcIiNndC1hcnRpY2xlLXNjcm9sbC10YWJsZVwiKS5odG1sKGh0bWwpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5zaG93QXJ0aWRsZVNoYWRvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiLmd0LWFydGljbGVcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQodGhpcykpO1xyXG4gICAgICAgICAgICB2YXIgY3VyclBvc2l0aW9uID0gJCh0aGlzKS5wb3NpdGlvbigpLnRvcCxcclxuICAgICAgICAgICAgICAgIGVsSGVpZ2h0ID0gJCh0aGlzKS5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgd2luZG93UG9zaXRpb24gPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSxcclxuICAgICAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID4gd2luZG93UG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgeCA9ICh3aW5kb3dQb3NpdGlvbiAtIGN1cnJQb3NpdGlvbikgLyBlbEhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoeCA+IDEpIHggPSAxO1xyXG4gICAgICAgICAgICB2YXIgY3VyclNoYWRvdyA9ICQoXCIuZ3QtYXJ0aWNsZS1zY3JvbGxcIilbJCh0aGlzKS5pbmRleCgpXTtcclxuICAgICAgICAgICAgJChjdXJyU2hhZG93KVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIuZ3QtYXJ0aWNsZS1zY3JvbGwtc2hhZG93XCIpXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwid2lkdGhcIiwgeCAqIDEwMCArIFwiJVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoJ2RpdicpLmlzKCcuZ3QtYXJ0aWNsZS10YWJsZS13cmFwcGVyJykpIHtcclxuICAgICAgICB2YXIgc2hhZG93ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQ7XHJcbiAgICBcclxuICAgICAgICBpZiAoJCgnZGl2JykuaXMoXCIuZ3QtYXJ0aWNsZS1zY3JvbGwtdGFibGVcIikpIHtcclxuICAgICAgICAgICAgc2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVBcnRpY3RlU2Nyb2xsVGFibGUoKTtcclxuICAgICAgICAgICAgc2VsZi5zaG93QXJ0aWRsZVNoYWRvdygpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsVGhyb3R0bGVyKCkge1xyXG4gICAgICAgICAgICBpZiAoIXNjcm9sbFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYWRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dBcnRpZGxlU2hhZG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgZG9jV2luZG93LnNjcm9sbChzY3JvbGxUaHJvdHRsZXIpO1xyXG4gICAgICAgIGRvY1dpbmRvdy5yZXNpemUoc2Nyb2xsVGhyb3R0bGVyKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldEN1cnJUaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VyclRpbWUoKTtcclxuICAgICAgICB2YXIgdCA9IHNldEludGVydmFsKHNlbGYuY3VyclRpbWUsIDMwMDAwKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmN1cnJUaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIuZ3QtY3Vyci10aW1lXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJkYXRhLWdtdFwiKSkgZGF0ZS5zZXRVVENIb3VycygrJCh0aGlzKS5hdHRyKFwiZGF0YS1nbXRcIikpO1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICB3ZWVrZGF5ID0gZGF0ZS5nZXREYXkoKSxcclxuICAgICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCksXHJcbiAgICAgICAgICAgICAgICB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgd2Vla2RheXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQktC+0YHQutGA0LXRgdC10L3RjNC1XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQn9C+0L3QtdC00LXQu9GM0L3QuNC6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQktGC0L7RgNC90LjQulwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KHRgNC10LTQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KfQtdGC0LLQtdGA0LNcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCf0Y/RgtC90LjRhtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQodGD0LHQsdC+0YLQsFwiXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBcItGP0L3QstCw0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0YTQtdCy0YDQsNC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC80LDRgNGC0LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCw0L/RgNC10LvRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LzQsNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQuNGO0L3Rj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LjRjtC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItCw0LLQs9GD0YHRgtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLRgdC10L3RgtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvtC60YLRj9Cx0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0L3QvtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQtNC10LrQsNCx0YDRj1wiXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBpZiAoaG91cnMgPCAxMCkgaG91cnMgPSBcIjBcIiArIGhvdXJzO1xyXG4gICAgICAgICAgICBpZiAobWludXRlcyA8IDEwKSBtaW51dGVzID0gXCIwXCIgKyBtaW51dGVzO1xyXG4gICAgICAgICAgICB3ZWVrZGF5ID0gd2Vla2RheXNbd2Vla2RheV07XHJcbiAgICAgICAgICAgIG1vbnRoID0gbW9udGhlc1ttb250aF07XHJcbiAgICAgICAgICAgIGlmICgkKFwiLmd0LWN1cnItdGltZS10aW1lXCIpKVxyXG4gICAgICAgICAgICAgICAgJChcIi5ndC1jdXJyLXRpbWUtdGltZVwiKS5odG1sKGhvdXJzICsgXCI6XCIgKyBtaW51dGVzKTtcclxuICAgICAgICAgICAgaWYgKCQoXCIuZ3QtY3Vyci10aW1lLWRhdGVcIikpXHJcbiAgICAgICAgICAgICAgICAkKFwiLmd0LWN1cnItdGltZS1kYXRlXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla2RheSArIFwiLCBcIiArIGRheSArIFwiIFwiICsgbW9udGggKyBcIiBcIiArIHllYXJcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWN1cnItdGltZVwiKSkge1xyXG4gICAgICAgIHNlbGYuc2V0Q3VyclRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlubmVyU2Nyb2xsID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKGVsLmZpbmQoXCIub3ZlcnZpZXdcIikuaGVpZ2h0KCkgPiBlbC5oZWlnaHQoKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBlbC5hZGRDbGFzcyhcImlzU2Nyb2xsZWRcIik7XHJcbiAgICAgICAgICAgIGVsLnRpbnlzY3JvbGxiYXIoe1xyXG4gICAgICAgICAgICAgICAgdGh1bWJTaXplOiA0MCxcclxuICAgICAgICAgICAgICAgIHdoZWVsU3BlZWQ6IDEwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbm5lci1zY3JvbGxcIikpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAkKCcuZ3QtaW5uZXItc2Nyb2xsJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmlubmVyU2Nyb2xsKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy9kb2VzIG5vdCB3b3JrXHJcblxyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlSWNvbnNJdGVtc0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIuZ3Qtdmlldy1jYXJkcy1pY29ucy1pdGVtXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtdmlzaXRcIikpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlVmlzaXRMaW5rKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy1ib29rbWFya3NcIikpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQm9va21hcmtzTGluaygkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy1waW5cIikgfHxcclxuICAgICAgICAgICAgICAgICQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLXNoYXJlXCIpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b2dnbGVHdEFjdGl2ZSgkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtc2hhcmVcIikpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlU2hhcmVMaW5rKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZVNoYXJlTGluayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGVsLnJlbW92ZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgIGVsLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBlbC50b2dnbGVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudG9nZ2xlR3RBY3RpdmUgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICB2YXIgZWwgPSAkKGVsKTtcclxuICAgICAgICBlbC5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZWwudG9nZ2xlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlVmlzaXRMaW5rID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKCFlbC5jbG9zZXN0KFwiLmd0LXZpZXctY2FyZHMtaW5uZXJcIikuYXR0cihcImRhdGEtaHJlZlwiKSkgcmV0dXJuO1xyXG4gICAgICAgIGVsLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmFkZFZpc2l0ZWRMaW5rKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5hZGRWaXNpdGVkTGluayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgICBcItC/0L7RgdC70LDQu9C4INC00LDQvdC90YvQtSDQvdCwINCx0LXQulwiLFxyXG4gICAgICAgICAgICBlbC5jbG9zZXN0KFwiLmd0LXZpZXctY2FyZHMtaW5uZXJcIikuYXR0cihcImRhdGEtaHJlZlwiKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZWwudG9nZ2xlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuYWRkQm9va21hcmsgPSBmdW5jdGlvbiAoYSwgdXJsLCB0aXRsZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5leHRlcm5hbC5BZGRGYXZvcml0ZSh1cmwsIHRpdGxlKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2lkZWJhci5hZGRQYW5lbCh0aXRsZSwgdXJsLCBcIlwiKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcGVyYSA9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYS50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGEudXJsID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcItCd0LDQttC80LjRgtC1IEN0cmwtRCDRh9GC0L7QsdGLINC00L7QsdCw0LLQuNGC0Ywg0YHRgtGA0LDQvdC40YbRgyDQsiDQt9Cw0LrQu9Cw0LTQutC4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUJvb2ttYXJrc0xpbmsgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICB2YXIgZWwgPSAkKGVsKTtcclxuICAgICAgICB2YXIgcGFyZW50ID0gZWwuY2xvc2VzdChcIi5ndC12aWV3LWNhcmRzLWlubmVyXCIpO1xyXG4gICAgICAgIHBhcmVudCA9ICQocGFyZW50KTtcclxuICAgICAgICBpZiAoIXBhcmVudC5hdHRyKFwiZGF0YS1ocmVmXCIpKVxyXG4gICAgICAgICAgICBwYXJlbnQuYXR0cihcImRhdGEtaHJlZlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgICAgaWYgKCFwYXJlbnQuYXR0cihcImRhdGEtYm9va21hcmtcIikpIHBhcmVudC5hdHRyKFwiZGF0YS1ib29rbWFya1wiLCBcIkdvVG9UcmlwXCIpO1xyXG4gICAgICAgIGVsLmF0dHIoXCJocmVmXCIsIHBhcmVudC5hdHRyKFwiZGF0YS1ocmVmXCIpKTtcclxuICAgICAgICBlbC5hdHRyKFwicmVsXCIsIFwic2lkZWJhclwiKTtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5hZGRCb29rbWFyayhcclxuICAgICAgICAgICAgICAgIGVsLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50LmF0dHIoXCJkYXRhLWhyZWZcIiksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXR0cihcImRhdGEtYm9va21hcmtcIilcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LXZpZXctY2FyZHMtaWNvbnMtYm9va21hcmtzXCIpKSB7XHJcbiAgICAgICAgc2VsZi5jcmVhdGVCb29rbWFya3NMaW5rKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LXZpZXctY2FyZHMtaWNvbnMtaXRlbVwiKSkge1xyXG4gICAgICAgIHNlbGYuY3JlYXRlSWNvbnNJdGVtc0NsaWNrKCk7XHJcbiAgICB9XHJcbiAgICAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0L3QsNC70LjRh9C40LUgLSDQvtCx0YHRg9C00LjRgtGMINGBINCx0LXQutC+0Lwg0L/QvtCy0LXQtNC10LPRgtC1XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1mYWNlYm9vaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbEVudGVyKCdmYWNlYm9vaycpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1lbnRlci1mb3JtLXR3aXR0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcigndHdpdHRlcicpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1lbnRlci1mb3JtLWdvb2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbEVudGVyKCdnb29nbGUnKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJyNndC1yZWctZm9ybS1mYWNlYm9vaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbFJlZ2lzdHJhdGlvbignZmFjZWJvb2snKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tdHdpdHRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbFJlZ2lzdHJhdGlvbigndHdpdHRlcicpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1yZWctZm9ybS1nb29nbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ2dvb2dsZScpXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy5zb2NpYWxSZWdpc3RyYXRpb24gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIFxyXG4gICAgICAgIGFsZXJ0KFwi0KDQtdCz0LjRgdGC0YDQsNGG0LjRjyDRh9C10YDQtdC3IFwiICsgdG9rZW4pXHJcbiAgICBcclxuICAgIH07XHJcbiAgICB0aGlzLnNvY2lhbEVudGVyID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBcclxuICAgICAgICBhbGVydChcItCS0YXQvtC0INGH0LXRgNC10LcgXCIgKyB0b2tlbilcclxuICAgIFxyXG4gICAgfTtcclxuICAgdGhpcy5jdXROZXdzID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50KCksXHJcbiAgICAgICAgICAgbWF4SGVpZ2h0ID0gcGFyZW50LmhlaWdodCgpLFxyXG4gICAgICAgICAgIGN1dHRpbmdFbCA9IGVsLmZpbmQoJ3AnKSxcclxuICAgICAgICAgICBjdXJySGVpZ2h0LFxyXG4gICAgICAgICAgIGN1dHRpbmdMZW5naHQsXHJcbiAgICAgICAgICAgbmV3VGV4dDtcclxuICAgICAgIHBhcmVudC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIG1heEhlaWdodCAtPSAkKHRoaXMpLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICAgbWF4SGVpZ2h0ID0gbWF4SGVpZ2h0ICsgZWwuaGVpZ2h0KCkgLTIwO1xyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICAgICAgY3V0dGluZ0VsLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIGN1cnJIZWlnaHQgPSAkKHRoaXMpLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICBcclxuICAgICAgICAgICBpZiggY3VyckhlaWdodCA8IG1heEhlaWdodCl7XHJcbiAgICAgICAgICAgICAgIG1heEhlaWdodCAtPWN1cnJIZWlnaHRcclxuICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGlmKCFtYXhIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XHJcbiAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgY3V0dGluZ0xlbmdodCA9ICBNYXRoLmZsb29yKCQodGhpcykudGV4dCgpLmxlbmd0aCAqIG1heEhlaWdodCAvIGN1cnJIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgbmV3VGV4dCA9ICQodGhpcykudGV4dCgpLnN1YnN0cmluZygwLCBjdXR0aW5nTGVuZ2h0LTUpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gY3V0TGFzdFN5bWJvbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KChuZXdUZXh0KSArICcuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vXHJcbiAgICAgICAvLyBmdW5jdGlvbiBjdXRMYXN0U3ltYm9sKCkge1xyXG4gICAgICAgLy8gICAgIHZhciBzdHJMZW5ndGggPSBuZXdUZXh0Lmxlbmd0aDtcclxuICAgICAgIC8vICAgICBpZihuZXdUZXh0LmNoYXJBdChzdHJMZW5ndGggLSAxKSA9PSAnICcpe1xyXG4gICAgICAgLy8gICAgICAgICBuZXdUZXh0PSBuZXdUZXh0LnN1YnN0cmluZygwLCBzdHJMZW5ndGggLSAxKTtcclxuICAgICAgIC8vICAgICB9ZWxzZXtcclxuICAgICAgIC8vICAgICAgICAgbmV3VGV4dCA9IG5ld1RleHQuc3Vic3RyaW5nKDAsIHN0ckxlbmd0aCAtIDEpO1xyXG4gICAgICAgLy8gICAgICAgICBzZXRUaW1lb3V0KGN1dExhc3RTeW1ib2wpXHJcbiAgICAgICAvLyAgICAgfVxyXG4gICAgICAgLy8gfVxyXG4gICBcclxuICAgfTtcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuanMtbmV3cy1jdXRcIikpIHtcclxuICAgICAgICQoXCIuanMtbmV3cy1jdXRcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgc2VsZi5jdXROZXdzKCQodGhpcykpO1xyXG4gICAgICAgfSk7XHJcbiAgIFxyXG4gICBcclxuICAgICAgIGRvY1dpbmRvdy5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICQoXCIuanMtbmV3cy1jdXRcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgIHNlbGYuY3V0TmV3cygkKHRoaXMpKTtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgIH0pO1xyXG4gICB9XHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIHRoaXMuY3V0UmVhZE1vcmVTbGlkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICB2YXIgY3V0dGluZ3MgPSAkKFwiLmd0LXJlYWQtbW9yZS1zbGlkZXItdGV4dC1pbm5lclwiKTtcclxuICAgICAgIGN1dHRpbmdzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIHNlbGYuY3V0dGluZygkKHRoaXMpLCAxNjApO1xyXG4gICAgICAgfSk7XHJcbiAgIH07XHJcbiAgIFxyXG4gICB0aGlzLmN1dHRpbmcgPSBmdW5jdGlvbiAoZWwsIG51bSkge1xyXG4gICAgICAgdmFyIG5ld3NUZXh0ID0gZWwudGV4dCgpO1xyXG4gICAgICAgaWYgKG5ld3NUZXh0Lmxlbmd0aCA+IG51bSkge1xyXG4gICAgICAgICAgIG5ld3NUZXh0ID0gbmV3c1RleHQuc2xpY2UoMCwgbnVtKSArIFwiLi4uXCI7XHJcbiAgICAgICAgICAgZWwudGV4dChuZXdzVGV4dCk7XHJcbiAgICAgICB9XHJcbiAgIH07XHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIGlmICgkKFwicFwiKS5pcyhcIi5ndC1yZWFkLW1vcmUtc2xpZGVyLXRleHQtaW5uZXJcIikpIHtcclxuICAgICAgIHNlbGYuY3V0UmVhZE1vcmVTbGlkZXIoKTtcclxuICAgfVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgIGRvYy5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgICAgICBzZWxmLmZvb3RlckhlaWdodCgpOy8vX2Zvb3Rlcl9oZWlnaHQuanNcclxuICAgICAgICBzZWxmLmRlc2tUb3BNZW51U2Nyb2xsKCk7Ly9fZGVzY3RvcF9oZWFkZXJfZnVuYy5qc1xyXG4gICAgXHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgZG9jV2luZG93LnNjcm9sbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi51cFBhZ2VCdXR0b24oKTsvL191cF9idXR0b24uanNcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgaWYgKCQoXCIuZ3QtaGVhZGVyLW1lbnVcIikuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICBzZWxmLmRlc2tUb3BNZW51U2Nyb2xsKCk7Ly9fZGVzY3RvcF9oZWFkZXJfZnVuYy5qc1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgZG9jV2luZG93LnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5kZXNrVG9wTWVudVNjcm9sbCgpO1xyXG4gICAgICAgIHNlbGYuZm9vdGVySGVpZ2h0KCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoZ3RIZWFkZXIuaGFzQ2xhc3MoXCJndC1vcGVuXCIpKSBzZWxmLm1vYmlsZU1lbnVDbG9zZSgpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikpIHtcclxuICAgICAgICAgICAgJChcIi5ndC1pbWctaG9sZGVyLWFic1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJndC13aWR0aFwiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJndC1oZWlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmltZ0hvbGRlckZ1bmMoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpKSB7XHJcbiAgICAgICAgICAgICQoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmltZ0hvbGRlckZ1bmMoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGJvZHkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcclxuICAgIFxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxudmFyIGdvVG9UcmlwID0gbmV3IEdvVG9UcmlwKCk7Il19
