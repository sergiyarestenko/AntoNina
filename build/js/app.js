GoToTrip=function(){function t(){w||(w=setTimeout(function(){w=null,e.fixArticleScrollTablePosition(),k&&e.showArtidleShadow()}))}var e=this,i=$(document.body),s=$(document),n=$(window),o={top:!1,left:!1},a=$("#gt-is-360"),r=($("#gt-is-480"),$("#gt-is-667")),c=$("#gt-is-768"),l=$("#gt-is-1024"),d=($("#gt-is-1231"),$("header")),g=$("footer"),h=$("#gt-wrapper"),u=$("#gt-up"),f=$("#gt-mobile-menu-switch"),v=$(".gt-enter"),p=$("#gt-header-enter-wrapper"),m=$("#gt-header-enter"),b=$("#gt-header-enter-chose"),C=$("#gt-header-enter-close");if(this.fixBody=function(){o.top||o.left||(o.top=s.scrollTop(),o.left=i.offset().left,i.css({position:"fixed",left:o.left+"px",top:-1*o.top+"px"}))},this.unfixBody=function(){i.css({position:"",left:"",top:""}),s.scrollTop(o.top),o.top=!1,o.left=!1},this.footerHeight=function(){g.outerHeight()>n.height()-50?(g.css("position","static"),h.css("margin-bottom",""),u.css("position","static")):(g.css("position",""),u.css("position",""),h.css("margin-bottom",g.outerHeight()+"px"))},this.deskTopMenuScroll=function(){n.scrollTop()>d.outerHeight()?d.addClass("gt-header-scrolled"):d.removeClass("gt-header-scrolled")},this.pageUp=function(){return $("body,html").animate({scrollTop:0},800),!1},this.upPageButton=function(){$(document).scrollTop()>30?u.addClass("gt-visible"):u.removeClass("gt-visible")},u.on("click",e.pageUp),this.mobileMenuClose=function(){e.unfixBody(),f.removeClass("gt-open"),d.removeClass("gt-open")},this.mobileMenuOpen=function(){e.fixBody(),d.addClass("gt-open"),f.addClass("gt-open")},f.on("click",function(){$(this).hasClass("gt-open")?e.mobileMenuClose():e.mobileMenuOpen()}),this.openEnterForm=function(){p.addClass("gt-open"),setTimeout(function(){$("#gt-header-registered").addClass("gt-open"),m.addClass("gt-open"),C.addClass("gt-open")})},this.closeEnterForm=function(){C.removeClass("gt-open"),m.removeClass("gt-open"),$("#gt-header-registered").removeClass("gt-open"),e.closeRestorePass(),setTimeout(function(){p.removeClass("gt-open")},750)},this.changeEnterRegistration=function(t){m.hasClass($(t.target).attr("class"))||m.removeClass("gt-chosen-enter").removeClass("gt-chosen-registration").addClass($(t.target).attr("class"))},this.openRestorePass=function(){$("#gt-enter-pass-restore-wrapper").addClass("gt-open")},this.closeRestorePass=function(){$("#gt-enter-pass-restore-wrapper").removeClass("gt-open")},v.each(function(){$(this).on("click",e.openEnterForm)}),C.on("click",e.closeEnterForm),b.on("click",function(t){e.changeEnterRegistration(t)}),$("#gt-enter-form-restore-pass").on("click",e.openRestorePass),$("#gt-enter-pass-restore-submit").on("click",e.closeRestorePass),this.setBackground=function(){$(".gt-img-holder").each(function(){if($(this).attr("data-bg")){var t=$(this).attr("data-bg");r.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/phone/'+t+'")'):l.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/tablet/'+t+'")'):$(this).css("background-image",'url("./img/backgrounds/desktop/'+t+'")')}})},this.imgHolderFunc=function(t){$(t).removeClass("gt-width"),$(t).removeClass("gt-height"),$(t).removeClass("gt-visible");var e=t.outerHeight()/t.outerWidth(),i=t.find("img");i.outerHeight()/i.outerWidth()>e?$(t).addClass("gt-width"):$(t).addClass("gt-height"),$(t).addClass("gt-visible")},$("div").is(".gt-img-holder")&&e.setBackground(),this.createSlider=function(t,i){function s(){if(T>C){var e="";H&&(e='<div class="gt-slider-arrow-num"><i class="gt-slider-num-curr"></i><i>из</i><i class="gt-slider-num-max"></i></div>'),t.find(".gt-slider-arrow-holder").html('<span class = "gt-slider-arrow left"></span>'+e+'<span class = "gt-slider-arrow right"></span>'),t.find(".left").on("click",function(){l(!1)}),t.find(".right").on("click",function(){l(!0)}),H&&h(),h()}w=!0}function o(e){var i=e||t;i.find(".left").off(),i.find(".right").off(),i.find(".gt-slider-arrow-holder").html(""),w=!1}function l(e,i){if(i||0===i?y=i:e?y++:y--,R&&(y>T-C&&(y=0),y<0&&(y=T-C),g()),A&&(console.log("start",y),y>T-C&&(x.css("left",-(y-2)*b+"px"),x.append(x.children().first().clone()),x.children().first().remove(),y--),y<0?(x.css("left",-(y+2)*b+"px"),x.prepend(x.children().last().clone()),x.children().last().remove(),y++,d()):d()),H&&h(),M){var s=t.find(".gt-slider-nav span");s.removeClass("gt-active"),$(s[x.find(".gt-open").attr("data-count")]).addClass("gt-active")}}function d(){x.children().removeClass("gt-open"),x.animate({left:-y*b},B),x.children().eq(y).addClass("gt-open")}function g(t){var e=t||y;$(k).removeClass("gt-open"),$(k[e]).addClass("gt-open")}function h(){t.find(".gt-slider-num-curr").text(+x.find(".gt-open").attr("data-count")+1),t.find(".gt-slider-num-max").text(T)}function u(){var e=0,i=0;t.on("touchstart",function(t){var i=t.originalEvent;e=Math.abs(i.touches[0].pageX),console.log("touchstart")}),t.on("touchend",function(t){var s=t.originalEvent;i=Math.abs(s.changedTouches[0].pageX),Math.abs(e-i)>50&&l(e>i?!0:!1)})}function f(e){(e||t).off()}function v(){t.attr("data-count")&&(C=parseInt(t.attr("data-count")),$(c).is(":visible")&&(C=3),$(r).is(":visible")&&(C=2),$(a).is(":visible")&&(C=1))}function p(){b=t.outerWidth()/C,t.find(".gt-slider-container").outerWidth((T+1)*b),k.each(function(){$(this).outerWidth(b),$(this).attr("data-count",$(this).index())})}var m,b,C=1,w=!1,k=t.find(".gt-slider-inner"),x=t.find(".gt-slider-container"),T=k.length,y=i||0,S=t.hasClass("gt-slider-has-arrow"),M=t.hasClass("gt-slider-has-dots"),H=t.hasClass("gt-slider-num"),A=t.hasClass("gt-slider-tram"),B=t.attr("data-duration")||300,R=t.hasClass("gt-slider-fade"),E=t.hasClass("gt-slider-has-clone");R&&g(i),A&&(v(),p(),d()),S&&(t.append('<div class="gt-slider-arrow-holder"></div>'),s()),M&&function(){t.append('<div class="gt-slider-nav"></div>');for(var e=t.find(".gt-slider-nav"),i="",s=0;s<T;s++)i+="<span data-num = "+s+"></span>";e.html(i),e.find("span").first().addClass("gt-active"),t.find(".gt-slider-nav span").on("click",function(){l(!0,+$(this).attr("data-num"))})}(),T>C&&u(),E&&t.find(".gt-slider-inner-cover").each(function(){$(this).on("click",function(){!function(i){if(!$("div").is("#gt-clone")){e.fixBody();var s=$("#gt-body-wrapper");s.append('<div id = "gt-clone-wrapper"   class="container"><div id = "gt-clone" class="gt-slider gt-slider-clone gt-slider-fade gt-slider-num  gt-slider-has-arrow"><div id = "gt-clone-close" class = "gt-slider-clone-close"></div><div  id = "gt-clone-container" class="gt-slider-container"></div></div></div>'),s.show();var n=$("#gt-clone");t.find(".gt-slider-inner").clone(!0).each(function(){$(this).outerWidth(""),$("#gt-clone-container").append($(this))}),e.createSlider(n,i),$("#gt-clone-close").on("click",function(){!function(t){o(t),f(t),$("#gt-clone-close").off(),$("#gt-clone-wrapper").remove(),$("#gt-body-wrapper").hide(),e.unfixBody()}(n)})}}($(this).parent().index())})}),n.resize(function(){m||(m=setTimeout(function(){m=null,f(),A&&(v(),p(),y>T-C&&(y=T-C),T<=C&&(y=0),d()),w&&(o(),s()),T>C&&u()},132))})},$("div").is(".gt-slider")&&$(".gt-slider").each(function(){e.createSlider($(this))}),this.manageGtActiveUlMenu=function(t){"li"!=t.tagName&&(t=$(t).closest("li")),$(t).closest($("ul")).find("li").removeClass("gt-active"),$(t).addClass("gt-active")},$("*").is(".gt-button-menu")&&$(".gt-button-menu").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-menu-news")&&$(".gt-menu-news").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),this.tabSlider=function(){$(".gt-tabs").each(function(){var t=$(this);t.find(".gt-tabs-button").each(function(){$(this).on("click",function(){e.tabSliderAction(t,$(this).index())})}),e.tabSliderActivation(t)})},this.tabSliderActivation=function(t){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-button")[0]).addClass("active"),$(t.find(".gt-tabs-main")[0]).addClass("active")},this.tabSliderAction=function(t,e){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-button")[e]).addClass("active"),$(t.find(".gt-tabs-main")[e]).addClass("active")},$("div").is(".gt-tabs")&&e.tabSlider(),this.setPlayers=function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/player_api";var i=$("script")[$("script").length-1];i.parentNode.insertBefore(t,i);$(".gt-video").each(function(){var t=$(this);t.find(".gt-video-switch").on("click",function(){$(this).addClass("gt-open"),t.addClass("gt-open"),e.addYouTube(t)})})},this.addYouTube=function(t){function e(){s.mute(),s.playVideo(),t.addClass("gt-video-on"),t.find(".gt-video-uncover").on("click",i),t.find(".gt-video-pause").on("click",function(){s.pauseVideo()}),t.find(".gt-video-play").on("click",function(){s.playVideo()})}function i(){console.log("playFullScreen");var e=t.find("iframe")[0],i=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;i&&i.bind(e)()}var s,n="gt-video-"+t.index();t.find(".gt-video-switch").hide("slow"),t.find(".gt-video-inner").attr("id",n).addClass("gt-video-foreground"),s=new YT.Player(n,{width:600,height:400,videoId:t.attr("data-youtube"),playerVars:{playlist:t.attr("data-youtube"),color:"white",loop:1,autoplay:1},events:{onReady:e}})},$("div").is(".gt-video")&&e.setPlayers(),this.fixArticleScrollTablePosition=function(){var t=$(".gt-article-table-wrapper"),e=t.parent(),i=e.position().top,o=i+e.outerHeight(),a=t.outerWidth(),r=s.scrollTop(),c=n.outerHeight();console.log(i),console.log(r),i+90>r&&t.hasClass("gt-fixed")&&(t.removeClass("gt-fixed"),t.css({left:"",width:""})),i<r+90&&(t.hasClass("gt-fixed")||(t.css({left:t.offset().left+"px",width:a}),t.addClass("gt-fixed")),r+c>o?t.addClass("gt-fixed-bottom"):t.removeClass("gt-fixed-bottom")),t.hasClass("gt-fixed")?t.css({height:c-120+"px"}):t.css({height:""})},this.createArticteScrollTable=function(){if($("div").is(".gt-article")){var t="";$(".gt-article").each(function(){t+='<div class = "gt-article-scroll"><div class = "gt-article-scroll-shadow"></div><p>'+$(this).find("h2").text()+"</p></div>"}),$("#gt-article-scroll-table").html(t)}},this.showArtidleShadow=function(){$(".gt-article").each(function(){var t=$(this).position().top,e=$(this).outerHeight(),i=$(document).scrollTop(),s=0;(s=t>i?0:(i-t)/e)>1&&(s=1);var n=$(".gt-article-scroll")[$(this).index()];$(n).find(".gt-article-scroll-shadow").css("width",100*s+"%")})},$("div").is(".gt-article-table-wrapper")){var w,k=!1;$("div").is(".gt-article-scroll-table")&&(k=!0,e.createArticteScrollTable(),e.showArtidleShadow()),n.scroll(t),n.resize(t)}this.setCurrTime=function(){e.currTime();setInterval(e.currTime,3e4)},this.currTime=function(){$(".gt-curr-time").each(function(){var t=new Date;$(this).attr("data-gmt")&&t.setUTCHours(+$(this).attr("data-gmt"));var e=t.getHours(),i=t.getMinutes(),s=t.getDay(),n=t.getDate(),o=t.getMonth(),a=t.getFullYear();e<10&&(e="0"+e),i<10&&(i="0"+i),s=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],o=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][o],$(".gt-curr-time-time")&&$(".gt-curr-time-time").html(e+":"+i),$(".gt-curr-time-date")&&$(".gt-curr-time-date").html(s+", "+n+" "+o+" "+a)})},$("div").is(".gt-curr-time")&&e.setCurrTime(),this.innerScroll=function(t){t.find(".overview").height()>t.height()&&(t.addClass("isScrolled"),t.tinyscrollbar({thumbSize:40,wheelSpeed:10}))},$("div").is(".gt-inner-scroll")&&$(".gt-inner-scroll").each(function(){e.innerScroll($(this))}),this.createIconsItemsClick=function(){$(".gt-view-cards-icons-item").each(function(){$(this).hasClass("gt-view-cards-icons-visit")?e.createVisitLink($(this)):$(this).hasClass("gt-view-cards-icons-bookmarks")?e.createBookmarksLink($(this)):$(this).hasClass("gt-view-cards-icons-pin")||$(this).hasClass("gt-view-cards-icons-share")?e.toggleGtActive($(this)):$(this).hasClass("gt-view-cards-icons-share")&&e.createShareLink($(this))})},this.createShareLink=function(t){t.removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.toggleGtActive=function(t){(t=$(t)).removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.createVisitLink=function(t){t.closest(".gt-view-cards-inner").attr("data-href")&&t.on("click",function(){e.addVisitedLink(t)})},this.addVisitedLink=function(t){alert("послали данные на бек",t.closest(".gt-view-cards-inner").attr("data-href")),t.toggleClass("gt-active")},this.addBookmark=function(t,e,i){try{window.external.AddFavorite(e,i)}catch(s){try{window.sidebar.addPanel(i,e,"")}catch(s){if("object"==typeof opera)return t.title=i,t.url=e,!0;alert("Нажмите Ctrl-D чтобы добавить страницу в закладки")}}return!1},this.createBookmarksLink=function(t){var i=(t=$(t)).closest(".gt-view-cards-inner");(i=$(i)).attr("data-href")||i.attr("data-href",window.location.href),i.attr("data-bookmark")||i.attr("data-bookmark","GoToTrip"),t.attr("href",i.attr("data-href")),t.attr("rel","sidebar"),t.on("click",function(s){s.preventDefault(),e.addBookmark(t,i.attr("data-href"),i.attr("data-bookmark"))})},$("*").is(".gt-view-cards-icons-bookmarks")&&e.createBookmarksLink(),$("*").is(".gt-view-cards-icons-item")&&e.createIconsItemsClick(),$("#gt-enter-form-facebook").on("click",function(){e.socialEnter("facebook")}),$("#gt-enter-form-twitter").on("click",function(){e.socialEnter("twitter")}),$("#gt-enter-form-google").on("click",function(){e.socialEnter("google")}),$("#gt-reg-form-facebook").on("click",function(){e.socialRegistration("facebook")}),$("#gt-reg-form-twitter").on("click",function(){e.socialRegistration("twitter")}),$("#gt-reg-form-google").on("click",function(){e.socialRegistration("google")}),this.socialRegistration=function(t){alert("Регистрация через "+t)},this.socialEnter=function(t){alert("Вход через "+t)},this.cutNews=function(t){var e,i,s,n=t.parent(),o=n.height(),a=t.find("p");n.children().each(function(){o-=$(this).outerHeight(!0)}),o=o+t.height()-20,a.each(function(){(e=$(this).outerHeight(!0))<o?o-=e:o?(i=Math.floor($(this).text().length*o/e),s=$(this).text().substring(0,i),$(this).text(s+"..."),o=0):$(this).css("display","none")})},$("div").is(".js-news-cut")&&($(".js-news-cut").each(function(){e.cutNews($(this))}),n.resize(function(){$(".js-news-cut").each(function(){e.cutNews($(this))})})),this.cutReadMoreSlider=function(){$(".gt-read-more-slider-text-inner").each(function(){e.cutting($(this),160)})},this.cutting=function(t,e){var i=t.text();i.length>e&&(i=i.slice(0,e)+"...",t.text(i))},$("p").is(".gt-read-more-slider-text-inner")&&e.cutReadMoreSlider(),s.ready(function(){e.footerHeight(),e.deskTopMenuScroll()}),n.scroll(function(){e.upPageButton(),$(".gt-header-menu").is(":visible")&&e.deskTopMenuScroll()}),n.resize(function(){e.deskTopMenuScroll(),e.footerHeight(),d.hasClass("gt-open")&&e.mobileMenuClose(),$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){$(this).removeClass("gt-width"),$(this).removeClass("gt-height"),e.imgHolderFunc($(this))})}),$(window).on("load",function(){$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){e.imgHolderFunc($(this))})}),i.on("click",function(t){})};var goToTrip=new GoToTrip;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJHb1RvVHJpcCIsInNjcm9sbFRocm90dGxlciIsInNjcm9sbFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VsZiIsImZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uIiwic2hhZG93Iiwic2hvd0FydGlkbGVTaGFkb3ciLCJ0aGlzIiwiYm9keSIsIiQiLCJkb2N1bWVudCIsImRvYyIsImRvY1dpbmRvdyIsIndpbmRvdyIsImJvZHlQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0b2tlbjM2MCIsInRva2VuNjY3IiwidG9rZW43NjgiLCJ0b2tlbjEwMjQiLCJndEhlYWRlciIsImd0Rm9vdGVyIiwiZ3RXcmFwcGVyIiwidXBCdXR0b24iLCJtb2JpbGVNZW51U3dpdGNoIiwiZW50ZXJCdXR0b24iLCJlbnRlcldyYXBwZXIiLCJlbnRlckZvcm0iLCJlbnRlckNob3NlIiwiZW50ZXJDbG9zZSIsImZpeEJvZHkiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJjc3MiLCJwb3NpdGlvbiIsInVuZml4Qm9keSIsImZvb3RlckhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwiZGVza1RvcE1lbnVTY3JvbGwiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFnZVVwIiwiYW5pbWF0ZSIsInVwUGFnZUJ1dHRvbiIsIm9uIiwibW9iaWxlTWVudUNsb3NlIiwibW9iaWxlTWVudU9wZW4iLCJoYXNDbGFzcyIsIm9wZW5FbnRlckZvcm0iLCJjbG9zZUVudGVyRm9ybSIsImNsb3NlUmVzdG9yZVBhc3MiLCJjaGFuZ2VFbnRlclJlZ2lzdHJhdGlvbiIsImV2ZW50IiwidGFyZ2V0IiwiYXR0ciIsIm9wZW5SZXN0b3JlUGFzcyIsImVhY2giLCJzZXRCYWNrZ3JvdW5kIiwicGF0aCIsImlzIiwiaW1nSG9sZGVyRnVuYyIsImVsIiwiaG9sZGVyQ29uc3QiLCJvdXRlcldpZHRoIiwiaW1nIiwiZmluZCIsImNyZWF0ZVNsaWRlciIsImN1cnJTbGlkZXIiLCJjcmVhdGVBcnJvd3MiLCJpbm5lckNvdW50Iiwic2NyZWVuQ29uc3QiLCJudW1Jbm5lciIsIm51bVBhbmVsIiwiaHRtbCIsIm9uZU1vdmVGdW5jdGlvbiIsInNob3dOdW0iLCJhcnJvd3NSZWFkeSIsImRlc3Ryb3lBcnJvd3MiLCJjbG9uZSIsIm9mZiIsImJ1bCIsIm51bSIsImN1cnJQb3NpdGlvbiIsImZhZGUiLCJmYWRlU2xpZGVyTW92ZSIsInRyYW0iLCJjb25zb2xlIiwibG9nIiwiY29udGFpbmVyIiwiYmFzZVdpZHRoIiwiYXBwZW5kIiwiY2hpbGRyZW4iLCJmaXJzdCIsInJlbW92ZSIsInByZXBlbmQiLCJsYXN0IiwidHJhbVNsaWRlck1vdmUiLCJkb3RzIiwiYWxsRG90cyIsInRyYW1BbmltYXRpb24iLCJlcSIsImluZGV4IiwiaW5uZXIiLCJ0ZXh0IiwiY3JlYXRlVG91Y2giLCJpbml0aWFsUG9pbnQiLCJmaW5hbFBvaW50IiwiZSIsIm9yaWdpbmFsRXZlbnQiLCJNYXRoIiwiYWJzIiwidG91Y2hlcyIsInBhZ2VYIiwiY2hhbmdlZFRvdWNoZXMiLCJkZXN0cm95VG91Y2giLCJmaW5kU2NyZWVuQ29uc3QiLCJwYXJzZUludCIsInNldEJhc2VXaWR0aCIsInNsaWRlclRpbWVPdXQiLCJsZW5ndGgiLCJhcnJvdyIsImhhc0Nsb25lIiwibmF2Iiwic3BhbnMiLCJpIiwiY3JlYXRlRG90cyIsImNsaWNrUG9zaXRpb24iLCJib2R5V3JhcHBlciIsInNob3ciLCJjbG9uZVNsaWRlciIsImhpZGUiLCJkZXN0cm95Q2xvbmVTbGlkZXIiLCJjcmVhdGVDbG9uZVNsaWRlciIsInBhcmVudCIsInJlc2l6ZSIsIm1hbmFnZUd0QWN0aXZlVWxNZW51IiwidGFnTmFtZSIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsInRhYlNsaWRlciIsImN1cnJUYWJzIiwidGFiU2xpZGVyQWN0aW9uIiwidGFiU2xpZGVyQWN0aXZhdGlvbiIsInNldFBsYXllcnMiLCJ0YWciLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsInNyYyIsImxhc3RTY3JpcHRUYWciLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiY3VycmVudFBsYXllciIsImFkZFlvdVR1YmUiLCJpbml0aWFsaXplIiwicGxheWVyIiwibXV0ZSIsInBsYXlWaWRlbyIsInBsYXlGdWxsU2NyZWVuIiwicGF1c2VWaWRlbyIsImlmcmFtZSIsInJlcXVlc3RGdWxsU2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJ3ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiIsImJpbmQiLCJlbElkIiwiWVQiLCJQbGF5ZXIiLCJ3aWR0aCIsInZpZGVvSWQiLCJwbGF5ZXJWYXJzIiwicGxheWxpc3QiLCJjb2xvciIsImxvb3AiLCJhdXRvcGxheSIsImV2ZW50cyIsIm9uUmVhZHkiLCJ0YWJsZSIsInRhYmxlUGFyZW50IiwidGFibGVQYXJlbnRUb3AiLCJ0YWJsZVBhcmVudEJvdHRvbSIsInRhYmxlV2lkdGgiLCJ3aW5kb3dUb3AiLCJ3aWRvd0hlaWdodCIsImNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSIsImVsSGVpZ2h0Iiwid2luZG93UG9zaXRpb24iLCJ4IiwiY3VyclNoYWRvdyIsInNjcm9sbCIsInNldEN1cnJUaW1lIiwiY3VyclRpbWUiLCJzZXRJbnRlcnZhbCIsImRhdGUiLCJEYXRlIiwic2V0VVRDSG91cnMiLCJob3VycyIsImdldEhvdXJzIiwibWludXRlcyIsImdldE1pbnV0ZXMiLCJ3ZWVrZGF5IiwiZ2V0RGF5IiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJpbm5lclNjcm9sbCIsInRpbnlzY3JvbGxiYXIiLCJ0aHVtYlNpemUiLCJ3aGVlbFNwZWVkIiwiY3JlYXRlSWNvbnNJdGVtc0NsaWNrIiwiY3JlYXRlVmlzaXRMaW5rIiwiY3JlYXRlQm9va21hcmtzTGluayIsInRvZ2dsZUd0QWN0aXZlIiwiY3JlYXRlU2hhcmVMaW5rIiwidG9nZ2xlQ2xhc3MiLCJhZGRWaXNpdGVkTGluayIsImFsZXJ0IiwiYWRkQm9va21hcmsiLCJhIiwidXJsIiwidGl0bGUiLCJleHRlcm5hbCIsIkFkZEZhdm9yaXRlIiwic2lkZWJhciIsImFkZFBhbmVsIiwib3BlcmEiLCJsb2NhdGlvbiIsImhyZWYiLCJzb2NpYWxFbnRlciIsInNvY2lhbFJlZ2lzdHJhdGlvbiIsInRva2VuIiwiY3V0TmV3cyIsImN1cnJIZWlnaHQiLCJjdXR0aW5nTGVuZ2h0IiwibmV3VGV4dCIsIm1heEhlaWdodCIsImN1dHRpbmdFbCIsImZsb29yIiwic3Vic3RyaW5nIiwiY3V0UmVhZE1vcmVTbGlkZXIiLCJjdXR0aW5nIiwibmV3c1RleHQiLCJzbGljZSIsInJlYWR5IiwiZ29Ub1RyaXAiXSwibWFwcGluZ3MiOiJBQUtBQSxTQUFXLFdBc3ZCSCxTQUFTQyxJQUNBQyxJQUNEQSxFQUFnQkMsV0FBVyxXQUN2QkQsRUFBZ0IsS0FDaEJFLEVBQUtDLGdDQUNEQyxHQUNBRixFQUFLRyx1QkExdkJ6QixJQUFJSCxFQUFPSSxLQUNQQyxFQUFPQyxFQUFFQyxTQUFTRixNQUNsQkcsRUFBTUYsRUFBRUMsVUFDUkUsRUFBWUgsRUFBRUksUUFDZEMsR0FDSUMsS0FBSyxFQUNMQyxNQUFNLEdBRVZDLEVBQVdSLEVBQUUsY0FFYlMsR0FEV1QsRUFBRSxjQUNGQSxFQUFFLGVBQ2JVLEVBQVdWLEVBQUUsY0FDYlcsRUFBWVgsRUFBRSxlQUVkWSxHQURZWixFQUFFLGVBQ0hBLEVBQUUsV0FDYmEsRUFBV2IsRUFBRSxVQUNiYyxFQUFZZCxFQUFFLGVBQ2RlLEVBQVdmLEVBQUUsVUFDYmdCLEVBQW1CaEIsRUFBRSwwQkFDckJpQixFQUFjakIsRUFBRSxhQUNoQmtCLEVBQWVsQixFQUFFLDRCQUNqQm1CLEVBQVluQixFQUFFLG9CQUNkb0IsRUFBYXBCLEVBQUUsMEJBQ2ZxQixFQUFhckIsRUFBRSwwQkFrdEJuQixHQWp0QkFGLEtBQUt3QixRQUFVLFdBQ1BqQixFQUFhQyxLQUFPRCxFQUFhRSxPQUNyQ0YsRUFBYUMsSUFBTUosRUFBSXFCLFlBQ3ZCbEIsRUFBYUUsS0FB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QUFHbkssR0FBTyxNQUNwQ3BCLEVBQUcwQyxLQUFLNEksS0FNWjVPLEVBQUUsS0FBS29ELEdBQUcsb0NBQ1YxRCxFQUFLZ1Asb0JBS1J4TyxFQUFJNE8sTUFBTSxXQUVOcFAsRUFBS2tDLGVBQ0xsQyxFQUFLcUMsc0JBSVQ1QixFQUFVa0wsT0FBTyxXQUNiM0wsRUFBSzBDLGVBR0RwQyxFQUFFLG1CQUFtQm9ELEdBQUcsYUFDeEIxRCxFQUFLcUMsc0JBTWI1QixFQUFVNEgsT0FBTyxXQUNickksRUFBS3FDLG9CQUNMckMsRUFBS2tDLGVBRURoQixFQUFTNEIsU0FBUyxZQUFZOUMsRUFBSzRDLGtCQUVuQ3RDLEVBQUUsT0FBT29ELEdBQUcsdUJBQ1pwRCxFQUFFLHNCQUFzQmlELEtBQUssV0FDekJqRCxFQUFFRixNQUFNbUMsWUFBWSxZQUNwQmpDLEVBQUVGLE1BQU1tQyxZQUFZLGFBQ3BCdkMsRUFBSzJELGNBQWNyRCxFQUFFRixXQUlqQ0UsRUFBRUksUUFBUWlDLEdBQUcsT0FBUSxXQUNickMsRUFBRSxPQUFPb0QsR0FBRyx1QkFDWnBELEVBQUUsc0JBQXNCaUQsS0FBSyxXQUN6QnZELEVBQUsyRCxjQUFjckQsRUFBRUYsV0FLakNDLEVBQUtzQyxHQUFHLFFBQVMsU0FBVVEsT0FPL0IsSUFBSWtNLFNBQVcsSUFBSXpQIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v0YTRg9C90LrRhtC40Y8sINC+0L/RgNC10LTQtdC70Y/RjtGJ0LDRjyDQt9Cw0YDQtdCz0LjRgdGC0LLQuNGA0L7QstCw0L3QvdGL0Lkg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC40LvQuCDQvdC10YJcclxuXHJcbi8vINC/0YDQtdC00YPRgdC80L7RgtGA0LXRgtGMINCy0YvRhdC+0LQg0LjQtyDQsNC60LrQsNGD0L3RgtCwXHJcblxyXG5cclxuR29Ub1RyaXAgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgIGJvZHkgPSAkKGRvY3VtZW50LmJvZHkpLFxyXG4gICAgICAgIGRvYyA9ICQoZG9jdW1lbnQpLFxyXG4gICAgICAgIGRvY1dpbmRvdyA9ICQod2luZG93KSxcclxuICAgICAgICBib2R5UG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHRvcDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxlZnQ6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2tlbjM2MCA9ICQoXCIjZ3QtaXMtMzYwXCIpLFxyXG4gICAgICAgIHRva2VuNDgwID0gJChcIiNndC1pcy00ODBcIiksXHJcbiAgICAgICAgdG9rZW42NjcgPSAkKFwiI2d0LWlzLTY2N1wiKSxcclxuICAgICAgICB0b2tlbjc2OCA9ICQoXCIjZ3QtaXMtNzY4XCIpLFxyXG4gICAgICAgIHRva2VuMTAyNCA9ICQoXCIjZ3QtaXMtMTAyNFwiKSxcclxuICAgICAgICB0b2tlbjEyMzEgPSAkKFwiI2d0LWlzLTEyMzFcIiksXHJcbiAgICAgICAgZ3RIZWFkZXIgPSAkKFwiaGVhZGVyXCIpLFxyXG4gICAgICAgIGd0Rm9vdGVyID0gJChcImZvb3RlclwiKSxcclxuICAgICAgICBndFdyYXBwZXIgPSAkKFwiI2d0LXdyYXBwZXJcIiksXHJcbiAgICAgICAgdXBCdXR0b24gPSAkKFwiI2d0LXVwXCIpLFxyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2ggPSAkKFwiI2d0LW1vYmlsZS1tZW51LXN3aXRjaFwiKSxcclxuICAgICAgICBlbnRlckJ1dHRvbiA9ICQoJy5ndC1lbnRlcicpLFxyXG4gICAgICAgIGVudGVyV3JhcHBlciA9ICQoJyNndC1oZWFkZXItZW50ZXItd3JhcHBlcicpLFxyXG4gICAgICAgIGVudGVyRm9ybSA9ICQoJyNndC1oZWFkZXItZW50ZXInKSxcclxuICAgICAgICBlbnRlckNob3NlID0gJCgnI2d0LWhlYWRlci1lbnRlci1jaG9zZScpLFxyXG4gICAgICAgIGVudGVyQ2xvc2UgPSAkKCcjZ3QtaGVhZGVyLWVudGVyLWNsb3NlJyk7XHJcbiAgICB0aGlzLmZpeEJvZHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGJvZHlQb3NpdGlvbi50b3AgfHwgYm9keVBvc2l0aW9uLmxlZnQpIHJldHVybjtcclxuICAgICAgICBib2R5UG9zaXRpb24udG9wID0gZG9jLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi5sZWZ0ID0gYm9keS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIGJvZHkuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcclxuICAgICAgICAgICAgbGVmdDogYm9keVBvc2l0aW9uLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIHRvcDogLTEgKiBib2R5UG9zaXRpb24udG9wICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnVuZml4Qm9keSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBib2R5LmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcIlwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBcIlwiLFxyXG4gICAgICAgICAgICB0b3A6IFwiXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2Muc2Nyb2xsVG9wKGJvZHlQb3NpdGlvbi50b3ApO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi50b3AgPSBmYWxzZTtcclxuICAgICAgICBib2R5UG9zaXRpb24ubGVmdCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmZvb3RlckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm9vdGVySGVpZ2h0ID0gZ3RGb290ZXIub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICBpZiAoZm9vdGVySGVpZ2h0ID4gZG9jV2luZG93LmhlaWdodCgpIC0gNTApIHtcclxuICAgICAgICAgICAgZ3RGb290ZXIuY3NzKFwicG9zaXRpb25cIiwgXCJzdGF0aWNcIik7XHJcbiAgICAgICAgICAgIGd0V3JhcHBlci5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5jc3MoXCJwb3NpdGlvblwiLCBcInN0YXRpY1wiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBndEZvb3Rlci5jc3MoXCJwb3NpdGlvblwiLCBcIlwiKTtcclxuICAgICAgICAgICAgdXBCdXR0b24uY3NzKFwicG9zaXRpb25cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIGd0V3JhcHBlci5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIGd0Rm9vdGVyLm91dGVySGVpZ2h0KCkgKyBcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmRlc2tUb3BNZW51U2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChkb2NXaW5kb3cuc2Nyb2xsVG9wKCkgPiBndEhlYWRlci5vdXRlckhlaWdodCgpKSB7XHJcbiAgICAgICAgICAgIGd0SGVhZGVyLmFkZENsYXNzKFwiZ3QtaGVhZGVyLXNjcm9sbGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGd0SGVhZGVyLnJlbW92ZUNsYXNzKFwiZ3QtaGVhZGVyLXNjcm9sbGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wYWdlVXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcImJvZHksaHRtbFwiKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LDgwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy51cFBhZ2VCdXR0b24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID4gMzApIHtcclxuICAgICAgICAgICAgdXBCdXR0b24uYWRkQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLnJlbW92ZUNsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdXBCdXR0b24ub24oXCJjbGlja1wiLCBzZWxmLnBhZ2VVcCk7XHJcbiAgICB0aGlzLm1vYmlsZU1lbnVDbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnVuZml4Qm9keSgpO1xyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2gucmVtb3ZlQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgIGd0SGVhZGVyLnJlbW92ZUNsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMubW9iaWxlTWVudU9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5maXhCb2R5KCk7XHJcbiAgICAgICAgZ3RIZWFkZXIuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2guYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIG1vYmlsZU1lbnVTd2l0Y2gub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC1vcGVuXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW9iaWxlTWVudUNsb3NlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVNZW51T3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5vcGVuRW50ZXJGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVudGVyV3JhcHBlci5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoc2hvdyk7XHJcbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcclxuICAgICAgICAgICAgJCgnI2d0LWhlYWRlci1yZWdpc3RlcmVkJykuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgZW50ZXJGb3JtLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgIGVudGVyQ2xvc2UuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNsb3NlRW50ZXJGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVudGVyQ2xvc2UucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBlbnRlckZvcm0ucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAkKCcjZ3QtaGVhZGVyLXJlZ2lzdGVyZWQnKS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIHNlbGYuY2xvc2VSZXN0b3JlUGFzcygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoaGlkZSwgNzUwKTtcclxuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xyXG4gICAgICAgICAgICBlbnRlcldyYXBwZXIucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNoYW5nZUVudGVyUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGVudGVyRm9ybS5oYXNDbGFzcygkKGV2ZW50LnRhcmdldCkuYXR0cihcImNsYXNzXCIpKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGVudGVyRm9ybS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1lbnRlclwiKS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1yZWdpc3RyYXRpb25cIikuYWRkQ2xhc3MoJChldmVudC50YXJnZXQpLmF0dHIoXCJjbGFzc1wiKSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMub3BlblJlc3RvcmVQYXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJyNndC1lbnRlci1wYXNzLXJlc3RvcmUtd3JhcHBlcicpLmFkZENsYXNzKCdndC1vcGVuJylcclxuICAgIFxyXG4gICAgfTtcclxuICAgIHRoaXMuY2xvc2VSZXN0b3JlUGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcjZ3QtZW50ZXItcGFzcy1yZXN0b3JlLXdyYXBwZXInKS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGVudGVyQnV0dG9uLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykub24oJ2NsaWNrJywgc2VsZi5vcGVuRW50ZXJGb3JtKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGVudGVyQ2xvc2Uub24oJ2NsaWNrJywgc2VsZi5jbG9zZUVudGVyRm9ybSk7XHJcbiAgICBcclxuICAgIGVudGVyQ2hvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgc2VsZi5jaGFuZ2VFbnRlclJlZ2lzdHJhdGlvbihldmVudCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgJCgnI2d0LWVudGVyLWZvcm0tcmVzdG9yZS1wYXNzJykub24oJ2NsaWNrJyxzZWxmLm9wZW5SZXN0b3JlUGFzcyk7XHJcbiAgICAkKCcjZ3QtZW50ZXItcGFzcy1yZXN0b3JlLXN1Ym1pdCcpLm9uKCdjbGljaycsc2VsZi5jbG9zZVJlc3RvcmVQYXNzKTtcclxuXHJcbiAgICB0aGlzLnNldEJhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltZ0hvbGRlcnMgPSAkKFwiLmd0LWltZy1ob2xkZXJcIik7XHJcbiAgICAgICAgaW1nSG9sZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmF0dHIoXCJkYXRhLWJnXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1iZ1wiKTtcclxuICAgICAgICAgICAgaWYgKHRva2VuNjY3LmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICd1cmwoXCIuL2ltZy9iYWNrZ3JvdW5kcy9waG9uZS8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0b2tlbjEwMjQuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybChcIi4vaW1nL2JhY2tncm91bmRzL3RhYmxldC8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAndXJsKFwiLi9pbWcvYmFja2dyb3VuZHMvZGVza3RvcC8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuaW1nSG9sZGVyRnVuYyA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICQoZWwpLnJlbW92ZUNsYXNzKFwiZ3Qtd2lkdGhcIik7XHJcbiAgICAgICAgJChlbCkucmVtb3ZlQ2xhc3MoXCJndC1oZWlnaHRcIik7XHJcbiAgICAgICAgJChlbCkucmVtb3ZlQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgICAgIHZhciBob2xkZXJDb25zdCA9IGVsLm91dGVySGVpZ2h0KCkgLyBlbC5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgIGltZyA9IGVsLmZpbmQoJ2ltZycpLFxyXG4gICAgICAgICAgICBpbWdDb25zdCA9IGltZy5vdXRlckhlaWdodCgpIC8gaW1nLm91dGVyV2lkdGgoKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChpbWdDb25zdCA+IGhvbGRlckNvbnN0KSB7XHJcbiAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3Qtd2lkdGhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyXCIpKSB7XHJcbiAgICAgICAgc2VsZi5zZXRCYWNrZ3JvdW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZXIgPSBmdW5jdGlvbiAoY3VyclNsaWRlciwgcG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgc2xpZGVyVGltZU91dCxcclxuICAgICAgICAgICAgc2NyZWVuQ29uc3QgPSAxLFxyXG4gICAgICAgICAgICBiYXNlV2lkdGgsXHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGlubmVyID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1pbm5lclwiKSxcclxuICAgICAgICAgICAgY29udGFpbmVyID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1jb250YWluZXJcIiksXHJcbiAgICAgICAgICAgIGlubmVyQ291bnQgPSBpbm5lci5sZW5ndGgsXHJcbiAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IHBvc2l0aW9uIHx8IDAsXHJcbiAgICAgICAgICAgIGFycm93ID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1oYXMtYXJyb3dcIiksXHJcbiAgICAgICAgICAgIGRvdHMgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWhhcy1kb3RzXCIpLFxyXG4gICAgICAgICAgICBudW1QYW5lbCA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItbnVtXCIpLFxyXG4gICAgICAgICAgICB0cmFtID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci10cmFtXCIpLFxyXG4gICAgICAgICAgICB0cmFtQW5pbWF0aW9uID0gY3VyclNsaWRlci5hdHRyKCdkYXRhLWR1cmF0aW9uJykgfHwgMzAwLFxyXG4gICAgICAgICAgICBmYWRlID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1mYWRlXCIpLFxyXG4gICAgICAgICAgICBoYXNDbG9uZSA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItaGFzLWNsb25lXCIpO1xyXG4gICAgICAgIGlmIChmYWRlKSB7XHJcbiAgICAgICAgICAgIGZhZGVTbGlkZXJNb3ZlKHBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgZmluZFNjcmVlbkNvbnN0KCk7XHJcbiAgICAgICAgICAgIHNldEJhc2VXaWR0aCgpO1xyXG4gICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyb3cpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJndC1zbGlkZXItYXJyb3ctaG9sZGVyXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIGNyZWF0ZUFycm93cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG90cykge1xyXG4gICAgICAgICAgICBjcmVhdGVEb3RzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgY3JlYXRlVG91Y2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhhc0Nsb25lKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUNsb25lTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2xvbmVMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZCgnLmd0LXNsaWRlci1pbm5lci1jb3ZlcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ2xvbmVTbGlkZXIoJCh0aGlzKS5wYXJlbnQoKS5pbmRleCgpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcnJvd3MoKSB7XHJcbiAgICAgICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBudW1Jbm5lciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bVBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtSW5uZXIgPSAnPGRpdiBjbGFzcz1cImd0LXNsaWRlci1hcnJvdy1udW1cIj48aSBjbGFzcz1cImd0LXNsaWRlci1udW0tY3VyclwiPjwvaT48aT7QuNC3PC9pPjxpIGNsYXNzPVwiZ3Qtc2xpZGVyLW51bS1tYXhcIj48L2k+PC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIikuaHRtbChcclxuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3MgPSBcImd0LXNsaWRlci1hcnJvdyBsZWZ0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L3NwYW4+XCIgKyBudW1Jbm5lciArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzID0gXCJndC1zbGlkZXItYXJyb3cgcmlnaHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFycm93c0xpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgc2hvd051bSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95QXJyb3dzKGNsb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGNsb25lIHx8IGN1cnJTbGlkZXI7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIubGVmdFwiKS5vZmYoKTtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5yaWdodFwiKS5vZmYoKTtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5ndC1zbGlkZXItYXJyb3ctaG9sZGVyXCIpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQXJyb3dzTGlzdGVuZXJzKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIubGVmdFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbihmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIucmlnaHRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAobnVtUGFuZWwpIHNob3dOdW0oKVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZURvdHMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLW5hdlwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB2YXIgbmF2ID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXZcIiksXHJcbiAgICAgICAgICAgICAgICBzcGFucyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzcGFucyArPSBcIjxzcGFuIGRhdGEtbnVtID0gXCIgKyBpICsgXCI+PC9zcGFuPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5hdi5odG1sKHNwYW5zKTtcclxuICAgICAgICAgICAgbmF2LmZpbmQoXCJzcGFuXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItbmF2IHNwYW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24odHJ1ZSwgKyQodGhpcykuYXR0cihcImRhdGEtbnVtXCIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gb25lTW92ZUZ1bmN0aW9uKGJ1bCwgbnVtKSB7XHJcbiAgICAgICAgICAgIGlmIChudW0gfHwgbnVtID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gPSBudW07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBlbHNlIGlmIChidWwpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbisrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChmYWRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID4gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gPSBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3Q7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZhZGVTbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodHJhbSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0JywgY3VyclBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY3NzKCdsZWZ0JywgKC0oY3VyclBvc2l0aW9uIC0gMikgKiBiYXNlV2lkdGgpICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZChjb250YWluZXIuY2hpbGRyZW4oKS5maXJzdCgpLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlbigpLmZpcnN0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3MoJ2xlZnQnLCAoLShjdXJyUG9zaXRpb24gKyAyKSAqIGJhc2VXaWR0aCkgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIucHJlcGVuZChjb250YWluZXIuY2hpbGRyZW4oKS5sYXN0KCkuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuKCkubGFzdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAobnVtUGFuZWwpIHNob3dOdW0oKTtcclxuICAgICAgICAgICAgaWYgKGRvdHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhbGxEb3RzID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXYgc3BhblwiKTtcclxuICAgICAgICAgICAgICAgIGFsbERvdHMucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAkKGFsbERvdHNbY29udGFpbmVyLmZpbmQoJy5ndC1vcGVuJykuYXR0cignZGF0YS1jb3VudCcpXSkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiB0cmFtU2xpZGVyTW92ZSgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFuaW1hdGUoe2xlZnQ6IC1jdXJyUG9zaXRpb24gKiBiYXNlV2lkdGh9LCB0cmFtQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuKCkuZXEoY3VyclBvc2l0aW9uKS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZmFkZVNsaWRlck1vdmUocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gcG9zaXRpb24gfHwgY3VyclBvc2l0aW9uO1xyXG4gICAgICAgICAgICAkKGlubmVyKS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgICAgICAkKGlubmVyW2luZGV4XSkuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzaG93TnVtKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoJy5ndC1zbGlkZXItbnVtLWN1cnInKS50ZXh0KCsoY29udGFpbmVyLmZpbmQoJy5ndC1vcGVuJykuYXR0cignZGF0YS1jb3VudCcpKSArIDEpO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoJy5ndC1zbGlkZXItbnVtLW1heCcpLnRleHQoaW5uZXJDb3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlVG91Y2goKSB7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsUG9pbnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgZmluYWxQb2ludCA9IDA7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIub24oXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFBvaW50ID0gTWF0aC5hYnMoZS50b3VjaGVzWzBdLnBhZ2VYKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidG91Y2hzdGFydFwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIub24oXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgICAgIGZpbmFsUG9pbnQgPSBNYXRoLmFicyhlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYKTtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhpbml0aWFsUG9pbnQgLSBmaW5hbFBvaW50KSA+IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxQb2ludCA+IGZpbmFsUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95VG91Y2goY2xvbmUpIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gY2xvbmUgfHwgY3VyclNsaWRlcjtcclxuICAgICAgICAgICAgZWwub2ZmKCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZFNjcmVlbkNvbnN0KCkge1xyXG4gICAgICAgICAgICBpZiAoY3VyclNsaWRlci5hdHRyKFwiZGF0YS1jb3VudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgc2NyZWVuQ29uc3QgPSBwYXJzZUludChjdXJyU2xpZGVyLmF0dHIoXCJkYXRhLWNvdW50XCIpKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRva2VuNzY4KS5pcyhcIjp2aXNpYmxlXCIpKSBzY3JlZW5Db25zdCA9IDM7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0b2tlbjY2NykuaXMoXCI6dmlzaWJsZVwiKSkgc2NyZWVuQ29uc3QgPSAyO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodG9rZW4zNjApLmlzKFwiOnZpc2libGVcIikpIHNjcmVlbkNvbnN0ID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEJhc2VXaWR0aCgpIHtcclxuICAgICAgICAgICAgYmFzZVdpZHRoID0gY3VyclNsaWRlci5vdXRlcldpZHRoKCkgLyBzY3JlZW5Db25zdDtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1jb250YWluZXJcIikub3V0ZXJXaWR0aCgoaW5uZXJDb3VudCArIDEpICogYmFzZVdpZHRoKTtcclxuICAgICAgICAgICAgaW5uZXIuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm91dGVyV2lkdGgoYmFzZVdpZHRoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jb3VudCcsICQodGhpcykuaW5kZXgoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lU2xpZGVyKGNsaWNrUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIjZ3QtY2xvbmVcIikpIHJldHVybjtcclxuICAgICAgICAgICAgc2VsZi5maXhCb2R5KCk7XHJcbiAgICAgICAgICAgIHZhciBib2R5V3JhcHBlciA9ICQoXCIjZ3QtYm9keS13cmFwcGVyXCIpO1xyXG4gICAgICAgICAgICBib2R5V3JhcHBlci5hcHBlbmQoJzxkaXYgaWQgPSBcImd0LWNsb25lLXdyYXBwZXJcIiAgIGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBpZCA9IFwiZ3QtY2xvbmVcIiBjbGFzcz1cImd0LXNsaWRlciBndC1zbGlkZXItY2xvbmUgZ3Qtc2xpZGVyLWZhZGUgZ3Qtc2xpZGVyLW51bSAgZ3Qtc2xpZGVyLWhhcy1hcnJvd1wiPjxkaXYgaWQgPSBcImd0LWNsb25lLWNsb3NlXCIgY2xhc3MgPSBcImd0LXNsaWRlci1jbG9uZS1jbG9zZVwiPjwvZGl2PjxkaXYgIGlkID0gXCJndC1jbG9uZS1jb250YWluZXJcIiBjbGFzcz1cImd0LXNsaWRlci1jb250YWluZXJcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgYm9keVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgICAgICB2YXIgY2xvbmVTbGlkZXIgPSAkKCcjZ3QtY2xvbmUnKSxcclxuICAgICAgICAgICAgICAgIGlubmVycyA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItaW5uZXJcIikuY2xvbmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlubmVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub3V0ZXJXaWR0aCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZ3QtY2xvbmUtY29udGFpbmVyJykuYXBwZW5kKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZXIoY2xvbmVTbGlkZXIsIGNsaWNrUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lBcnJvd3MoY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICBkZXN0cm95VG91Y2goY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9mZigpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLXdyYXBwZXJcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtYm9keS13cmFwcGVyXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgc2VsZi51bmZpeEJvZHkoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvLy8vLy8vLy8vcmVzaXplU2xpZGVyXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplU2xpZGVyKCkge1xyXG4gICAgICAgICAgICBpZiAoIXNsaWRlclRpbWVPdXQpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlclRpbWVPdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXJUaW1lT3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemVGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZG9jV2luZG93LnJlc2l6ZShyZXNpemVTbGlkZXIpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplRnVuYygpIHtcclxuICAgICAgICAgICAgZGVzdHJveVRvdWNoKCk7XHJcbiAgICAgICAgICAgIGlmICh0cmFtKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5kU2NyZWVuQ29uc3QoKTtcclxuICAgICAgICAgICAgICAgIHNldEJhc2VXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgcmVzaXplTW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXJyb3dzUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3lBcnJvd3MoKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFycm93cygpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlVG91Y2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiByZXNpemVNb3ZlKCkge1xyXG4gICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID4gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0KVxyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0O1xyXG4gICAgICAgICAgICBpZiAoaW5uZXJDb3VudCA8PSBzY3JlZW5Db25zdCkgY3VyclBvc2l0aW9uID0gMDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3Qtc2xpZGVyXCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1zbGlkZXJcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlU2xpZGVyKCQodGhpcykpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB0aGlzLm1hbmFnZUd0QWN0aXZlVWxNZW51ID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKGVsLnRhZ05hbWUgIT0gXCJsaVwiKVxyXG4gICAgICAgICAgICBlbCA9ICQoZWwpLmNsb3Nlc3QoXCJsaVwiKTtcclxuICAgIFxyXG4gICAgICAgICQoZWwpLmNsb3Nlc3QoJChcInVsXCIpKS5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIC8vIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1odW5kcmV0LW1lbnVcIikpIHtcclxuICAgIC8vICAgICAkKFwiLmd0LWh1bmRyZXQtbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgLy8gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LWJ1dHRvbi1tZW51XCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1idXR0b24tbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1tZW51LW5ld3NcIikpIHtcclxuICAgICAgICAkKFwiLmd0LW1lbnUtbmV3c1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMudGFiU2xpZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJTbGlkZXJzID0gJChcIi5ndC10YWJzXCIpO1xyXG4gICAgICAgIHRhYlNsaWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyVGFicyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGN1cnJUYWJzLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudGFiU2xpZGVyQWN0aW9uKGN1cnJUYWJzLCAkKHRoaXMpLmluZGV4KCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLnRhYlNsaWRlckFjdGl2YXRpb24oY3VyclRhYnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy50YWJTbGlkZXJBY3RpdmF0aW9uID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAvLyAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5oaWRlKCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpWzBdKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAvLyAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpWzBdKS5zaG93KCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKVswXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnRhYlNsaWRlckFjdGlvbiA9IGZ1bmN0aW9uIChlbCwgbnVtKSB7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAvLyAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5oaWRlKCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpW251bV0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIC8vICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbbnVtXSkuc2hvdygpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbbnVtXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXRhYnNcIikpIHtcclxuICAgICAgICBzZWxmLnRhYlNsaWRlcigpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICAgIHRhZy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgICAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9wbGF5ZXJfYXBpXCI7XHJcbiAgICAgICAgdmFyIGxhc3RTY3JpcHRUYWcgPSAkKFwic2NyaXB0XCIpWyQoXCJzY3JpcHRcIikubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgbGFzdFNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YWcsIGxhc3RTY3JpcHRUYWcpO1xyXG4gICAgICAgIHZhciBndFZpZGVvcyA9ICQoXCIuZ3QtdmlkZW9cIik7XHJcbiAgICAgICAgZ3RWaWRlb3MuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGxheWVyID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgY3VycmVudFBsYXllci5maW5kKFwiLmd0LXZpZGVvLXN3aXRjaFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkZFlvdVR1YmUoY3VycmVudFBsYXllcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5hZGRZb3VUdWJlID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIHBsYXllcixcclxuICAgICAgICAgICAgZWxJZCA9IFwiZ3QtdmlkZW8tXCIgKyBlbC5pbmRleCgpO1xyXG4gICAgXHJcbiAgICAgICAgZWwuZmluZChcIi5ndC12aWRlby1zd2l0Y2hcIikuaGlkZSgnc2xvdycpO1xyXG4gICAgXHJcbiAgICAgICAgZWxcclxuICAgICAgICAgICAgLmZpbmQoXCIuZ3QtdmlkZW8taW5uZXJcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBlbElkKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJndC12aWRlby1mb3JlZ3JvdW5kXCIpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbiAgICAgICAgICAgIHBsYXllciA9IG5ldyBZVC5QbGF5ZXIoZWxJZCwge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDYwMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICAgICAgICAgICAgdmlkZW9JZDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgIHBsYXllclZhcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5bGlzdDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDFcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxla2I6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udHJvbHM6IDBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBvblJlYWR5OiBpbml0aWFsaXplXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIubXV0ZSgpO1xyXG4gICAgICAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiZ3QtdmlkZW8tb25cIik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tdW5jb3ZlclwiKS5vbignY2xpY2snLCBwbGF5RnVsbFNjcmVlbik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGF1c2VcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGxheVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcGxheUZ1bGxTY3JlZW4oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5RnVsbFNjcmVlbicpO1xyXG4gICAgICAgICAgICB2YXIgaWZyYW1lID0gZWwuZmluZCgnaWZyYW1lJylbMF07XHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0RnVsbFNjcmVlbiA9IGlmcmFtZS5yZXF1ZXN0RnVsbFNjcmVlbiB8fCBpZnJhbWUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgaWZyYW1lLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuO1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuLmJpbmQoaWZyYW1lKSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtdmlkZW9cIikpIHtcclxuICAgICAgICBzZWxmLnNldFBsYXllcnMoKTtcclxuICAgIH1cclxuICAgIHRoaXMuZml4QXJ0aWNsZVNjcm9sbFRhYmxlUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlID0gJChcIi5ndC1hcnRpY2xlLXRhYmxlLXdyYXBwZXJcIiksXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50ID0gdGFibGUucGFyZW50KCksXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50VG9wID0gdGFibGVQYXJlbnQucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50Qm90dG9tID0gdGFibGVQYXJlbnRUb3AgKyB0YWJsZVBhcmVudC5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICB0YWJsZVdpZHRoID0gdGFibGUub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICB3aW5kb3dUb3AgPSBkb2Muc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgIHdpZG93SGVpZ2h0ID0gZG9jV2luZG93Lm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgLy8gdGFibGVQYXJlbnQuYWRkQ2xhc3MoJ3Rlc3QnKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRhYmxlUGFyZW50VG9wKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3dUb3ApO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3ArOTAgPiB3aW5kb3dUb3ApIHtcclxuICAgICAgICAgICAgaWYgKHRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNsYXNzKFwiZ3QtZml4ZWRcIik7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKHRhYmxlUGFyZW50VG9wIDwgd2luZG93VG9wICsgOTApIHtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZS5oYXNDbGFzcyhcImd0LWZpeGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRhYmxlLm9mZnNldCgpLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRhYmxlV2lkdGhcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGFibGUuYWRkQ2xhc3MoXCJndC1maXhlZFwiKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHdpbmRvd1RvcCArIHdpZG93SGVpZ2h0ID4gdGFibGVQYXJlbnRCb3R0b20pIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmFkZENsYXNzKFwiZ3QtZml4ZWQtYm90dG9tXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2xhc3MoXCJndC1maXhlZC1ib3R0b21cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGFibGUuaGFzQ2xhc3MoXCJndC1maXhlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICh3aWRvd0hlaWdodCAtIDEyMCkgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSgpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQoXCJkaXZcIikuaXMoXCIuZ3QtYXJ0aWNsZVwiKSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBhcnRpY2xlcyA9ICQoXCIuZ3QtYXJ0aWNsZVwiKSxcclxuICAgICAgICAgICAgaHRtbCA9IFwiXCI7XHJcbiAgICAgICAgYXJ0aWNsZXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz1cclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzID0gXCJndC1hcnRpY2xlLXNjcm9sbFwiPjxkaXYgY2xhc3MgPSBcImd0LWFydGljbGUtc2Nyb2xsLXNoYWRvd1wiPjwvZGl2PjxwPicgK1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiaDJcIilcclxuICAgICAgICAgICAgICAgICAgICAudGV4dCgpICtcclxuICAgICAgICAgICAgICAgIFwiPC9wPjwvZGl2PlwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIjZ3QtYXJ0aWNsZS1zY3JvbGwtdGFibGVcIikuaHRtbChodG1sKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuc2hvd0FydGlkbGVTaGFkb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5ndC1hcnRpY2xlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkKHRoaXMpKTtcclxuICAgICAgICAgICAgdmFyIGN1cnJQb3NpdGlvbiA9ICQodGhpcykucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICBlbEhlaWdodCA9ICQodGhpcykub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIHdpbmRvd1Bvc2l0aW9uID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IHdpbmRvd1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHggPSAod2luZG93UG9zaXRpb24gLSBjdXJyUG9zaXRpb24pIC8gZWxIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPiAxKSB4ID0gMTtcclxuICAgICAgICAgICAgdmFyIGN1cnJTaGFkb3cgPSAkKFwiLmd0LWFydGljbGUtc2Nyb2xsXCIpWyQodGhpcykuaW5kZXgoKV07XHJcbiAgICAgICAgICAgICQoY3VyclNoYWRvdylcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmd0LWFydGljbGUtc2Nyb2xsLXNoYWRvd1wiKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcIndpZHRoXCIsIHggKiAxMDAgKyBcIiVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKCdkaXYnKS5pcygnLmd0LWFydGljbGUtdGFibGUtd3JhcHBlcicpKSB7XHJcbiAgICAgICAgdmFyIHNoYWRvdyA9IGZhbHNlLFxyXG4gICAgICAgICAgICBzY3JvbGxUaW1lb3V0O1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCQoJ2RpdicpLmlzKFwiLmd0LWFydGljbGUtc2Nyb2xsLXRhYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIHNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlQXJ0aWN0ZVNjcm9sbFRhYmxlKCk7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0FydGlkbGVTaGFkb3coKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbFRocm90dGxlcigpIHtcclxuICAgICAgICAgICAgaWYgKCFzY3JvbGxUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXhBcnRpY2xlU2Nyb2xsVGFibGVQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGFkb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93QXJ0aWRsZVNoYWRvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGRvY1dpbmRvdy5zY3JvbGwoc2Nyb2xsVGhyb3R0bGVyKTtcclxuICAgICAgICBkb2NXaW5kb3cucmVzaXplKHNjcm9sbFRocm90dGxlcik7XHJcbiAgICBcclxuICAgIFxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRDdXJyVGltZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJUaW1lKCk7XHJcbiAgICAgICAgdmFyIHQgPSBzZXRJbnRlcnZhbChzZWxmLmN1cnJUaW1lLCAzMDAwMCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jdXJyVGltZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiLmd0LWN1cnItdGltZVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKFwiZGF0YS1nbXRcIikpIGRhdGUuc2V0VVRDSG91cnMoKyQodGhpcykuYXR0cihcImRhdGEtZ210XCIpKTtcclxuICAgICAgICAgICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICAgICAgd2Vla2RheSA9IGRhdGUuZ2V0RGF5KCksXHJcbiAgICAgICAgICAgICAgICBkYXkgPSBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpLFxyXG4gICAgICAgICAgICAgICAgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgIHdlZWtkYXlzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIFwi0JLQvtGB0LrRgNC10YHQtdC90YzQtVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0J/QvtC90LXQtNC10LvRjNC90LjQulwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0JLRgtC+0YDQvdC40LpcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCh0YDQtdC00LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCn0LXRgtCy0LXRgNCzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQn9GP0YLQvdC40YbQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KHRg9Cx0LHQvtGC0LBcIlxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgXCLRj9C90LLQsNGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItGE0LXQstGA0LDQu9GPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvNCw0YDRgtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQsNC/0YDQtdC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC80LDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LjRjtC90Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC40Y7Qu9GPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQsNCy0LPRg9GB0YLQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0YHQtdC90YLRj9Cx0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0L7QutGC0Y/QsdGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC90L7Rj9Cx0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LTQtdC60LDQsdGA0Y9cIlxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgaWYgKGhvdXJzIDwgMTApIGhvdXJzID0gXCIwXCIgKyBob3VycztcclxuICAgICAgICAgICAgaWYgKG1pbnV0ZXMgPCAxMCkgbWludXRlcyA9IFwiMFwiICsgbWludXRlcztcclxuICAgICAgICAgICAgd2Vla2RheSA9IHdlZWtkYXlzW3dlZWtkYXldO1xyXG4gICAgICAgICAgICBtb250aCA9IG1vbnRoZXNbbW9udGhdO1xyXG4gICAgICAgICAgICBpZiAoJChcIi5ndC1jdXJyLXRpbWUtdGltZVwiKSlcclxuICAgICAgICAgICAgICAgICQoXCIuZ3QtY3Vyci10aW1lLXRpbWVcIikuaHRtbChob3VycyArIFwiOlwiICsgbWludXRlcyk7XHJcbiAgICAgICAgICAgIGlmICgkKFwiLmd0LWN1cnItdGltZS1kYXRlXCIpKVxyXG4gICAgICAgICAgICAgICAgJChcIi5ndC1jdXJyLXRpbWUtZGF0ZVwiKS5odG1sKFxyXG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXkgKyBcIiwgXCIgKyBkYXkgKyBcIiBcIiArIG1vbnRoICsgXCIgXCIgKyB5ZWFyXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1jdXJyLXRpbWVcIikpIHtcclxuICAgICAgICBzZWxmLnNldEN1cnJUaW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbm5lclNjcm9sbCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmIChlbC5maW5kKFwiLm92ZXJ2aWV3XCIpLmhlaWdodCgpID4gZWwuaGVpZ2h0KClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJpc1Njcm9sbGVkXCIpO1xyXG4gICAgICAgICAgICBlbC50aW55c2Nyb2xsYmFyKHtcclxuICAgICAgICAgICAgICAgIHRodW1iU2l6ZTogNDAsXHJcbiAgICAgICAgICAgICAgICB3aGVlbFNwZWVkOiAxMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW5uZXItc2Nyb2xsXCIpKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgJCgnLmd0LWlubmVyLXNjcm9sbCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbm5lclNjcm9sbCgkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgfVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vZG9lcyBub3Qgd29ya1xyXG5cclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUljb25zSXRlbXNDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiLmd0LXZpZXctY2FyZHMtaWNvbnMtaXRlbVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLXZpc2l0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZVZpc2l0TGluaygkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtYm9va21hcmtzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJvb2ttYXJrc0xpbmsoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtcGluXCIpIHx8XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy1zaGFyZVwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYudG9nZ2xlR3RBY3RpdmUoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLXNoYXJlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZVNoYXJlTGluaygkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVTaGFyZUxpbmsgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBlbC5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZWwudG9nZ2xlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnRvZ2dsZUd0QWN0aXZlID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIGVsID0gJChlbCk7XHJcbiAgICAgICAgZWwucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgZWwub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGVsLnRvZ2dsZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZVZpc2l0TGluayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmICghZWwuY2xvc2VzdChcIi5ndC12aWV3LWNhcmRzLWlubmVyXCIpLmF0dHIoXCJkYXRhLWhyZWZcIikpIHJldHVybjtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5hZGRWaXNpdGVkTGluayhlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuYWRkVmlzaXRlZExpbmsgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBhbGVydChcclxuICAgICAgICAgICAgXCLQv9C+0YHQu9Cw0LvQuCDQtNCw0L3QvdGL0LUg0L3QsCDQsdC10LpcIixcclxuICAgICAgICAgICAgZWwuY2xvc2VzdChcIi5ndC12aWV3LWNhcmRzLWlubmVyXCIpLmF0dHIoXCJkYXRhLWhyZWZcIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGVsLnRvZ2dsZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmFkZEJvb2ttYXJrID0gZnVuY3Rpb24gKGEsIHVybCwgdGl0bGUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB3aW5kb3cuZXh0ZXJuYWwuQWRkRmF2b3JpdGUodXJsLCB0aXRsZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNpZGViYXIuYWRkUGFuZWwodGl0bGUsIHVybCwgXCJcIik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3BlcmEgPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGEudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICBhLnVybCA9IHVybDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLQndCw0LbQvNC40YLQtSBDdHJsLUQg0YfRgtC+0LHRiyDQtNC+0LHQsNCy0LjRgtGMINGB0YLRgNCw0L3QuNGG0YMg0LIg0LfQsNC60LvQsNC00LrQuFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVCb29rbWFya3NMaW5rID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIGVsID0gJChlbCk7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsLmNsb3Nlc3QoXCIuZ3Qtdmlldy1jYXJkcy1pbm5lclwiKTtcclxuICAgICAgICBwYXJlbnQgPSAkKHBhcmVudCk7XHJcbiAgICAgICAgaWYgKCFwYXJlbnQuYXR0cihcImRhdGEtaHJlZlwiKSlcclxuICAgICAgICAgICAgcGFyZW50LmF0dHIoXCJkYXRhLWhyZWZcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIGlmICghcGFyZW50LmF0dHIoXCJkYXRhLWJvb2ttYXJrXCIpKSBwYXJlbnQuYXR0cihcImRhdGEtYm9va21hcmtcIiwgXCJHb1RvVHJpcFwiKTtcclxuICAgICAgICBlbC5hdHRyKFwiaHJlZlwiLCBwYXJlbnQuYXR0cihcImRhdGEtaHJlZlwiKSk7XHJcbiAgICAgICAgZWwuYXR0cihcInJlbFwiLCBcInNpZGViYXJcIik7XHJcbiAgICAgICAgZWwub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHNlbGYuYWRkQm9va21hcmsoXHJcbiAgICAgICAgICAgICAgICBlbCxcclxuICAgICAgICAgICAgICAgIHBhcmVudC5hdHRyKFwiZGF0YS1ocmVmXCIpLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50LmF0dHIoXCJkYXRhLWJvb2ttYXJrXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC12aWV3LWNhcmRzLWljb25zLWJvb2ttYXJrc1wiKSkge1xyXG4gICAgICAgIHNlbGYuY3JlYXRlQm9va21hcmtzTGluaygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC12aWV3LWNhcmRzLWljb25zLWl0ZW1cIikpIHtcclxuICAgICAgICBzZWxmLmNyZWF0ZUljb25zSXRlbXNDbGljaygpO1xyXG4gICAgfVxyXG4gICAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC90LDQu9C40YfQuNC1IC0g0L7QsdGB0YPQtNC40YLRjCDRgSDQsdC10LrQvtC8INC/0L7QstC10LTQtdCz0YLQtVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgJCgnI2d0LWVudGVyLWZvcm0tZmFjZWJvb2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcignZmFjZWJvb2snKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS10d2l0dGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsRW50ZXIoJ3R3aXR0ZXInKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1nb29nbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcignZ29vZ2xlJylcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tZmFjZWJvb2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ2ZhY2Vib29rJylcclxuICAgIH0pO1xyXG4gICAgJCgnI2d0LXJlZy1mb3JtLXR3aXR0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ3R3aXR0ZXInKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tZ29vZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsUmVnaXN0cmF0aW9uKCdnb29nbGUnKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMuc29jaWFsUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBcclxuICAgICAgICBhbGVydChcItCg0LXQs9C40YHRgtGA0LDRhtC40Y8g0YfQtdGA0LXQtyBcIiArIHRva2VuKVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zb2NpYWxFbnRlciA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgXHJcbiAgICAgICAgYWxlcnQoXCLQktGF0L7QtCDRh9C10YDQtdC3IFwiICsgdG9rZW4pXHJcbiAgICBcclxuICAgIH07XHJcbiAgIHRoaXMuY3V0TmV3cyA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudCgpLFxyXG4gICAgICAgICAgIG1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKSxcclxuICAgICAgICAgICBjdXR0aW5nRWwgPSBlbC5maW5kKCdwJyksXHJcbiAgICAgICAgICAgY3VyckhlaWdodCxcclxuICAgICAgICAgICBjdXR0aW5nTGVuZ2h0LFxyXG4gICAgICAgICAgIG5ld1RleHQ7XHJcbiAgICAgICBwYXJlbnQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBtYXhIZWlnaHQgLT0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgICAgIH0pO1xyXG4gICBcclxuICAgICAgIG1heEhlaWdodCA9IG1heEhlaWdodCArIGVsLmhlaWdodCgpIC0yMDtcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgICAgIGN1dHRpbmdFbC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBjdXJySGVpZ2h0ID0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgXHJcbiAgICAgICAgICAgaWYoIGN1cnJIZWlnaHQgPCBtYXhIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICBtYXhIZWlnaHQgLT1jdXJySGVpZ2h0XHJcbiAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICBpZighbWF4SGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgIGN1dHRpbmdMZW5naHQgPSAgTWF0aC5mbG9vcigkKHRoaXMpLnRleHQoKS5sZW5ndGggKiBtYXhIZWlnaHQgLyBjdXJySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgIG5ld1RleHQgPSAkKHRoaXMpLnRleHQoKS5zdWJzdHJpbmcoMCwgY3V0dGluZ0xlbmdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBjdXRMYXN0U3ltYm9sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRleHQoKG5ld1RleHQpICsgJy4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG4gICAgICAgLy9cclxuICAgICAgIC8vIGZ1bmN0aW9uIGN1dExhc3RTeW1ib2woKSB7XHJcbiAgICAgICAvLyAgICAgdmFyIHN0ckxlbmd0aCA9IG5ld1RleHQubGVuZ3RoO1xyXG4gICAgICAgLy8gICAgIGlmKG5ld1RleHQuY2hhckF0KHN0ckxlbmd0aCAtIDEpID09ICcgJyl7XHJcbiAgICAgICAvLyAgICAgICAgIG5ld1RleHQ9IG5ld1RleHQuc3Vic3RyaW5nKDAsIHN0ckxlbmd0aCAtIDEpO1xyXG4gICAgICAgLy8gICAgIH1lbHNle1xyXG4gICAgICAgLy8gICAgICAgICBuZXdUZXh0ID0gbmV3VGV4dC5zdWJzdHJpbmcoMCwgc3RyTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAvLyAgICAgICAgIHNldFRpbWVvdXQoY3V0TGFzdFN5bWJvbClcclxuICAgICAgIC8vICAgICB9XHJcbiAgICAgICAvLyB9XHJcbiAgIFxyXG4gICB9O1xyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICBpZiAoJChcImRpdlwiKS5pcyhcIi5qcy1uZXdzLWN1dFwiKSkge1xyXG4gICAgICAgJChcIi5qcy1uZXdzLWN1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBzZWxmLmN1dE5ld3MoJCh0aGlzKSk7XHJcbiAgICAgICB9KTtcclxuICAgXHJcbiAgIFxyXG4gICAgICAgZG9jV2luZG93LnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgJChcIi5qcy1uZXdzLWN1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgc2VsZi5jdXROZXdzKCQodGhpcykpO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgfSk7XHJcbiAgIH1cclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgdGhpcy5jdXRSZWFkTW9yZVNsaWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgIHZhciBjdXR0aW5ncyA9ICQoXCIuZ3QtcmVhZC1tb3JlLXNsaWRlci10ZXh0LWlubmVyXCIpO1xyXG4gICAgICAgY3V0dGluZ3MuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgc2VsZi5jdXR0aW5nKCQodGhpcyksIDE2MCk7XHJcbiAgICAgICB9KTtcclxuICAgfTtcclxuICAgXHJcbiAgIHRoaXMuY3V0dGluZyA9IGZ1bmN0aW9uIChlbCwgbnVtKSB7XHJcbiAgICAgICB2YXIgbmV3c1RleHQgPSBlbC50ZXh0KCk7XHJcbiAgICAgICBpZiAobmV3c1RleHQubGVuZ3RoID4gbnVtKSB7XHJcbiAgICAgICAgICAgbmV3c1RleHQgPSBuZXdzVGV4dC5zbGljZSgwLCBudW0pICsgXCIuLi5cIjtcclxuICAgICAgICAgICBlbC50ZXh0KG5ld3NUZXh0KTtcclxuICAgICAgIH1cclxuICAgfTtcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgaWYgKCQoXCJwXCIpLmlzKFwiLmd0LXJlYWQtbW9yZS1zbGlkZXItdGV4dC1pbm5lclwiKSkge1xyXG4gICAgICAgc2VsZi5jdXRSZWFkTW9yZVNsaWRlcigpO1xyXG4gICB9XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgZG9jLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgICAgIHNlbGYuZm9vdGVySGVpZ2h0KCk7Ly9fZm9vdGVyX2hlaWdodC5qc1xyXG4gICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTsvL19kZXNjdG9wX2hlYWRlcl9mdW5jLmpzXHJcbiAgICBcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBkb2NXaW5kb3cuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnVwUGFnZUJ1dHRvbigpOy8vX3VwX2J1dHRvbi5qc1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAoJChcIi5ndC1oZWFkZXItbWVudVwiKS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTsvL19kZXNjdG9wX2hlYWRlcl9mdW5jLmpzXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBkb2NXaW5kb3cucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRlc2tUb3BNZW51U2Nyb2xsKCk7XHJcbiAgICAgICAgc2VsZi5mb290ZXJIZWlnaHQoKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChndEhlYWRlci5oYXNDbGFzcyhcImd0LW9wZW5cIikpIHNlbGYubW9iaWxlTWVudUNsb3NlKCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyLWFic1wiKSkge1xyXG4gICAgICAgICAgICAkKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LXdpZHRoXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikpIHtcclxuICAgICAgICAgICAgJChcIi5ndC1pbWctaG9sZGVyLWFic1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYm9keS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudC50YXJnZXQpO1xyXG4gICAgXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG52YXIgZ29Ub1RyaXAgPSBuZXcgR29Ub1RyaXAoKTsiXX0=
