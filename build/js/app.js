GoToTrip=function(){function t(){w||(w=setTimeout(function(){w=null,e.fixArticleScrollTablePosition(),k&&e.showArtidleShadow()}))}var e=this,i=$(document.body),s=$(document),n=$(window),o={top:!1,left:!1},a=$("#gt-is-360"),r=($("#gt-is-480"),$("#gt-is-667")),c=$("#gt-is-768"),l=$("#gt-is-1024"),d=($("#gt-is-1231"),$("header")),g=$("footer"),h=$("#gt-wrapper"),u=$("#gt-up"),f=$("#gt-mobile-menu-switch"),v=$(".gt-enter"),m=$("#gt-header-enter-wrapper"),p=$("#gt-header-enter"),b=$("#gt-header-enter-chose"),C=$("#gt-header-enter-close");if(this.fixBody=function(){o.top||o.left||(o.top=s.scrollTop(),o.left=i.offset().left,i.css({position:"fixed",left:o.left+"px",top:-1*o.top+"px"}))},this.unfixBody=function(){i.css({position:"",left:"",top:""}),s.scrollTop(o.top),o.top=!1,o.left=!1},this.footerHeight=function(){g.outerHeight()>n.height()-50?(g.css("position","static"),h.css("margin-bottom",""),u.css("position","static")):(g.css("position",""),u.css("position",""),h.css("margin-bottom",g.outerHeight()+"px"))},this.deskTopMenuScroll=function(){n.scrollTop()>d.outerHeight()?d.addClass("gt-header-scrolled"):d.removeClass("gt-header-scrolled")},this.pageUp=function(){return $("body,html").animate({scrollTop:0},800),!1},this.upPageButton=function(){$(document).scrollTop()>30?u.addClass("gt-visible"):u.removeClass("gt-visible")},u.on("click",e.pageUp),this.mobileMenuClose=function(){e.unfixBody(),f.removeClass("gt-open"),d.removeClass("gt-open")},this.mobileMenuOpen=function(){e.fixBody(),d.addClass("gt-open"),f.addClass("gt-open")},f.on("click",function(){$(this).hasClass("gt-open")?e.mobileMenuClose():e.mobileMenuOpen()}),this.openEnterForm=function(){m.addClass("gt-open"),setTimeout(function(){p.addClass("gt-open"),C.addClass("gt-open")})},this.closeEnterForm=function(){C.removeClass("gt-open"),p.removeClass("gt-open"),setTimeout(function(){m.removeClass("gt-open")},750)},this.changeEnterRegistration=function(t){p.hasClass($(t.target).attr("class"))||p.removeClass("gt-chosen-enter").removeClass("gt-chosen-registration").addClass($(t.target).attr("class"))},v.each(function(){$(this).on("click",e.openEnterForm)}),C.on("click",e.closeEnterForm),b.on("click",function(t){e.changeEnterRegistration(t)}),this.setBackground=function(){$(".gt-img-holder").each(function(){if($(this).attr("data-bg")){var t=$(this).attr("data-bg");r.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/phone/'+t+'")'):l.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/tablet/'+t+'")'):$(this).css("background-image",'url("./img/backgrounds/desktop/'+t+'")')}})},this.imgHolderFunc=function(t){$(t).removeClass("gt-width"),$(t).removeClass("gt-height"),$(t).removeClass("gt-visible");var e=t.outerHeight()/t.outerWidth(),i=t.find("img");i.outerHeight()/i.outerWidth()>e?$(t).addClass("gt-width"):$(t).addClass("gt-height"),$(t).addClass("gt-visible")},$("div").is(".gt-img-holder")&&e.setBackground(),this.createSlider=function(t,i){function s(){if(T>C){var e="";H&&(e='<div class="gt-slider-arrow-num"><i class="gt-slider-num-curr"></i><i>из</i><i class="gt-slider-num-max"></i></div>'),t.find(".gt-slider-arrow-holder").html('<span class = "gt-slider-arrow left"></span>'+e+'<span class = "gt-slider-arrow right"></span>'),t.find(".left").on("click",function(){l(!1)}),t.find(".right").on("click",function(){l(!0)}),H&&h(),h()}w=!0}function o(e){var i=e||t;i.find(".left").off(),i.find(".right").off(),i.find(".gt-slider-arrow-holder").html(""),w=!1}function l(e,i){if(i||0===i?y=i:e?y++:y--,E&&(y>T-C&&(y=0),y<0&&(y=T-C),g()),A&&(console.log("start",y),y>T-C&&(x.css("left",-(y-2)*b+"px"),x.append(x.children().first().clone()),x.children().first().remove(),y--),y<0?(x.css("left",-(y+2)*b+"px"),x.prepend(x.children().last().clone()),x.children().last().remove(),y++,d()):d()),H&&h(),M){var s=t.find(".gt-slider-nav span");s.removeClass("gt-active"),$(s[x.find(".gt-open").attr("data-count")]).addClass("gt-active")}}function d(){x.children().removeClass("gt-open"),x.animate({left:-y*b},B),x.children().eq(y).addClass("gt-open")}function g(t){var e=t||y;$(k).removeClass("gt-open"),$(k[e]).addClass("gt-open")}function h(){t.find(".gt-slider-num-curr").text(+x.find(".gt-open").attr("data-count")+1),t.find(".gt-slider-num-max").text(T)}function u(){var e=0,i=0;t.on("touchstart",function(t){var i=t.originalEvent;e=Math.abs(i.touches[0].pageX),console.log("touchstart")}),t.on("touchend",function(t){var s=t.originalEvent;i=Math.abs(s.changedTouches[0].pageX),Math.abs(e-i)>50&&l(e>i?!0:!1)})}function f(e){(e||t).off()}function v(){t.attr("data-count")&&(C=parseInt(t.attr("data-count")),$(c).is(":visible")&&(C=3),$(r).is(":visible")&&(C=2),$(a).is(":visible")&&(C=1))}function m(){b=t.outerWidth()/C,t.find(".gt-slider-container").outerWidth((T+1)*b),k.each(function(){$(this).outerWidth(b),$(this).attr("data-count",$(this).index())})}var p,b,C=1,w=!1,k=t.find(".gt-slider-inner"),x=t.find(".gt-slider-container"),T=k.length,y=i||0,S=t.hasClass("gt-slider-has-arrow"),M=t.hasClass("gt-slider-has-dots"),H=t.hasClass("gt-slider-num"),A=t.hasClass("gt-slider-tram"),B=t.attr("data-duration")||300,E=t.hasClass("gt-slider-fade"),F=t.hasClass("gt-slider-has-clone");E&&g(i),A&&(v(),m(),d()),S&&(t.append('<div class="gt-slider-arrow-holder"></div>'),s()),M&&function(){t.append('<div class="gt-slider-nav"></div>');for(var e=t.find(".gt-slider-nav"),i="",s=0;s<T;s++)i+="<span data-num = "+s+"></span>";e.html(i),e.find("span").first().addClass("gt-active"),t.find(".gt-slider-nav span").on("click",function(){l(!0,+$(this).attr("data-num"))})}(),T>C&&u(),F&&t.find(".gt-slider-inner-cover").each(function(){$(this).on("click",function(){!function(i){if(!$("div").is("#gt-clone")){e.fixBody();var s=$("#gt-body-wrapper");s.append('<div id = "gt-clone-wrapper"   class="container"><div id = "gt-clone" class="gt-slider gt-slider-clone gt-slider-fade gt-slider-num  gt-slider-has-arrow"><div id = "gt-clone-close" class = "gt-slider-clone-close"></div><div  id = "gt-clone-container" class="gt-slider-container"></div></div></div>'),s.show();var n=$("#gt-clone");t.find(".gt-slider-inner").clone(!0).each(function(){$(this).outerWidth(""),$("#gt-clone-container").append($(this))}),e.createSlider(n,i),$("#gt-clone-close").on("click",function(){!function(t){o(t),f(t),$("#gt-clone-close").off(),$("#gt-clone-wrapper").remove(),$("#gt-body-wrapper").hide(),e.unfixBody()}(n)})}}($(this).parent().index())})}),n.resize(function(){p||(p=setTimeout(function(){p=null,f(),A&&(v(),m(),y>T-C&&(y=T-C),T<=C&&(y=0),d()),w&&(o(),s()),T>C&&u()},132))})},$("div").is(".gt-slider")&&$(".gt-slider").each(function(){e.createSlider($(this))}),this.manageGtActiveUlMenu=function(t){"li"!=t.tagName&&(t=$(t).closest("li")),$(t).closest($("ul")).find("li").removeClass("gt-active"),$(t).addClass("gt-active")},$("*").is(".gt-button-menu")&&$(".gt-button-menu").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-menu-news")&&$(".gt-menu-news").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),this.tabSlider=function(){$(".gt-tabs").each(function(){var t=$(this);t.find(".gt-tabs-button").each(function(){$(this).on("click",function(){e.tabSliderAction(t,$(this).index())})}),e.tabSliderActivation(t)})},this.tabSliderActivation=function(t){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-button")[0]).addClass("active"),$(t.find(".gt-tabs-main")[0]).addClass("active")},this.tabSliderAction=function(t,e){$(t.find(".gt-tabs-button")).removeClass("active"),$(t.find(".gt-tabs-main")).removeClass("active"),$(t.find(".gt-tabs-button")[e]).addClass("active"),$(t.find(".gt-tabs-main")[e]).addClass("active")},$("div").is(".gt-tabs")&&e.tabSlider(),this.setPlayers=function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/player_api";var i=$("script")[$("script").length-1];i.parentNode.insertBefore(t,i);$(".gt-video").each(function(){var t=$(this);t.find(".gt-video-switch").on("click",function(){$(this).addClass("gt-open"),t.addClass("gt-open"),e.addYouTube(t)})})},this.addYouTube=function(t){function e(){s.mute(),s.playVideo(),t.addClass("gt-video-on"),t.find(".gt-video-uncover").on("click",i),t.find(".gt-video-pause").on("click",function(){s.pauseVideo()}),t.find(".gt-video-play").on("click",function(){s.playVideo()})}function i(){console.log("playFullScreen");var e=t.find("iframe")[0],i=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;i&&i.bind(e)()}var s,n="gt-video-"+t.index();t.find(".gt-video-switch").hide("slow"),t.find(".gt-video-inner").attr("id",n).addClass("gt-video-foreground"),s=new YT.Player(n,{width:600,height:400,videoId:t.attr("data-youtube"),playerVars:{playlist:t.attr("data-youtube"),color:"white",loop:1,autoplay:1},events:{onReady:e}})},$("div").is(".gt-video")&&e.setPlayers(),this.fixArticleScrollTablePosition=function(){var t=$(".gt-article-table-wrapper"),e=t.parent(),i=e.position().top,o=i+e.outerHeight(),a=t.outerWidth(),r=s.scrollTop(),c=n.outerHeight();console.log(i),console.log(r),i+90>r&&t.hasClass("gt-fixed")&&(t.removeClass("gt-fixed"),t.css({left:"",width:""})),i<r+90&&(t.hasClass("gt-fixed")||(t.css({left:t.offset().left+"px",width:a}),t.addClass("gt-fixed")),r+c>o?t.addClass("gt-fixed-bottom"):t.removeClass("gt-fixed-bottom")),t.hasClass("gt-fixed")?t.css({height:c-120+"px"}):t.css({height:""})},this.createArticteScrollTable=function(){if($("div").is(".gt-article")){var t="";$(".gt-article").each(function(){t+='<div class = "gt-article-scroll"><div class = "gt-article-scroll-shadow"></div><p>'+$(this).find("h2").text()+"</p></div>"}),$("#gt-article-scroll-table").html(t)}},this.showArtidleShadow=function(){$(".gt-article").each(function(){var t=$(this).position().top,e=$(this).outerHeight(),i=$(document).scrollTop(),s=0;(s=t>i?0:(i-t)/e)>1&&(s=1);var n=$(".gt-article-scroll")[$(this).index()];$(n).find(".gt-article-scroll-shadow").css("width",100*s+"%")})},$("div").is(".gt-article-table-wrapper")){var w,k=!1;$("div").is(".gt-article-scroll-table")&&(k=!0,e.createArticteScrollTable(),e.showArtidleShadow()),n.scroll(t),n.resize(t)}this.setCurrTime=function(){e.currTime();setInterval(e.currTime,3e4)},this.currTime=function(){$(".gt-curr-time").each(function(){var t=new Date;$(this).attr("data-gmt")&&t.setUTCHours(+$(this).attr("data-gmt"));var e=t.getHours(),i=t.getMinutes(),s=t.getDay(),n=t.getDate(),o=t.getMonth(),a=t.getFullYear();e<10&&(e="0"+e),i<10&&(i="0"+i),s=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],o=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][o],$(".gt-curr-time-time")&&$(".gt-curr-time-time").html(e+":"+i),$(".gt-curr-time-date")&&$(".gt-curr-time-date").html(s+", "+n+" "+o+" "+a)})},$("div").is(".gt-curr-time")&&e.setCurrTime(),this.innerScroll=function(t){t.find(".overview").height()>t.height()&&(t.addClass("isScrolled"),t.tinyscrollbar({thumbSize:40,wheelSpeed:10}))},$("div").is(".gt-inner-scroll")&&$(".gt-inner-scroll").each(function(){e.innerScroll($(this))}),this.createIconsItemsClick=function(){$(".gt-view-cards-icons-item").each(function(){$(this).hasClass("gt-view-cards-icons-visit")?e.createVisitLink($(this)):$(this).hasClass("gt-view-cards-icons-bookmarks")?e.createBookmarksLink($(this)):$(this).hasClass("gt-view-cards-icons-pin")||$(this).hasClass("gt-view-cards-icons-share")?e.toggleGtActive($(this)):$(this).hasClass("gt-view-cards-icons-share")&&e.createShareLink($(this))})},this.createShareLink=function(t){t.removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.toggleGtActive=function(t){(t=$(t)).removeClass("gt-active"),t.on("click",function(){t.toggleClass("gt-active")})},this.createVisitLink=function(t){t.closest(".gt-view-cards-inner").attr("data-href")&&t.on("click",function(){e.addVisitedLink(t)})},this.addVisitedLink=function(t){alert("послали данные на бек",t.closest(".gt-view-cards-inner").attr("data-href")),t.toggleClass("gt-active")},this.addBookmark=function(t,e,i){try{window.external.AddFavorite(e,i)}catch(s){try{window.sidebar.addPanel(i,e,"")}catch(s){if("object"==typeof opera)return t.title=i,t.url=e,!0;alert("Нажмите Ctrl-D чтобы добавить страницу в закладки")}}return!1},this.createBookmarksLink=function(t){var i=(t=$(t)).closest(".gt-view-cards-inner");(i=$(i)).attr("data-href")||i.attr("data-href",window.location.href),i.attr("data-bookmark")||i.attr("data-bookmark","GoToTrip"),t.attr("href",i.attr("data-href")),t.attr("rel","sidebar"),t.on("click",function(s){s.preventDefault(),e.addBookmark(t,i.attr("data-href"),i.attr("data-bookmark"))})},$("*").is(".gt-view-cards-icons-bookmarks")&&e.createBookmarksLink(),$("*").is(".gt-view-cards-icons-item")&&e.createIconsItemsClick(),$("#gt-enter-form-facebook").on("click",function(){e.socialEnter("facebook")}),$("#gt-enter-form-twitter").on("click",function(){e.socialEnter("twitter")}),$("#gt-enter-form-google").on("click",function(){e.socialEnter("google")}),$("#gt-reg-form-facebook").on("click",function(){e.socialRegistration("facebook")}),$("#gt-reg-form-twitter").on("click",function(){e.socialRegistration("twitter")}),$("#gt-reg-form-google").on("click",function(){e.socialRegistration("google")}),this.socialRegistration=function(t){alert("Регистрация через "+t)},this.socialEnter=function(t){alert("Вход через "+t)},this.cutNews=function(t){var e,i,s,n=t.parent(),o=n.height(),a=t.find("p");n.children().each(function(){o-=$(this).outerHeight(!0)}),o=o+t.height()-20,a.each(function(){(e=$(this).outerHeight(!0))<o?o-=e:o?(i=Math.floor($(this).text().length*o/e),s=$(this).text().substring(0,i),$(this).text(s+"..."),o=0):$(this).css("display","none")})},$("div").is(".js-news-cut")&&($(".js-news-cut").each(function(){e.cutNews($(this))}),n.resize(function(){$(".js-news-cut").each(function(){e.cutNews($(this))})})),this.cutReadMoreSlider=function(){$(".gt-read-more-slider-text-inner").each(function(){e.cutting($(this),160)})},this.cutting=function(t,e){var i=t.text();i.length>e&&(i=i.slice(0,e)+"...",t.text(i))},$("p").is(".gt-read-more-slider-text-inner")&&e.cutReadMoreSlider(),s.ready(function(){e.footerHeight(),e.deskTopMenuScroll()}),n.scroll(function(){e.upPageButton(),$(".gt-header-menu").is(":visible")&&e.deskTopMenuScroll()}),n.resize(function(){e.deskTopMenuScroll(),e.footerHeight(),d.hasClass("gt-open")&&e.mobileMenuClose(),$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){$(this).removeClass("gt-width"),$(this).removeClass("gt-height"),e.imgHolderFunc($(this))})}),$(window).on("load",function(){$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){e.imgHolderFunc($(this))})}),i.on("click",function(t){})};var goToTrip=new GoToTrip;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJHb1RvVHJpcCIsInNjcm9sbFRocm90dGxlciIsInNjcm9sbFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VsZiIsImZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uIiwic2hhZG93Iiwic2hvd0FydGlkbGVTaGFkb3ciLCJ0aGlzIiwiYm9keSIsIiQiLCJkb2N1bWVudCIsImRvYyIsImRvY1dpbmRvdyIsIndpbmRvdyIsImJvZHlQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0b2tlbjM2MCIsInRva2VuNjY3IiwidG9rZW43NjgiLCJ0b2tlbjEwMjQiLCJndEhlYWRlciIsImd0Rm9vdGVyIiwiZ3RXcmFwcGVyIiwidXBCdXR0b24iLCJtb2JpbGVNZW51U3dpdGNoIiwiZW50ZXJCdXR0b24iLCJlbnRlcldyYXBwZXIiLCJlbnRlckZvcm0iLCJlbnRlckNob3NlIiwiZW50ZXJDbG9zZSIsImZpeEJvZHkiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJjc3MiLCJwb3NpdGlvbiIsInVuZml4Qm9keSIsImZvb3RlckhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwiZGVza1RvcE1lbnVTY3JvbGwiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFnZVVwIiwiYW5pbWF0ZSIsInVwUGFnZUJ1dHRvbiIsIm9uIiwibW9iaWxlTWVudUNsb3NlIiwibW9iaWxlTWVudU9wZW4iLCJoYXNDbGFzcyIsIm9wZW5FbnRlckZvcm0iLCJjbG9zZUVudGVyRm9ybSIsImNoYW5nZUVudGVyUmVnaXN0cmF0aW9uIiwiZXZlbnQiLCJ0YXJnZXQiLCJhdHRyIiwiZWFjaCIsInNldEJhY2tncm91bmQiLCJwYXRoIiwiaXMiLCJpbWdIb2xkZXJGdW5jIiwiZWwiLCJob2xkZXJDb25zdCIsIm91dGVyV2lkdGgiLCJpbWciLCJmaW5kIiwiY3JlYXRlU2xpZGVyIiwiY3VyclNsaWRlciIsImNyZWF0ZUFycm93cyIsImlubmVyQ291bnQiLCJzY3JlZW5Db25zdCIsIm51bUlubmVyIiwibnVtUGFuZWwiLCJodG1sIiwib25lTW92ZUZ1bmN0aW9uIiwic2hvd051bSIsImFycm93c1JlYWR5IiwiZGVzdHJveUFycm93cyIsImNsb25lIiwib2ZmIiwiYnVsIiwibnVtIiwiY3VyclBvc2l0aW9uIiwiZmFkZSIsImZhZGVTbGlkZXJNb3ZlIiwidHJhbSIsImNvbnNvbGUiLCJsb2ciLCJjb250YWluZXIiLCJiYXNlV2lkdGgiLCJhcHBlbmQiLCJjaGlsZHJlbiIsImZpcnN0IiwicmVtb3ZlIiwicHJlcGVuZCIsImxhc3QiLCJ0cmFtU2xpZGVyTW92ZSIsImRvdHMiLCJhbGxEb3RzIiwidHJhbUFuaW1hdGlvbiIsImVxIiwiaW5kZXgiLCJpbm5lciIsInRleHQiLCJjcmVhdGVUb3VjaCIsImluaXRpYWxQb2ludCIsImZpbmFsUG9pbnQiLCJlIiwib3JpZ2luYWxFdmVudCIsIk1hdGgiLCJhYnMiLCJ0b3VjaGVzIiwicGFnZVgiLCJjaGFuZ2VkVG91Y2hlcyIsImRlc3Ryb3lUb3VjaCIsImZpbmRTY3JlZW5Db25zdCIsInBhcnNlSW50Iiwic2V0QmFzZVdpZHRoIiwic2xpZGVyVGltZU91dCIsImxlbmd0aCIsImFycm93IiwiaGFzQ2xvbmUiLCJuYXYiLCJzcGFucyIsImkiLCJjcmVhdGVEb3RzIiwiY2xpY2tQb3NpdGlvbiIsImJvZHlXcmFwcGVyIiwic2hvdyIsImNsb25lU2xpZGVyIiwiaGlkZSIsImRlc3Ryb3lDbG9uZVNsaWRlciIsImNyZWF0ZUNsb25lU2xpZGVyIiwicGFyZW50IiwicmVzaXplIiwibWFuYWdlR3RBY3RpdmVVbE1lbnUiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsInByZXZlbnREZWZhdWx0IiwidGFiU2xpZGVyIiwiY3VyclRhYnMiLCJ0YWJTbGlkZXJBY3Rpb24iLCJ0YWJTbGlkZXJBY3RpdmF0aW9uIiwic2V0UGxheWVycyIsInRhZyIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwic3JjIiwibGFzdFNjcmlwdFRhZyIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJjdXJyZW50UGxheWVyIiwiYWRkWW91VHViZSIsImluaXRpYWxpemUiLCJwbGF5ZXIiLCJtdXRlIiwicGxheVZpZGVvIiwicGxheUZ1bGxTY3JlZW4iLCJwYXVzZVZpZGVvIiwiaWZyYW1lIiwicmVxdWVzdEZ1bGxTY3JlZW4iLCJtb3pSZXF1ZXN0RnVsbFNjcmVlbiIsIndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIiwiYmluZCIsImVsSWQiLCJZVCIsIlBsYXllciIsIndpZHRoIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJwbGF5bGlzdCIsImNvbG9yIiwibG9vcCIsImF1dG9wbGF5IiwiZXZlbnRzIiwib25SZWFkeSIsInRhYmxlIiwidGFibGVQYXJlbnQiLCJ0YWJsZVBhcmVudFRvcCIsInRhYmxlUGFyZW50Qm90dG9tIiwidGFibGVXaWR0aCIsIndpbmRvd1RvcCIsIndpZG93SGVpZ2h0IiwiY3JlYXRlQXJ0aWN0ZVNjcm9sbFRhYmxlIiwiZWxIZWlnaHQiLCJ3aW5kb3dQb3NpdGlvbiIsIngiLCJjdXJyU2hhZG93Iiwic2Nyb2xsIiwic2V0Q3VyclRpbWUiLCJjdXJyVGltZSIsInNldEludGVydmFsIiwiZGF0ZSIsIkRhdGUiLCJzZXRVVENIb3VycyIsImhvdXJzIiwiZ2V0SG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsIndlZWtkYXkiLCJnZXREYXkiLCJkYXkiLCJnZXREYXRlIiwibW9udGgiLCJnZXRNb250aCIsInllYXIiLCJnZXRGdWxsWWVhciIsImlubmVyU2Nyb2xsIiwidGlueXNjcm9sbGJhciIsInRodW1iU2l6ZSIsIndoZWVsU3BlZWQiLCJjcmVhdGVJY29uc0l0ZW1zQ2xpY2siLCJjcmVhdGVWaXNpdExpbmsiLCJjcmVhdGVCb29rbWFya3NMaW5rIiwidG9nZ2xlR3RBY3RpdmUiLCJjcmVhdGVTaGFyZUxpbmsiLCJ0b2dnbGVDbGFzcyIsImFkZFZpc2l0ZWRMaW5rIiwiYWxlcnQiLCJhZGRCb29rbWFyayIsImEiLCJ1cmwiLCJ0aXRsZSIsImV4dGVybmFsIiwiQWRkRmF2b3JpdGUiLCJzaWRlYmFyIiwiYWRkUGFuZWwiLCJvcGVyYSIsImxvY2F0aW9uIiwiaHJlZiIsInNvY2lhbEVudGVyIiwic29jaWFsUmVnaXN0cmF0aW9uIiwidG9rZW4iLCJjdXROZXdzIiwiY3VyckhlaWdodCIsImN1dHRpbmdMZW5naHQiLCJuZXdUZXh0IiwibWF4SGVpZ2h0IiwiY3V0dGluZ0VsIiwiZmxvb3IiLCJzdWJzdHJpbmciLCJjdXRSZWFkTW9yZVNsaWRlciIsImN1dHRpbmciLCJuZXdzVGV4dCIsInNsaWNlIiwicmVhZHkiLCJnb1RvVHJpcCJdLCJtYXBwaW5ncyI6IkFBS0FBLFNBQVcsV0EydUJILFNBQVNDLElBQ0FDLElBQ0RBLEVBQWdCQyxXQUFXLFdBQ3ZCRCxFQUFnQixLQUNoQkUsRUFBS0MsZ0NBQ0RDLEdBQ0FGLEVBQUtHLHVCQS91QnpCLElBQUlILEVBQU9JLEtBQ1BDLEVBQU9DLEVBQUVDLFNBQVNGLE1BQ2xCRyxFQUFNRixFQUFFQyxVQUNSRSxFQUFZSCxFQUFFSSxRQUNkQyxHQUNJQyxLQUFLLEVBQ0xDLE1BQU0sR0FFVkMsRUFBV1IsRUFBRSxjQUViUyxHQURXVCxFQUFFLGNBQ0ZBLEVBQUUsZUFDYlUsRUFBV1YsRUFBRSxjQUNiVyxFQUFZWCxFQUFFLGVBRWRZLEdBRFlaLEVBQUUsZUFDSEEsRUFBRSxXQUNiYSxFQUFXYixFQUFFLFVBQ2JjLEVBQVlkLEVBQUUsZUFDZGUsRUFBV2YsRUFBRSxVQUNiZ0IsRUFBbUJoQixFQUFFLDBCQUNyQmlCLEVBQWNqQixFQUFFLGFBQ2hCa0IsRUFBZWxCLEVBQUUsNEJBQ2pCbUIsRUFBWW5CLEVBQUUsb0JBQ2RvQixFQUFhcEIsRUFBRSwwQkFDZnFCLEVBQWFyQixFQUFFLDBCQXVzQm5CLEdBdHNCQUYsS0FBS3dCLFFBQVUsV0FDUGpCLEVBQWFDLEtBQU9ELEVBQWFFLE9BQ3JDRixFQUFhQyxJQUFNSixFQUFJcUIsWUFDdkJsQixFQUFhRSxLQUFPUixFQUFLeUIsU0FBU2pCLEtBQ2xDUixFQUFLMEIsS0FDREMs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QU9rRCxHQUFHLHVCQUNabEQsRUFBRSxzQkFBc0IrQyxLQUFLLFdBQ3pCL0MsRUFBRUYsTUFBTW1DLFlBQVksWUFDcEJqQyxFQUFFRixNQUFNbUMsWUFBWSxhQUNwQnZDLEVBQUt5RCxjQUFjbkQsRUFBRUYsV0FJakNFLEVBQUVJLFFBQVFpQyxHQUFHLE9BQVEsV0FDYnJDLEVBQUUsT0FBT2tELEdBQUcsdUJBQ1psRCxFQUFFLHNCQUFzQitDLEtBQUssV0FDekJyRCxFQUFLeUQsY0FBY25ELEVBQUVGLFdBS2pDQyxFQUFLc0MsR0FBRyxRQUFTLFNBQVVPLE9BTy9CLElBQUlpTSxTQUFXLElBQUl2UCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL9GE0YPQvdC60YbQuNGPLCDQvtC/0YDQtdC00LXQu9GP0Y7RidCw0Y8g0LfQsNGA0LXQs9C40YHRgtCy0LjRgNC+0LLQsNC90L3Ri9C5INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQuNC70Lgg0L3QtdGCXHJcblxyXG4vLyDQv9GA0LXQtNGD0YHQvNC+0YLRgNC10YLRjCDQstGL0YXQvtC0INC40Lcg0LDQutC60LDRg9C90YLQsFxyXG5cclxuXHJcbkdvVG9UcmlwID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICBib2R5ID0gJChkb2N1bWVudC5ib2R5KSxcclxuICAgICAgICBkb2MgPSAkKGRvY3VtZW50KSxcclxuICAgICAgICBkb2NXaW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgYm9keVBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB0b3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBsZWZ0OiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG9rZW4zNjAgPSAkKFwiI2d0LWlzLTM2MFwiKSxcclxuICAgICAgICB0b2tlbjQ4MCA9ICQoXCIjZ3QtaXMtNDgwXCIpLFxyXG4gICAgICAgIHRva2VuNjY3ID0gJChcIiNndC1pcy02NjdcIiksXHJcbiAgICAgICAgdG9rZW43NjggPSAkKFwiI2d0LWlzLTc2OFwiKSxcclxuICAgICAgICB0b2tlbjEwMjQgPSAkKFwiI2d0LWlzLTEwMjRcIiksXHJcbiAgICAgICAgdG9rZW4xMjMxID0gJChcIiNndC1pcy0xMjMxXCIpLFxyXG4gICAgICAgIGd0SGVhZGVyID0gJChcImhlYWRlclwiKSxcclxuICAgICAgICBndEZvb3RlciA9ICQoXCJmb290ZXJcIiksXHJcbiAgICAgICAgZ3RXcmFwcGVyID0gJChcIiNndC13cmFwcGVyXCIpLFxyXG4gICAgICAgIHVwQnV0dG9uID0gJChcIiNndC11cFwiKSxcclxuICAgICAgICBtb2JpbGVNZW51U3dpdGNoID0gJChcIiNndC1tb2JpbGUtbWVudS1zd2l0Y2hcIiksXHJcbiAgICAgICAgZW50ZXJCdXR0b24gPSAkKCcuZ3QtZW50ZXInKSxcclxuICAgICAgICBlbnRlcldyYXBwZXIgPSAkKCcjZ3QtaGVhZGVyLWVudGVyLXdyYXBwZXInKSxcclxuICAgICAgICBlbnRlckZvcm0gPSAkKCcjZ3QtaGVhZGVyLWVudGVyJyksXHJcbiAgICAgICAgZW50ZXJDaG9zZSA9ICQoJyNndC1oZWFkZXItZW50ZXItY2hvc2UnKSxcclxuICAgICAgICBlbnRlckNsb3NlID0gJCgnI2d0LWhlYWRlci1lbnRlci1jbG9zZScpO1xyXG4gICAgdGhpcy5maXhCb2R5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChib2R5UG9zaXRpb24udG9wIHx8IGJvZHlQb3NpdGlvbi5sZWZ0KSByZXR1cm47XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLnRvcCA9IGRvYy5zY3JvbGxUb3AoKTtcclxuICAgICAgICBib2R5UG9zaXRpb24ubGVmdCA9IGJvZHkub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICBib2R5LmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXHJcbiAgICAgICAgICAgIGxlZnQ6IGJvZHlQb3NpdGlvbi5sZWZ0ICsgXCJweFwiLFxyXG4gICAgICAgICAgICB0b3A6IC0xICogYm9keVBvc2l0aW9uLnRvcCArIFwicHhcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy51bmZpeEJvZHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYm9keS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJcIixcclxuICAgICAgICAgICAgbGVmdDogXCJcIixcclxuICAgICAgICAgICAgdG9wOiBcIlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jLnNjcm9sbFRvcChib2R5UG9zaXRpb24udG9wKTtcclxuICAgICAgICBib2R5UG9zaXRpb24udG9wID0gZmFsc2U7XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLmxlZnQgPSBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5mb290ZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvb3RlckhlaWdodCA9IGd0Rm9vdGVyLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgaWYgKGZvb3RlckhlaWdodCA+IGRvY1dpbmRvdy5oZWlnaHQoKSAtIDUwKSB7XHJcbiAgICAgICAgICAgIGd0Rm9vdGVyLmNzcyhcInBvc2l0aW9uXCIsIFwic3RhdGljXCIpO1xyXG4gICAgICAgICAgICBndFdyYXBwZXIuY3NzKFwibWFyZ2luLWJvdHRvbVwiLCBcIlwiKTtcclxuICAgICAgICAgICAgdXBCdXR0b24uY3NzKFwicG9zaXRpb25cIiwgXCJzdGF0aWNcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3RGb290ZXIuY3NzKFwicG9zaXRpb25cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLmNzcyhcInBvc2l0aW9uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICBndFdyYXBwZXIuY3NzKFwibWFyZ2luLWJvdHRvbVwiLCBndEZvb3Rlci5vdXRlckhlaWdodCgpICsgXCJweFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5kZXNrVG9wTWVudVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZG9jV2luZG93LnNjcm9sbFRvcCgpID4gZ3RIZWFkZXIub3V0ZXJIZWlnaHQoKSkge1xyXG4gICAgICAgICAgICBndEhlYWRlci5hZGRDbGFzcyhcImd0LWhlYWRlci1zY3JvbGxlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBndEhlYWRlci5yZW1vdmVDbGFzcyhcImd0LWhlYWRlci1zY3JvbGxlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucGFnZVVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCJib2R5LGh0bWxcIikuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSw4MDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudXBQYWdlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+IDMwKSB7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLmFkZENsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5yZW1vdmVDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIHVwQnV0dG9uLm9uKFwiY2xpY2tcIiwgc2VsZi5wYWdlVXApO1xyXG4gICAgdGhpcy5tb2JpbGVNZW51Q2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi51bmZpeEJvZHkoKTtcclxuICAgICAgICBtb2JpbGVNZW51U3dpdGNoLnJlbW92ZUNsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgICAgICBndEhlYWRlci5yZW1vdmVDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLm1vYmlsZU1lbnVPcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZml4Qm9keSgpO1xyXG4gICAgICAgIGd0SGVhZGVyLmFkZENsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgICAgICBtb2JpbGVNZW51U3dpdGNoLmFkZENsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBtb2JpbGVNZW51U3dpdGNoLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtb3BlblwiKSkge1xyXG4gICAgICAgICAgICBzZWxmLm1vYmlsZU1lbnVDbG9zZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYubW9iaWxlTWVudU9wZW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMub3BlbkVudGVyRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBlbnRlcldyYXBwZXIuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBzZXRUaW1lb3V0KHNob3cpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcclxuICAgICAgICAgICAgZW50ZXJGb3JtLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgIGVudGVyQ2xvc2UuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNsb3NlRW50ZXJGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVudGVyQ2xvc2UucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBlbnRlckZvcm0ucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGhpZGUsIDc1MCk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xyXG4gICAgICAgICAgICBlbnRlcldyYXBwZXIucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNoYW5nZUVudGVyUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGVudGVyRm9ybS5oYXNDbGFzcygkKGV2ZW50LnRhcmdldCkuYXR0cihcImNsYXNzXCIpKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGVudGVyRm9ybS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1lbnRlclwiKS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1yZWdpc3RyYXRpb25cIikuYWRkQ2xhc3MoJChldmVudC50YXJnZXQpLmF0dHIoXCJjbGFzc1wiKSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBlbnRlckJ1dHRvbi5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLm9uKCdjbGljaycsIHNlbGYub3BlbkVudGVyRm9ybSlcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBlbnRlckNsb3NlLm9uKCdjbGljaycsIHNlbGYuY2xvc2VFbnRlckZvcm0pO1xyXG4gICAgXHJcbiAgICBlbnRlckNob3NlLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHNlbGYuY2hhbmdlRW50ZXJSZWdpc3RyYXRpb24oZXZlbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZXRCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbWdIb2xkZXJzID0gJChcIi5ndC1pbWctaG9sZGVyXCIpO1xyXG4gICAgICAgIGltZ0hvbGRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghJCh0aGlzKS5hdHRyKFwiZGF0YS1iZ1wiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9ICQodGhpcykuYXR0cihcImRhdGEtYmdcIik7XHJcbiAgICAgICAgICAgIGlmICh0b2tlbjY2Ny5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyhcclxuICAgICAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICAndXJsKFwiLi9pbWcvYmFja2dyb3VuZHMvcGhvbmUvJyArIHBhdGggKyAnXCIpJ1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodG9rZW4xMDI0LmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICd1cmwoXCIuL2ltZy9iYWNrZ3JvdW5kcy90YWJsZXQvJyArIHBhdGggKyAnXCIpJ1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcyhcclxuICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgJ3VybChcIi4vaW1nL2JhY2tncm91bmRzL2Rlc2t0b3AvJyArIHBhdGggKyAnXCIpJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmltZ0hvbGRlckZ1bmMgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAkKGVsKS5yZW1vdmVDbGFzcyhcImd0LXdpZHRoXCIpO1xyXG4gICAgICAgICQoZWwpLnJlbW92ZUNsYXNzKFwiZ3QtaGVpZ2h0XCIpO1xyXG4gICAgICAgICQoZWwpLnJlbW92ZUNsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgICAgICB2YXIgaG9sZGVyQ29uc3QgPSBlbC5vdXRlckhlaWdodCgpIC8gZWwub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICBpbWcgPSBlbC5maW5kKCdpbWcnKSxcclxuICAgICAgICAgICAgaW1nQ29uc3QgPSBpbWcub3V0ZXJIZWlnaHQoKSAvIGltZy5vdXRlcldpZHRoKCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoaW1nQ29uc3QgPiBob2xkZXJDb25zdCkge1xyXG4gICAgICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LXdpZHRoXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC1oZWlnaHRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW1nLWhvbGRlclwiKSkge1xyXG4gICAgICAgIHNlbGYuc2V0QmFja2dyb3VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3JlYXRlU2xpZGVyID0gZnVuY3Rpb24gKGN1cnJTbGlkZXIsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlclRpbWVPdXQsXHJcbiAgICAgICAgICAgIHNjcmVlbkNvbnN0ID0gMSxcclxuICAgICAgICAgICAgYmFzZVdpZHRoLFxyXG4gICAgICAgICAgICBhcnJvd3NSZWFkeSA9IGZhbHNlLFxyXG4gICAgICAgICAgICBpbm5lciA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItaW5uZXJcIiksXHJcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItY29udGFpbmVyXCIpLFxyXG4gICAgICAgICAgICBpbm5lckNvdW50ID0gaW5uZXIubGVuZ3RoLFxyXG4gICAgICAgICAgICBjdXJyUG9zaXRpb24gPSBwb3NpdGlvbiB8fCAwLFxyXG4gICAgICAgICAgICBhcnJvdyA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItaGFzLWFycm93XCIpLFxyXG4gICAgICAgICAgICBkb3RzID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1oYXMtZG90c1wiKSxcclxuICAgICAgICAgICAgbnVtUGFuZWwgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLW51bVwiKSxcclxuICAgICAgICAgICAgdHJhbSA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItdHJhbVwiKSxcclxuICAgICAgICAgICAgdHJhbUFuaW1hdGlvbiA9IGN1cnJTbGlkZXIuYXR0cignZGF0YS1kdXJhdGlvbicpIHx8IDMwMCxcclxuICAgICAgICAgICAgZmFkZSA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItZmFkZVwiKSxcclxuICAgICAgICAgICAgaGFzQ2xvbmUgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWhhcy1jbG9uZVwiKTtcclxuICAgICAgICBpZiAoZmFkZSkge1xyXG4gICAgICAgICAgICBmYWRlU2xpZGVyTW92ZShwb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0cmFtKSB7XHJcbiAgICAgICAgICAgIGZpbmRTY3JlZW5Db25zdCgpO1xyXG4gICAgICAgICAgICBzZXRCYXNlV2lkdGgoKTtcclxuICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFycm93KSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLWFycm93LWhvbGRlclwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICBjcmVhdGVBcnJvd3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRvdHMpIHtcclxuICAgICAgICAgICAgY3JlYXRlRG90cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5uZXJDb3VudCA+IHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVRvdWNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChoYXNDbG9uZSkge1xyXG4gICAgICAgICAgICBjcmVhdGVDbG9uZUxpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lTGlzdGVuZXJzKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoJy5ndC1zbGlkZXItaW5uZXItY292ZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNsb25lU2xpZGVyKCQodGhpcykucGFyZW50KCkuaW5kZXgoKSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQXJyb3dzKCkge1xyXG4gICAgICAgICAgICBpZiAoaW5uZXJDb3VudCA+IHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbnVtSW5uZXIgPSAnJztcclxuICAgICAgICAgICAgICAgIGlmIChudW1QYW5lbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG51bUlubmVyID0gJzxkaXYgY2xhc3M9XCJndC1zbGlkZXItYXJyb3ctbnVtXCI+PGkgY2xhc3M9XCJndC1zbGlkZXItbnVtLWN1cnJcIj48L2k+PGk+0LjQtzwvaT48aSBjbGFzcz1cImd0LXNsaWRlci1udW0tbWF4XCI+PC9pPjwvZGl2PidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItYXJyb3ctaG9sZGVyXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzID0gXCJndC1zbGlkZXItYXJyb3cgbGVmdFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPC9zcGFuPlwiICsgbnVtSW5uZXIgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcyA9IFwiZ3Qtc2xpZGVyLWFycm93IHJpZ2h0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L3NwYW4+XCJcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVBcnJvd3NMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgICAgIHNob3dOdW0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcnJvd3NSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveUFycm93cyhjbG9uZSkge1xyXG4gICAgICAgICAgICB2YXIgZWwgPSBjbG9uZSB8fCBjdXJyU2xpZGVyO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmxlZnRcIikub2ZmKCk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIucmlnaHRcIikub2ZmKCk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3Qtc2xpZGVyLWFycm93LWhvbGRlclwiKS5odG1sKFwiXCIpO1xyXG4gICAgICAgICAgICBhcnJvd3NSZWFkeSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFycm93c0xpc3RlbmVycygpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmxlZnRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLnJpZ2h0XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKG51bVBhbmVsKSBzaG93TnVtKClcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVEb3RzKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImd0LXNsaWRlci1uYXZcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgdmFyIG5hdiA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItbmF2XCIpLFxyXG4gICAgICAgICAgICAgICAgc3BhbnMgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlubmVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc3BhbnMgKz0gXCI8c3BhbiBkYXRhLW51bSA9IFwiICsgaSArIFwiPjwvc3Bhbj5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuYXYuaHRtbChzcGFucyk7XHJcbiAgICAgICAgICAgIG5hdi5maW5kKFwic3BhblwiKS5maXJzdCgpLmFkZENsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLW5hdiBzcGFuXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKHRydWUsICskKHRoaXMpLmF0dHIoXCJkYXRhLW51bVwiKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIG9uZU1vdmVGdW5jdGlvbihidWwsIG51bSkge1xyXG4gICAgICAgICAgICBpZiAobnVtIHx8IG51bSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gbnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZWxzZSBpZiAoYnVsKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24rKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbi0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZmFkZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmYWRlU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdGFydCcsIGN1cnJQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID4gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcygnbGVmdCcsICgtKGN1cnJQb3NpdGlvbiAtIDIpICogYmFzZVdpZHRoKSArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQoY29udGFpbmVyLmNoaWxkcmVuKCkuZmlyc3QoKS5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW4oKS5maXJzdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbi0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY3NzKCdsZWZ0JywgKC0oY3VyclBvc2l0aW9uICsgMikgKiBiYXNlV2lkdGgpICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnByZXBlbmQoY29udGFpbmVyLmNoaWxkcmVuKCkubGFzdCgpLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlbigpLmxhc3QoKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24rKztcclxuICAgICAgICAgICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKG51bVBhbmVsKSBzaG93TnVtKCk7XHJcbiAgICAgICAgICAgIGlmIChkb3RzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWxsRG90cyA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItbmF2IHNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICBhbGxEb3RzLnJlbW92ZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgJChhbGxEb3RzW2NvbnRhaW5lci5maW5kKCcuZ3Qtb3BlbicpLmF0dHIoJ2RhdGEtY291bnQnKV0pLmFkZENsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gdHJhbVNsaWRlck1vdmUoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hbmltYXRlKHtsZWZ0OiAtY3VyclBvc2l0aW9uICogYmFzZVdpZHRofSwgdHJhbUFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlbigpLmVxKGN1cnJQb3NpdGlvbikuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGZhZGVTbGlkZXJNb3ZlKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBvc2l0aW9uIHx8IGN1cnJQb3NpdGlvbjtcclxuICAgICAgICAgICAgJChpbm5lcikucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgJChpbm5lcltpbmRleF0pLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2hvd051bSgpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLW51bS1jdXJyJykudGV4dCgrKGNvbnRhaW5lci5maW5kKCcuZ3Qtb3BlbicpLmF0dHIoJ2RhdGEtY291bnQnKSkgKyAxKTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLW51bS1tYXgnKS50ZXh0KGlubmVyQ291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRvdWNoKCkge1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbFBvaW50ID0gMCxcclxuICAgICAgICAgICAgICAgIGZpbmFsUG9pbnQgPSAwO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLm9uKFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxQb2ludCA9IE1hdGguYWJzKGUudG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvdWNoc3RhcnRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLm9uKFwidG91Y2hlbmRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBmaW5hbFBvaW50ID0gTWF0aC5hYnMoZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoaW5pdGlhbFBvaW50IC0gZmluYWxQb2ludCkgPiA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsUG9pbnQgPiBmaW5hbFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVRvdWNoKGNsb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGNsb25lIHx8IGN1cnJTbGlkZXI7XHJcbiAgICAgICAgICAgIGVsLm9mZigpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRTY3JlZW5Db25zdCgpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJTbGlkZXIuYXR0cihcImRhdGEtY291bnRcIikpIHtcclxuICAgICAgICAgICAgICAgIHNjcmVlbkNvbnN0ID0gcGFyc2VJbnQoY3VyclNsaWRlci5hdHRyKFwiZGF0YS1jb3VudFwiKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0b2tlbjc2OCkuaXMoXCI6dmlzaWJsZVwiKSkgc2NyZWVuQ29uc3QgPSAzO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodG9rZW42NjcpLmlzKFwiOnZpc2libGVcIikpIHNjcmVlbkNvbnN0ID0gMjtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRva2VuMzYwKS5pcyhcIjp2aXNpYmxlXCIpKSBzY3JlZW5Db25zdCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzZXRCYXNlV2lkdGgoKSB7XHJcbiAgICAgICAgICAgIGJhc2VXaWR0aCA9IGN1cnJTbGlkZXIub3V0ZXJXaWR0aCgpIC8gc2NyZWVuQ29uc3Q7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItY29udGFpbmVyXCIpLm91dGVyV2lkdGgoKGlubmVyQ291bnQgKyAxKSAqIGJhc2VXaWR0aCk7XHJcbiAgICAgICAgICAgIGlubmVyLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vdXRlcldpZHRoKGJhc2VXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY291bnQnLCAkKHRoaXMpLmluZGV4KCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDbG9uZVNsaWRlcihjbGlja1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiI2d0LWNsb25lXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHNlbGYuZml4Qm9keSgpO1xyXG4gICAgICAgICAgICB2YXIgYm9keVdyYXBwZXIgPSAkKFwiI2d0LWJvZHktd3JhcHBlclwiKVxyXG4gICAgICAgICAgICBib2R5V3JhcHBlci5hcHBlbmQoJzxkaXYgaWQgPSBcImd0LWNsb25lLXdyYXBwZXJcIiAgIGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBpZCA9IFwiZ3QtY2xvbmVcIiBjbGFzcz1cImd0LXNsaWRlciBndC1zbGlkZXItY2xvbmUgZ3Qtc2xpZGVyLWZhZGUgZ3Qtc2xpZGVyLW51bSAgZ3Qtc2xpZGVyLWhhcy1hcnJvd1wiPjxkaXYgaWQgPSBcImd0LWNsb25lLWNsb3NlXCIgY2xhc3MgPSBcImd0LXNsaWRlci1jbG9uZS1jbG9zZVwiPjwvZGl2PjxkaXYgIGlkID0gXCJndC1jbG9uZS1jb250YWluZXJcIiBjbGFzcz1cImd0LXNsaWRlci1jb250YWluZXJcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgYm9keVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgICAgICB2YXIgY2xvbmVTbGlkZXIgPSAkKCcjZ3QtY2xvbmUnKSxcclxuICAgICAgICAgICAgICAgIGlubmVycyA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItaW5uZXJcIikuY2xvbmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlubmVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub3V0ZXJXaWR0aCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZ3QtY2xvbmUtY29udGFpbmVyJykuYXBwZW5kKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZXIoY2xvbmVTbGlkZXIsIGNsaWNrUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lBcnJvd3MoY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICBkZXN0cm95VG91Y2goY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9mZigpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLXdyYXBwZXJcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtYm9keS13cmFwcGVyXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgc2VsZi51bmZpeEJvZHkoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvLy8vLy8vLy8vcmVzaXplU2xpZGVyXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplU2xpZGVyKCkge1xyXG4gICAgICAgICAgICBpZiAoIXNsaWRlclRpbWVPdXQpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlclRpbWVPdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXJUaW1lT3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemVGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZG9jV2luZG93LnJlc2l6ZShyZXNpemVTbGlkZXIpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplRnVuYygpIHtcclxuICAgICAgICAgICAgZGVzdHJveVRvdWNoKCk7XHJcbiAgICAgICAgICAgIGlmICh0cmFtKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5kU2NyZWVuQ29uc3QoKTtcclxuICAgICAgICAgICAgICAgIHNldEJhc2VXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgcmVzaXplTW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXJyb3dzUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3lBcnJvd3MoKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFycm93cygpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlVG91Y2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiByZXNpemVNb3ZlKCkge1xyXG4gICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID4gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0KVxyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0O1xyXG4gICAgICAgICAgICBpZiAoaW5uZXJDb3VudCA8PSBzY3JlZW5Db25zdCkgY3VyclBvc2l0aW9uID0gMDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3Qtc2xpZGVyXCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1zbGlkZXJcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlU2xpZGVyKCQodGhpcykpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB0aGlzLm1hbmFnZUd0QWN0aXZlVWxNZW51ID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKGVsLnRhZ05hbWUgIT0gXCJsaVwiKVxyXG4gICAgICAgICAgICBlbCA9ICQoZWwpLmNsb3Nlc3QoXCJsaVwiKTtcclxuICAgIFxyXG4gICAgICAgICQoZWwpLmNsb3Nlc3QoJChcInVsXCIpKS5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIC8vIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1odW5kcmV0LW1lbnVcIikpIHtcclxuICAgIC8vICAgICAkKFwiLmd0LWh1bmRyZXQtbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgLy8gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LWJ1dHRvbi1tZW51XCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1idXR0b24tbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1tZW51LW5ld3NcIikpIHtcclxuICAgICAgICAkKFwiLmd0LW1lbnUtbmV3c1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMudGFiU2xpZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJTbGlkZXJzID0gJChcIi5ndC10YWJzXCIpO1xyXG4gICAgICAgIHRhYlNsaWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyVGFicyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGN1cnJUYWJzLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudGFiU2xpZGVyQWN0aW9uKGN1cnJUYWJzLCAkKHRoaXMpLmluZGV4KCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLnRhYlNsaWRlckFjdGl2YXRpb24oY3VyclRhYnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy50YWJTbGlkZXJBY3RpdmF0aW9uID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAvLyAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5oaWRlKCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpWzBdKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAvLyAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpWzBdKS5zaG93KCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKVswXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnRhYlNsaWRlckFjdGlvbiA9IGZ1bmN0aW9uIChlbCwgbnVtKSB7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAvLyAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKS5oaWRlKCk7XHJcbiAgICAgICAgJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpW251bV0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIC8vICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbbnVtXSkuc2hvdygpO1xyXG4gICAgICAgICQoZWwuZmluZChcIi5ndC10YWJzLW1haW5cIilbbnVtXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXRhYnNcIikpIHtcclxuICAgICAgICBzZWxmLnRhYlNsaWRlcigpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICAgIHRhZy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgICAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9wbGF5ZXJfYXBpXCI7XHJcbiAgICAgICAgdmFyIGxhc3RTY3JpcHRUYWcgPSAkKFwic2NyaXB0XCIpWyQoXCJzY3JpcHRcIikubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgbGFzdFNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YWcsIGxhc3RTY3JpcHRUYWcpO1xyXG4gICAgICAgIHZhciBndFZpZGVvcyA9ICQoXCIuZ3QtdmlkZW9cIik7XHJcbiAgICAgICAgZ3RWaWRlb3MuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGxheWVyID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgY3VycmVudFBsYXllci5maW5kKFwiLmd0LXZpZGVvLXN3aXRjaFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkZFlvdVR1YmUoY3VycmVudFBsYXllcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5hZGRZb3VUdWJlID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIHBsYXllcixcclxuICAgICAgICAgICAgZWxJZCA9IFwiZ3QtdmlkZW8tXCIgKyBlbC5pbmRleCgpO1xyXG4gICAgXHJcbiAgICAgICAgZWwuZmluZChcIi5ndC12aWRlby1zd2l0Y2hcIikuaGlkZSgnc2xvdycpO1xyXG4gICAgXHJcbiAgICAgICAgZWxcclxuICAgICAgICAgICAgLmZpbmQoXCIuZ3QtdmlkZW8taW5uZXJcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBlbElkKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJndC12aWRlby1mb3JlZ3JvdW5kXCIpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbiAgICAgICAgICAgIHBsYXllciA9IG5ldyBZVC5QbGF5ZXIoZWxJZCwge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDYwMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICAgICAgICAgICAgdmlkZW9JZDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgIHBsYXllclZhcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5bGlzdDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDFcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxla2I6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udHJvbHM6IDBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBvblJlYWR5OiBpbml0aWFsaXplXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIubXV0ZSgpO1xyXG4gICAgICAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiZ3QtdmlkZW8tb25cIik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tdW5jb3ZlclwiKS5vbignY2xpY2snLCBwbGF5RnVsbFNjcmVlbik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGF1c2VcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGxheVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcGxheUZ1bGxTY3JlZW4oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5RnVsbFNjcmVlbicpO1xyXG4gICAgICAgICAgICB2YXIgaWZyYW1lID0gZWwuZmluZCgnaWZyYW1lJylbMF07XHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0RnVsbFNjcmVlbiA9IGlmcmFtZS5yZXF1ZXN0RnVsbFNjcmVlbiB8fCBpZnJhbWUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgaWZyYW1lLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuO1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuLmJpbmQoaWZyYW1lKSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtdmlkZW9cIikpIHtcclxuICAgICAgICBzZWxmLnNldFBsYXllcnMoKTtcclxuICAgIH1cclxuICAgIHRoaXMuZml4QXJ0aWNsZVNjcm9sbFRhYmxlUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlID0gJChcIi5ndC1hcnRpY2xlLXRhYmxlLXdyYXBwZXJcIiksXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50ID0gdGFibGUucGFyZW50KCksXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50VG9wID0gdGFibGVQYXJlbnQucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50Qm90dG9tID0gdGFibGVQYXJlbnRUb3AgKyB0YWJsZVBhcmVudC5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICB0YWJsZVdpZHRoID0gdGFibGUub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICB3aW5kb3dUb3AgPSBkb2Muc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgIHdpZG93SGVpZ2h0ID0gZG9jV2luZG93Lm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgLy8gdGFibGVQYXJlbnQuYWRkQ2xhc3MoJ3Rlc3QnKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRhYmxlUGFyZW50VG9wKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3dUb3ApO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3ArOTAgPiB3aW5kb3dUb3ApIHtcclxuICAgICAgICAgICAgaWYgKHRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNsYXNzKFwiZ3QtZml4ZWRcIik7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKHRhYmxlUGFyZW50VG9wIDwgd2luZG93VG9wICsgOTApIHtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZS5oYXNDbGFzcyhcImd0LWZpeGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRhYmxlLm9mZnNldCgpLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRhYmxlV2lkdGhcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGFibGUuYWRkQ2xhc3MoXCJndC1maXhlZFwiKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHdpbmRvd1RvcCArIHdpZG93SGVpZ2h0ID4gdGFibGVQYXJlbnRCb3R0b20pIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmFkZENsYXNzKFwiZ3QtZml4ZWQtYm90dG9tXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2xhc3MoXCJndC1maXhlZC1ib3R0b21cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGFibGUuaGFzQ2xhc3MoXCJndC1maXhlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICh3aWRvd0hlaWdodCAtIDEyMCkgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSgpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQoXCJkaXZcIikuaXMoXCIuZ3QtYXJ0aWNsZVwiKSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBhcnRpY2xlcyA9ICQoXCIuZ3QtYXJ0aWNsZVwiKSxcclxuICAgICAgICAgICAgaHRtbCA9IFwiXCI7XHJcbiAgICAgICAgYXJ0aWNsZXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz1cclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzID0gXCJndC1hcnRpY2xlLXNjcm9sbFwiPjxkaXYgY2xhc3MgPSBcImd0LWFydGljbGUtc2Nyb2xsLXNoYWRvd1wiPjwvZGl2PjxwPicgK1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiaDJcIilcclxuICAgICAgICAgICAgICAgICAgICAudGV4dCgpICtcclxuICAgICAgICAgICAgICAgIFwiPC9wPjwvZGl2PlwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIjZ3QtYXJ0aWNsZS1zY3JvbGwtdGFibGVcIikuaHRtbChodG1sKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuc2hvd0FydGlkbGVTaGFkb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5ndC1hcnRpY2xlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkKHRoaXMpKTtcclxuICAgICAgICAgICAgdmFyIGN1cnJQb3NpdGlvbiA9ICQodGhpcykucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICBlbEhlaWdodCA9ICQodGhpcykub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIHdpbmRvd1Bvc2l0aW9uID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IHdpbmRvd1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHggPSAod2luZG93UG9zaXRpb24gLSBjdXJyUG9zaXRpb24pIC8gZWxIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPiAxKSB4ID0gMTtcclxuICAgICAgICAgICAgdmFyIGN1cnJTaGFkb3cgPSAkKFwiLmd0LWFydGljbGUtc2Nyb2xsXCIpWyQodGhpcykuaW5kZXgoKV07XHJcbiAgICAgICAgICAgICQoY3VyclNoYWRvdylcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmd0LWFydGljbGUtc2Nyb2xsLXNoYWRvd1wiKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcIndpZHRoXCIsIHggKiAxMDAgKyBcIiVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKCdkaXYnKS5pcygnLmd0LWFydGljbGUtdGFibGUtd3JhcHBlcicpKSB7XHJcbiAgICAgICAgdmFyIHNoYWRvdyA9IGZhbHNlLFxyXG4gICAgICAgICAgICBzY3JvbGxUaW1lb3V0O1xyXG4gICAgXHJcbiAgICAgICAgaWYgKCQoJ2RpdicpLmlzKFwiLmd0LWFydGljbGUtc2Nyb2xsLXRhYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIHNoYWRvdyA9IHRydWU7XHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlQXJ0aWN0ZVNjcm9sbFRhYmxlKCk7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0FydGlkbGVTaGFkb3coKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbFRocm90dGxlcigpIHtcclxuICAgICAgICAgICAgaWYgKCFzY3JvbGxUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5maXhBcnRpY2xlU2Nyb2xsVGFibGVQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGFkb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93QXJ0aWRsZVNoYWRvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGRvY1dpbmRvdy5zY3JvbGwoc2Nyb2xsVGhyb3R0bGVyKTtcclxuICAgICAgICBkb2NXaW5kb3cucmVzaXplKHNjcm9sbFRocm90dGxlcik7XHJcbiAgICBcclxuICAgIFxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRDdXJyVGltZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmN1cnJUaW1lKCk7XHJcbiAgICAgICAgdmFyIHQgPSBzZXRJbnRlcnZhbChzZWxmLmN1cnJUaW1lLCAzMDAwMCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jdXJyVGltZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiLmd0LWN1cnItdGltZVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKFwiZGF0YS1nbXRcIikpIGRhdGUuc2V0VVRDSG91cnMoKyQodGhpcykuYXR0cihcImRhdGEtZ210XCIpKTtcclxuICAgICAgICAgICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICAgICAgd2Vla2RheSA9IGRhdGUuZ2V0RGF5KCksXHJcbiAgICAgICAgICAgICAgICBkYXkgPSBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpLFxyXG4gICAgICAgICAgICAgICAgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgIHdlZWtkYXlzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIFwi0JLQvtGB0LrRgNC10YHQtdC90YzQtVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0J/QvtC90LXQtNC10LvRjNC90LjQulwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0JLRgtC+0YDQvdC40LpcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCh0YDQtdC00LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCn0LXRgtCy0LXRgNCzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQn9GP0YLQvdC40YbQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KHRg9Cx0LHQvtGC0LBcIlxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgXCLRj9C90LLQsNGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItGE0LXQstGA0LDQu9GPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvNCw0YDRgtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQsNC/0YDQtdC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC80LDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LjRjtC90Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC40Y7Qu9GPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQsNCy0LPRg9GB0YLQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0YHQtdC90YLRj9Cx0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0L7QutGC0Y/QsdGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC90L7Rj9Cx0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LTQtdC60LDQsdGA0Y9cIlxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgaWYgKGhvdXJzIDwgMTApIGhvdXJzID0gXCIwXCIgKyBob3VycztcclxuICAgICAgICAgICAgaWYgKG1pbnV0ZXMgPCAxMCkgbWludXRlcyA9IFwiMFwiICsgbWludXRlcztcclxuICAgICAgICAgICAgd2Vla2RheSA9IHdlZWtkYXlzW3dlZWtkYXldO1xyXG4gICAgICAgICAgICBtb250aCA9IG1vbnRoZXNbbW9udGhdO1xyXG4gICAgICAgICAgICBpZiAoJChcIi5ndC1jdXJyLXRpbWUtdGltZVwiKSlcclxuICAgICAgICAgICAgICAgICQoXCIuZ3QtY3Vyci10aW1lLXRpbWVcIikuaHRtbChob3VycyArIFwiOlwiICsgbWludXRlcyk7XHJcbiAgICAgICAgICAgIGlmICgkKFwiLmd0LWN1cnItdGltZS1kYXRlXCIpKVxyXG4gICAgICAgICAgICAgICAgJChcIi5ndC1jdXJyLXRpbWUtZGF0ZVwiKS5odG1sKFxyXG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXkgKyBcIiwgXCIgKyBkYXkgKyBcIiBcIiArIG1vbnRoICsgXCIgXCIgKyB5ZWFyXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1jdXJyLXRpbWVcIikpIHtcclxuICAgICAgICBzZWxmLnNldEN1cnJUaW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbm5lclNjcm9sbCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmIChlbC5maW5kKFwiLm92ZXJ2aWV3XCIpLmhlaWdodCgpID4gZWwuaGVpZ2h0KClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJpc1Njcm9sbGVkXCIpO1xyXG4gICAgICAgICAgICBlbC50aW55c2Nyb2xsYmFyKHtcclxuICAgICAgICAgICAgICAgIHRodW1iU2l6ZTogNDAsXHJcbiAgICAgICAgICAgICAgICB3aGVlbFNwZWVkOiAxMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW5uZXItc2Nyb2xsXCIpKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgJCgnLmd0LWlubmVyLXNjcm9sbCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbm5lclNjcm9sbCgkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgfVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vZG9lcyBub3Qgd29ya1xyXG5cclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUljb25zSXRlbXNDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiLmd0LXZpZXctY2FyZHMtaWNvbnMtaXRlbVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLXZpc2l0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZVZpc2l0TGluaygkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtYm9va21hcmtzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJvb2ttYXJrc0xpbmsoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oYXNDbGFzcyhcImd0LXZpZXctY2FyZHMtaWNvbnMtcGluXCIpIHx8XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhhc0NsYXNzKFwiZ3Qtdmlldy1jYXJkcy1pY29ucy1zaGFyZVwiKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYudG9nZ2xlR3RBY3RpdmUoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC12aWV3LWNhcmRzLWljb25zLXNoYXJlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZVNoYXJlTGluaygkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVTaGFyZUxpbmsgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBlbC5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZWwudG9nZ2xlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnRvZ2dsZUd0QWN0aXZlID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIGVsID0gJChlbCk7XHJcbiAgICAgICAgZWwucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgZWwub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGVsLnRvZ2dsZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZVZpc2l0TGluayA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmICghZWwuY2xvc2VzdChcIi5ndC12aWV3LWNhcmRzLWlubmVyXCIpLmF0dHIoXCJkYXRhLWhyZWZcIikpIHJldHVybjtcclxuICAgICAgICBlbC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5hZGRWaXNpdGVkTGluayhlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuYWRkVmlzaXRlZExpbmsgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBhbGVydChcclxuICAgICAgICAgICAgXCLQv9C+0YHQu9Cw0LvQuCDQtNCw0L3QvdGL0LUg0L3QsCDQsdC10LpcIixcclxuICAgICAgICAgICAgZWwuY2xvc2VzdChcIi5ndC12aWV3LWNhcmRzLWlubmVyXCIpLmF0dHIoXCJkYXRhLWhyZWZcIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGVsLnRvZ2dsZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmFkZEJvb2ttYXJrID0gZnVuY3Rpb24gKGEsIHVybCwgdGl0bGUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB3aW5kb3cuZXh0ZXJuYWwuQWRkRmF2b3JpdGUodXJsLCB0aXRsZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNpZGViYXIuYWRkUGFuZWwodGl0bGUsIHVybCwgXCJcIik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3BlcmEgPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGEudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICBhLnVybCA9IHVybDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLQndCw0LbQvNC40YLQtSBDdHJsLUQg0YfRgtC+0LHRiyDQtNC+0LHQsNCy0LjRgtGMINGB0YLRgNCw0L3QuNGG0YMg0LIg0LfQsNC60LvQsNC00LrQuFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jcmVhdGVCb29rbWFya3NMaW5rID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIGVsID0gJChlbCk7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsLmNsb3Nlc3QoXCIuZ3Qtdmlldy1jYXJkcy1pbm5lclwiKTtcclxuICAgICAgICBwYXJlbnQgPSAkKHBhcmVudCk7XHJcbiAgICAgICAgaWYgKCFwYXJlbnQuYXR0cihcImRhdGEtaHJlZlwiKSlcclxuICAgICAgICAgICAgcGFyZW50LmF0dHIoXCJkYXRhLWhyZWZcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIGlmICghcGFyZW50LmF0dHIoXCJkYXRhLWJvb2ttYXJrXCIpKSBwYXJlbnQuYXR0cihcImRhdGEtYm9va21hcmtcIiwgXCJHb1RvVHJpcFwiKTtcclxuICAgICAgICBlbC5hdHRyKFwiaHJlZlwiLCBwYXJlbnQuYXR0cihcImRhdGEtaHJlZlwiKSk7XHJcbiAgICAgICAgZWwuYXR0cihcInJlbFwiLCBcInNpZGViYXJcIik7XHJcbiAgICAgICAgZWwub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHNlbGYuYWRkQm9va21hcmsoXHJcbiAgICAgICAgICAgICAgICBlbCxcclxuICAgICAgICAgICAgICAgIHBhcmVudC5hdHRyKFwiZGF0YS1ocmVmXCIpLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50LmF0dHIoXCJkYXRhLWJvb2ttYXJrXCIpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC12aWV3LWNhcmRzLWljb25zLWJvb2ttYXJrc1wiKSkge1xyXG4gICAgICAgIHNlbGYuY3JlYXRlQm9va21hcmtzTGluaygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC12aWV3LWNhcmRzLWljb25zLWl0ZW1cIikpIHtcclxuICAgICAgICBzZWxmLmNyZWF0ZUljb25zSXRlbXNDbGljaygpO1xyXG4gICAgfVxyXG4gICAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC90LDQu9C40YfQuNC1IC0g0L7QsdGB0YPQtNC40YLRjCDRgSDQsdC10LrQvtC8INC/0L7QstC10LTQtdCz0YLQtVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgJCgnI2d0LWVudGVyLWZvcm0tZmFjZWJvb2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcignZmFjZWJvb2snKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS10d2l0dGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsRW50ZXIoJ3R3aXR0ZXInKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1nb29nbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcignZ29vZ2xlJylcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tZmFjZWJvb2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ2ZhY2Vib29rJylcclxuICAgIH0pO1xyXG4gICAgJCgnI2d0LXJlZy1mb3JtLXR3aXR0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ3R3aXR0ZXInKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tZ29vZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsUmVnaXN0cmF0aW9uKCdnb29nbGUnKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMuc29jaWFsUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBcclxuICAgICAgICBhbGVydChcItCg0LXQs9C40YHRgtGA0LDRhtC40Y8g0YfQtdGA0LXQtyBcIiArIHRva2VuKVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zb2NpYWxFbnRlciA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgXHJcbiAgICAgICAgYWxlcnQoXCLQktGF0L7QtCDRh9C10YDQtdC3IFwiICsgdG9rZW4pXHJcbiAgICBcclxuICAgIH07XHJcbiAgIHRoaXMuY3V0TmV3cyA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudCgpLFxyXG4gICAgICAgICAgIG1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKSxcclxuICAgICAgICAgICBjdXR0aW5nRWwgPSBlbC5maW5kKCdwJyksXHJcbiAgICAgICAgICAgY3VyckhlaWdodCxcclxuICAgICAgICAgICBjdXR0aW5nTGVuZ2h0LFxyXG4gICAgICAgICAgIG5ld1RleHQ7XHJcbiAgICAgICBwYXJlbnQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBtYXhIZWlnaHQgLT0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgICAgIH0pO1xyXG4gICBcclxuICAgICAgIG1heEhlaWdodCA9IG1heEhlaWdodCArIGVsLmhlaWdodCgpIC0yMDtcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgICAgIGN1dHRpbmdFbC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBjdXJySGVpZ2h0ID0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgXHJcbiAgICAgICAgICAgaWYoIGN1cnJIZWlnaHQgPCBtYXhIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICBtYXhIZWlnaHQgLT1jdXJySGVpZ2h0XHJcbiAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICBpZighbWF4SGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgIGN1dHRpbmdMZW5naHQgPSAgTWF0aC5mbG9vcigkKHRoaXMpLnRleHQoKS5sZW5ndGggKiBtYXhIZWlnaHQgLyBjdXJySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgIG5ld1RleHQgPSAkKHRoaXMpLnRleHQoKS5zdWJzdHJpbmcoMCwgY3V0dGluZ0xlbmdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBjdXRMYXN0U3ltYm9sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRleHQoKG5ld1RleHQpICsgJy4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG4gICAgICAgLy9cclxuICAgICAgIC8vIGZ1bmN0aW9uIGN1dExhc3RTeW1ib2woKSB7XHJcbiAgICAgICAvLyAgICAgdmFyIHN0ckxlbmd0aCA9IG5ld1RleHQubGVuZ3RoO1xyXG4gICAgICAgLy8gICAgIGlmKG5ld1RleHQuY2hhckF0KHN0ckxlbmd0aCAtIDEpID09ICcgJyl7XHJcbiAgICAgICAvLyAgICAgICAgIG5ld1RleHQ9IG5ld1RleHQuc3Vic3RyaW5nKDAsIHN0ckxlbmd0aCAtIDEpO1xyXG4gICAgICAgLy8gICAgIH1lbHNle1xyXG4gICAgICAgLy8gICAgICAgICBuZXdUZXh0ID0gbmV3VGV4dC5zdWJzdHJpbmcoMCwgc3RyTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAvLyAgICAgICAgIHNldFRpbWVvdXQoY3V0TGFzdFN5bWJvbClcclxuICAgICAgIC8vICAgICB9XHJcbiAgICAgICAvLyB9XHJcbiAgIFxyXG4gICB9O1xyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICBpZiAoJChcImRpdlwiKS5pcyhcIi5qcy1uZXdzLWN1dFwiKSkge1xyXG4gICAgICAgJChcIi5qcy1uZXdzLWN1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBzZWxmLmN1dE5ld3MoJCh0aGlzKSk7XHJcbiAgICAgICB9KTtcclxuICAgXHJcbiAgIFxyXG4gICAgICAgZG9jV2luZG93LnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgJChcIi5qcy1uZXdzLWN1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgc2VsZi5jdXROZXdzKCQodGhpcykpO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgfSk7XHJcbiAgIH1cclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgdGhpcy5jdXRSZWFkTW9yZVNsaWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgIHZhciBjdXR0aW5ncyA9ICQoXCIuZ3QtcmVhZC1tb3JlLXNsaWRlci10ZXh0LWlubmVyXCIpO1xyXG4gICAgICAgY3V0dGluZ3MuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgc2VsZi5jdXR0aW5nKCQodGhpcyksIDE2MCk7XHJcbiAgICAgICB9KTtcclxuICAgfTtcclxuICAgXHJcbiAgIHRoaXMuY3V0dGluZyA9IGZ1bmN0aW9uIChlbCwgbnVtKSB7XHJcbiAgICAgICB2YXIgbmV3c1RleHQgPSBlbC50ZXh0KCk7XHJcbiAgICAgICBpZiAobmV3c1RleHQubGVuZ3RoID4gbnVtKSB7XHJcbiAgICAgICAgICAgbmV3c1RleHQgPSBuZXdzVGV4dC5zbGljZSgwLCBudW0pICsgXCIuLi5cIjtcclxuICAgICAgICAgICBlbC50ZXh0KG5ld3NUZXh0KTtcclxuICAgICAgIH1cclxuICAgfTtcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgaWYgKCQoXCJwXCIpLmlzKFwiLmd0LXJlYWQtbW9yZS1zbGlkZXItdGV4dC1pbm5lclwiKSkge1xyXG4gICAgICAgc2VsZi5jdXRSZWFkTW9yZVNsaWRlcigpO1xyXG4gICB9XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgZG9jLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgICAgIHNlbGYuZm9vdGVySGVpZ2h0KCk7Ly9fZm9vdGVyX2hlaWdodC5qc1xyXG4gICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTsvL19kZXNjdG9wX2hlYWRlcl9mdW5jLmpzXHJcbiAgICBcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBkb2NXaW5kb3cuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnVwUGFnZUJ1dHRvbigpOy8vX3VwX2J1dHRvbi5qc1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAoJChcIi5ndC1oZWFkZXItbWVudVwiKS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTsvL19kZXNjdG9wX2hlYWRlcl9mdW5jLmpzXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBkb2NXaW5kb3cucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRlc2tUb3BNZW51U2Nyb2xsKCk7XHJcbiAgICAgICAgc2VsZi5mb290ZXJIZWlnaHQoKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChndEhlYWRlci5oYXNDbGFzcyhcImd0LW9wZW5cIikpIHNlbGYubW9iaWxlTWVudUNsb3NlKCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyLWFic1wiKSkge1xyXG4gICAgICAgICAgICAkKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LXdpZHRoXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikpIHtcclxuICAgICAgICAgICAgJChcIi5ndC1pbWctaG9sZGVyLWFic1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYm9keS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudC50YXJnZXQpO1xyXG4gICAgXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG52YXIgZ29Ub1RyaXAgPSBuZXcgR29Ub1RyaXAoKTsiXX0=
