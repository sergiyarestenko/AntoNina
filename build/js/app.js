GoToTrip=function(){var t=this,e=$(document.body),i=$(document),s=$(window),n={top:!1,left:!1},o=$("#gt-is-360"),a=($("#gt-is-480"),$("#gt-is-667")),r=$("#gt-is-768"),c=$("#gt-is-1024"),l=($("#gt-is-1231"),$("header")),d=$("footer"),g=$("#gt-wrapper"),u=$("#gt-up"),h=$("#gt-mobile-menu-switch"),f=$(".gt-enter"),p=$("#gt-header-enter-wrapper"),v=$("#gt-header-enter"),m=$("#gt-header-enter-chose"),C=$("#gt-header-enter-close");$("html").niceScroll({cursorborder:"1px solid #6d6d6d",mousescrollstep:"60",bouncescroll:!0,cursorcolor:"#6d6d6d"}),this.fixBody=function(){n.top||n.left||(n.top=i.scrollTop(),n.left=e.offset().left,e.css({position:"fixed",left:n.left+"px",top:-1*n.top+"px"}))},this.unfixBody=function(){e.css({position:"",left:"",top:""}),i.scrollTop(n.top),n.top=!1,n.left=!1},this.footerHeight=function(){d.outerHeight()>s.height()-50?(d.css("position","static"),g.css("margin-bottom",""),u.css("position","static")):(d.css("position",""),u.css("position",""),g.css("margin-bottom",d.outerHeight()+"px"))},this.deskTopMenuScroll=function(){s.scrollTop()>l.outerHeight()?l.addClass("gt-header-scrolled"):l.removeClass("gt-header-scrolled")},this.mobileMenuClose=function(){t.unfixBody(),h.removeClass("gt-open"),l.removeClass("gt-open")},this.mobileMenuOpen=function(){t.fixBody(),l.addClass("gt-open"),h.addClass("gt-open")},h.on("click",function(){$(this).hasClass("gt-open")?t.mobileMenuClose():t.mobileMenuOpen()}),this.openEnterForm=function(){p.addClass("gt-open"),setTimeout(function(){$("#gt-header-registered").addClass("gt-open"),v.addClass("gt-open"),C.addClass("gt-open")})},this.closeEnterForm=function(){C.removeClass("gt-open"),v.removeClass("gt-open"),$("#gt-header-registered").removeClass("gt-open"),t.closeRestorePass(),setTimeout(function(){p.removeClass("gt-open")},750)},this.changeEnterRegistration=function(t){v.hasClass($(t.target).attr("class"))||v.removeClass("gt-chosen-enter").removeClass("gt-chosen-registration").addClass($(t.target).attr("class"))},this.openRestorePass=function(){$("#gt-enter-pass-restore-wrapper").addClass("gt-open")},this.closeRestorePass=function(){$("#gt-enter-pass-restore-wrapper").removeClass("gt-open")},f.each(function(){$(this).on("click",t.openEnterForm)}),C.on("click",t.closeEnterForm),m.on("click",function(e){t.changeEnterRegistration(e)}),$("#gt-enter-form-restore-pass").on("click",t.openRestorePass),$("#gt-enter-pass-restore-submit").on("click",t.closeRestorePass),this.setBackground=function(){$(".gt-img-holder").each(function(){if($(this).attr("data-bg")){var t=$(this).attr("data-bg");a.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/phone/'+t+'")'):c.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/tablet/'+t+'")'):$(this).css("background-image",'url("./img/backgrounds/desktop/'+t+'")')}})},this.imgHolderFunc=function(t){$(t).removeClass("gt-width"),$(t).removeClass("gt-height"),$(t).removeClass("gt-visible");var e=t.outerHeight()/t.outerWidth(),i=t.find("img");i.outerHeight()/i.outerWidth()>e?$(t).addClass("gt-width"):$(t).addClass("gt-height"),$(t).addClass("gt-visible")},$("div").is(".gt-img-holder")&&t.setBackground(),this.createSlider=function(e,i){function n(){if(S>w){var t="";M&&(t='<div class="gt-slider-arrow-num"><i class="gt-slider-num-curr"></i><i>из</i><i class="gt-slider-num-max"></i></div>'),e.find(".gt-slider-arrow-holder").html('<span class = "gt-slider-arrow left"></span>'+t+'<span class = "gt-slider-arrow right"></span>'),e.find(".left").on("click",function(){l(!1)}),e.find(".right").on("click",function(){l(!0)}),M&&u(),u()}b=!0}function c(t){var i=t||e;i.find(".left").off(),i.find(".right").off(),i.find(".gt-slider-arrow-holder").html(""),b=!1}function l(i,s){var n,o;if(s||0===s?T=s:i?T++:T--,E&&(T>S-w&&(T=0),T<0&&(T=S-w),g()),H&&(T>S-w&&(n=x.children().first().clone(),o=x.children().first(),e.hasClass("gt-view-cards-slider")&&(t.destroyViewCardListeners(o),t.createViewCardListeners(n)),x.css("left",-(T-2)*C+"px"),x.append(n),o.remove(),T--),T<0?(n=x.children().last(),o=x.children().last(),e.hasClass("gt-view-cards-slider")&&(t.destroyViewCardListeners(o),t.createViewCardListeners(n)),x.css("left",-(T+2)*C+"px"),x.prepend(n.clone()),o.remove(),T++,d()):d()),M&&u(),V){var a=e.find(".gt-slider-nav span");a.removeClass("gt-active"),$(a[x.find(".gt-open").attr("data-count")]).addClass("gt-active")}}function d(){x.children().removeClass("gt-open"),x.animate({left:-T*C},P),x.children().eq(T).addClass("gt-open")}function g(t){var e=t||T;$(k).removeClass("gt-open"),$(k[e]).addClass("gt-open")}function u(){e.find(".gt-slider-num-curr").text(+x.find(".gt-open").attr("data-count")+1),e.find(".gt-slider-num-max").text(S)}function h(){var t=0,i=0;e.on("touchstart",function(e){var i=e.originalEvent;t=Math.abs(i.touches[0].pageX),console.log("touchstart")}),e.on("touchend",function(e){var s=e.originalEvent;i=Math.abs(s.changedTouches[0].pageX),Math.abs(t-i)>50&&l(t>i?!0:!1)})}function f(t){(t||e).off()}function p(){e.attr("data-count")&&(w=parseInt(e.attr("data-count")),$(r).is(":visible")&&(w=3),$(a).is(":visible")&&(w=2),$(o).is(":visible")&&(w=1))}function v(){C=e.outerWidth()/w,e.find(".gt-slider-container").outerWidth((S+1)*C),k.each(function(){$(this).outerWidth(C),$(this).attr("data-count",$(this).index())})}var m,C,w=1,b=!1,k=e.find(".gt-slider-inner"),x=e.find(".gt-slider-container"),S=k.length,T=i||0,y=e.hasClass("gt-slider-has-arrow"),V=e.hasClass("gt-slider-has-dots"),M=e.hasClass("gt-slider-num"),H=e.hasClass("gt-slider-tram"),P=e.attr("data-duration")||300,E=e.hasClass("gt-slider-fade"),R=e.hasClass("gt-slider-has-clone");E&&g(i),H&&(p(),v(),d()),y&&(e.append('<div class="gt-slider-arrow-holder"></div>'),n()),V&&function(){e.append('<div class="gt-slider-nav"></div>');for(var t=e.find(".gt-slider-nav"),i="",s=0;s<S;s++)i+="<span data-num = "+s+"></span>";t.html(i),t.find("span").first().addClass("gt-active"),e.find(".gt-slider-nav span").on("click",function(){l(!0,+$(this).attr("data-num"))})}(),S>w&&h(),R&&e.find(".gt-slider-inner-cover").each(function(){$(this).on("click",function(){!function(i){if(!$("div").is("#gt-clone")){t.fixBody();var s=$("#gt-body-wrapper");s.append('<div id = "gt-clone-wrapper"   class="container"><div id = "gt-clone" class="gt-slider gt-slider-clone gt-slider-fade gt-slider-num  gt-slider-has-arrow"><div id = "gt-clone-close" class = "gt-slider-clone-close"></div><div  id = "gt-clone-container" class="gt-slider-container"></div></div></div>'),s.show();var n=$("#gt-clone");e.find(".gt-slider-inner").clone(!0).each(function(){$(this).outerWidth(""),$("#gt-clone-container").append($(this))}),t.createSlider(n,i),$("#gt-clone-close").on("click",function(){!function(e){c(e),f(e),$("#gt-clone-close").off(),$("#gt-clone-wrapper").remove(),$("#gt-body-wrapper").hide(),t.unfixBody()}(n)})}}($(this).parent().index())})}),s.resize(function(){m||(m=setTimeout(function(){m=null,f(),H&&(p(),v(),T>S-w&&(T=S-w),S<=w&&(T=0),d()),b&&(c(),n()),S>w&&h()},132))})},$("div").is(".gt-slider")&&$(".gt-slider").each(function(){t.createSlider($(this))}),this.manageGtActiveUlMenu=function(t){"li"!=t.tagName&&(t=$(t).closest("li")),$(t).closest($("ul")).find("li").removeClass("gt-active"),$(t).addClass("gt-active")},$("*").is(".gt-button-menu")&&$(".gt-button-menu").on("click",function(e){e.preventDefault(),t.manageGtActiveUlMenu(e.target)}),$("*").is(".gt-menu-news_items")&&$(".gt-menu-news_items").on("click",function(e){e.preventDefault(),t.manageGtActiveUlMenu(e.target)}),this.setPlayers=function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://www.youtube.com/player_api";var i=$("script")[$("script").length-1];i.parentNode.insertBefore(e,i);$(".gt-video").each(function(){var e=$(this);e.find(".gt-video-switch").on("click",function(){$(this).addClass("gt-open"),e.addClass("gt-open"),t.addYouTube(e)})})},this.addYouTube=function(t){function e(){s.mute(),s.playVideo(),t.addClass("gt-video-on"),t.find(".gt-video-uncover").on("click",i),t.find(".gt-video-pause").on("click",function(){s.pauseVideo()}),t.find(".gt-video-play").on("click",function(){s.playVideo()})}function i(){console.log("playFullScreen");var e=t.find("iframe")[0],i=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;i&&i.bind(e)()}var s,n="gt-video-"+t.index();t.find(".gt-video-switch").hide("slow"),t.find(".gt-video-inner").attr("id",n).addClass("gt-video-foreground"),s=new YT.Player(n,{width:600,height:400,videoId:t.attr("data-youtube"),playerVars:{playlist:t.attr("data-youtube"),color:"white",loop:1,autoplay:1},events:{onReady:e}})},$("div").is(".gt-video")&&t.setPlayers(),this.fixArticleScrollTablePosition=function(t){var e=t,s=e.parent(),n=e.outerHeight(),o=s.position().top,a=o+s.outerHeight(),r=e.outerWidth(),c=i.scrollTop();o+90>c&&e.hasClass("gt-fixed")&&(e.removeClass("gt-fixed"),e.css({left:"",width:""})),o<c+90&&(e.hasClass("gt-fixed")||(e.css({left:e.offset().left+"px",width:r}),e.addClass("gt-fixed")),c-a+n+90>=0?e.addClass("gt-fixed-bottom"):e.removeClass("gt-fixed-bottom"))},this.createArticteScrollTable=function(){if($("div").is(".gt-article")){var e=$(".gt-article"),i=$("#gt-article-scroll-table"),s="";e.each(function(){s+='<div class = "gt-article-scroll"   data-href= "'+$(this).attr("id")+'" ><div class = "gt-article-scroll-shadow"></div><p>'+$(this).find("h2").text()+"</p></div>"}),i.html(s),i.find(".gt-article-scroll").each(function(){$(this).on("click",function(){t.scrollToArticle($(this).attr("data-href"))})})}},this.scrollToArticle=function(t){$("html").animate({scrollTop:$("#"+t).offset().top-110},1100)},this.showArtidleShadow=function(){$(".gt-article").each(function(){var t=$(this).position().top,e=$(this).outerHeight(),i=$(document).scrollTop(),s=0;(s=t>i?0:(i-t)/e)>1&&(s=1);var n=$(".gt-article-scroll")[$(this).index()];$(n).find(".gt-article-scroll-shadow").css("width",100*s+"%")})},$("div").is(".gt-article-table-wrapper")&&$(".gt-article-table-wrapper").each(function(){function e(){r&&(n||(n=setTimeout(function(){n=null,t.fixArticleScrollTablePosition(o),a&&t.showArtidleShadow()})))}function i(){o.outerHeight()>o.parent().outerHeight()?(r=!1,o.css({position:"relative",right:"15px"})):(r=!0,o.css({position:"",right:""}))}var n,o=$(this),a=!1,r=!0;$("div").is(".gt-article-scroll-table")&&(a=!0,t.createArticteScrollTable(),t.showArtidleShadow()),i(),s.scroll(e),s.resize(function(){i(),e()})}),this.setCurrTime=function(){t.currTime();setInterval(t.currTime,3e4)},this.currTime=function(){$(".gt-curr-time").each(function(){var t=new Date;$(this).attr("data-gmt")&&t.setUTCHours(+$(this).attr("data-gmt"));var e=t.getHours(),i=t.getMinutes(),s=t.getDay(),n=t.getDate(),o=t.getMonth(),a=t.getFullYear();e<10&&(e="0"+e),i<10&&(i="0"+i),s=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],o=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][o],$(".gt-curr-time-time")&&$(".gt-curr-time-time").html(e+":"+i),$(".gt-curr-time-date")&&$(".gt-curr-time-date").html(s+", "+n+" "+o+" "+a)})},$("div").is(".gt-curr-time")&&t.setCurrTime(),$("div").is(".gt-inner-scroll")&&$(".gt-inner-scroll").each(function(){$(this).niceScroll({cursoropacitymin:"1",cursoropacitymax:"1",cursorwidth:"2px",cursorborder:"none",mousescrollstep:"60",background:"#CECECE",railoffset:"left",zindex:"auto",cursorcolor:"#CECECE"})}),this.tabSlider=function(){$(".gt-tabs").each(function(){var e=$(this);e.find(".gt-tabs-button").each(function(){$(this).on("click",function(){t.tabSliderAction(e,$(this).index())})}),t.tabSliderAction(e,0,!0)})},this.tabSliderAction=function(t,e,i){var s=$(t.find(".gt-tabs-button")),n=$(t.find(".gt-tabs-main"));t.find(".gt-inner-scroll-tab").each(function(){$("#"+$(this).attr("data-scroll")).hide()}),s.removeClass("active"),n.removeClass("active"),$(s[e]).addClass("active"),$(n[e]).addClass("active"),(0!=$("#"+$(n[e]).find(".gt-inner-scroll-tab").attr("data-scroll")).find(".gt-scroll-cursor").height()||i)&&$("#"+$(n[e]).find(".gt-inner-scroll-tab").attr("data-scroll")).show()},$("div").is(".gt-tabs")&&t.tabSlider(),this.columnPartnership=function(){$("#gt-partnership").addClass("gt-partnership-column")},this.rowPartnership=function(){$("#gt-partnership").removeClass("gt-partnership-column")},$("*").is("#gt-partnership")&&($("#gt-partnership-row").on("click",t.rowPartnership),$("#gt-partnership-column").on("click",t.columnPartnership)),this.createViewCardListeners=function(e){e.find(".gt-view-cards-icons-visit").on("click",function(i){t.closeShareViewCard(e),i.stopPropagation(),t.clickVisitViewCard(e)}),e.find(".gt-view-cards-icons-pin-plus").on("click",function(i){t.closeShareViewCard(e),i.stopPropagation(),t.clickSeenViewCard(e)}),e.find(".gt-view-cards-icons-bookmarks").on("click",function(i){t.closeShareViewCard(e),i.stopPropagation(),t.clickMarkViewCard(e)}),e.find(".gt-view-cards-icons-share").on("click",function(i){event.stopPropagation(),t.clickShareViewCard(e)}),e.find(".gt-view-cards-icons-share").find("a").on("click",function(e,i){e.preventDefault(),t.viewCardSocial(i)}),e.on("click  mouseleave",function(){$(e).find(".gt-view-cards-icons-share").parent().removeClass("gt-active"),t.closeShareViewCard(e)})},this.destroyViewCardListeners=function(t){t.find(".gt-view-cards-icons-visit").off(),t.find(".gt-view-cards-icons-pin-plus").off(),t.find(".gt-view-cards-icons-bookmarks").off(),t.find(".gt-view-cards-icons-share").off(),t.find(".gt-view-cards-icons-share").find("a").off(),t.off()},this.viewCardSocial=function(e){console.log("click social"),t.closeShareViewCard(e)},this.openShareViewCard=function(t){$(t).addClass("gt-active")},this.closeShareViewCard=function(t){$(t).removeClass("gt-active")},this.clickShareViewCard=function(e){var i=e.find(".gt-view-cards-icons-share").parent();i.hasClass("gt-active")?(i.removeClass("gt-active"),t.closeShareViewCard(e)):(i.addClass("gt-active"),t.openShareViewCard(e))},this.clickVisitViewCard=function(t){if(!t.hasClass("gt-active")){var e=t.find(".gt-view-cards-icons-visit").parent();e.hasClass("gt-active")?(e.removeClass("gt-active"),console.log("click not visited now")):(e.addClass("gt-active"),console.log("click visit"))}},this.clickSeenViewCard=function(t){if(!t.hasClass("gt-active")){var e=t.find(".gt-view-cards-icons-pin-plus").parent();e.hasClass("gt-active")?(e.removeClass("gt-active"),console.log("click not seen now")):(e.addClass("gt-active"),console.log("click seen"))}},this.clickMarkViewCard=function(t){if(!t.hasClass("gt-active")){var e=t.find(".gt-view-cards-icons-bookmarks").parent();e.hasClass("gt-active")?(e.removeClass("gt-active"),console.log("click delete bookmark")):(e.addClass("gt-active"),console.log("click add bookmark"))}},$("*").is(".gt-view-cards-inner")&&$(".gt-view-cards-inner").each(function(){t.createViewCardListeners($(this))}),$("#gt-enter-form-facebook").on("click",function(){t.socialEnter("facebook")}),$("#gt-enter-form-twitter").on("click",function(){t.socialEnter("twitter")}),$("#gt-enter-form-google").on("click",function(){t.socialEnter("google")}),$("#gt-reg-form-facebook").on("click",function(){t.socialRegistration("facebook")}),$("#gt-reg-form-twitter").on("click",function(){t.socialRegistration("twitter")}),$("#gt-reg-form-google").on("click",function(){t.socialRegistration("google")}),this.socialRegistration=function(t){alert("Регистрация через "+t)},this.socialEnter=function(t){alert("Вход через "+t)},this.cutNews=function(t){var e,i,s,n=t.parent(),o=n.height(),a=t.find("p");n.children().each(function(){o-=$(this).outerHeight(!0)}),o=o+t.height()-20,a.each(function(){(e=$(this).outerHeight(!0))<o?o-=e:o?(i=Math.floor($(this).text().length*o/e),s=$(this).text().substring(0,i-5),$(this).text(s+"..."),o=0):$(this).css("display","none")})},$("div").is(".js-news-cut")&&($(".js-news-cut").each(function(){t.cutNews($(this))}),s.resize(function(){$(".js-news-cut").each(function(){t.cutNews($(this))})})),this.cutReadMoreSlider=function(){$(".gt-read-more-slider-text-inner").each(function(){t.cutting($(this),160)})},this.cutting=function(t,e){var i=t.text();i.length>e&&(i=i.slice(0,e)+"...",t.text(i))},$("p").is(".gt-read-more-slider-text-inner")&&t.cutReadMoreSlider(),i.ready(function(){t.footerHeight(),t.deskTopMenuScroll()}),this.pageUp=function(){return $("html, body").animate({scrollTop:0},800),!1},this.upPageButton=function(){$(document).scrollTop()>30?u.addClass("gt-visible"):u.removeClass("gt-visible")},u.on("click",t.pageUp),s.scroll(function(){t.upPageButton(),$(".gt-header-menu").is(":visible")&&t.deskTopMenuScroll()}),s.resize(function(){t.deskTopMenuScroll(),t.footerHeight(),l.hasClass("gt-open")&&t.mobileMenuClose(),$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){$(this).removeClass("gt-width"),$(this).removeClass("gt-height"),t.imgHolderFunc($(this))})}),$(window).on("load",function(){$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){t.imgHolderFunc($(this))})}),e.on("click",function(t){}),$("*").is(".gt-menu-news")&&$(".gt-menu-news").find("a").on("click",function(t){t.preventDefault(),$(".gt-menu-news").find("li").removeClass("gt-active"),$(this).parent().addClass("gt-active"),console.log("temp func")})},$(document).ready(function(){new GoToTrip});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJHb1RvVHJpcCIsInNlbGYiLCJ0aGlzIiwiYm9keSIsIiQiLCJkb2N1bWVudCIsImRvYyIsImRvY1dpbmRvdyIsIndpbmRvdyIsImJvZHlQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0b2tlbjM2MCIsInRva2VuNjY3IiwidG9rZW43NjgiLCJ0b2tlbjEwMjQiLCJndEhlYWRlciIsImd0Rm9vdGVyIiwiZ3RXcmFwcGVyIiwidXBCdXR0b24iLCJtb2JpbGVNZW51U3dpdGNoIiwiZW50ZXJCdXR0b24iLCJlbnRlcldyYXBwZXIiLCJlbnRlckZvcm0iLCJlbnRlckNob3NlIiwiZW50ZXJDbG9zZSIsIm5pY2VTY3JvbGwiLCJjdXJzb3Jib3JkZXIiLCJtb3VzZXNjcm9sbHN0ZXAiLCJib3VuY2VzY3JvbGwiLCJjdXJzb3Jjb2xvciIsImZpeEJvZHkiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJjc3MiLCJwb3NpdGlvbiIsInVuZml4Qm9keSIsImZvb3RlckhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwiZGVza1RvcE1lbnVTY3JvbGwiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwibW9iaWxlTWVudUNsb3NlIiwibW9iaWxlTWVudU9wZW4iLCJvbiIsImhhc0NsYXNzIiwib3BlbkVudGVyRm9ybSIsInNldFRpbWVvdXQiLCJjbG9zZUVudGVyRm9ybSIsImNsb3NlUmVzdG9yZVBhc3MiLCJjaGFuZ2VFbnRlclJlZ2lzdHJhdGlvbiIsImV2ZW50IiwidGFyZ2V0IiwiYXR0ciIsIm9wZW5SZXN0b3JlUGFzcyIsImVhY2giLCJzZXRCYWNrZ3JvdW5kIiwicGF0aCIsImlzIiwiaW1nSG9sZGVyRnVuYyIsImVsIiwiaG9sZGVyQ29uc3QiLCJvdXRlcldpZHRoIiwiaW1nIiwiZmluZCIsImNyZWF0ZVNsaWRlciIsImN1cnJTbGlkZXIiLCJjcmVhdGVBcnJvd3MiLCJpbm5lckNvdW50Iiwic2NyZWVuQ29uc3QiLCJudW1Jbm5lciIsIm51bVBhbmVsIiwiaHRtbCIsIm9uZU1vdmVGdW5jdGlvbiIsInNob3dOdW0iLCJhcnJvd3NSZWFkeSIsImRlc3Ryb3lBcnJvd3MiLCJjbG9uZSIsIm9mZiIsImJ1bCIsIm51bSIsImRlbGV0ZWQiLCJjdXJyUG9zaXRpb24iLCJmYWRlIiwiZmFkZVNsaWRlck1vdmUiLCJ0cmFtIiwiY29udGFpbmVyIiwiY2hpbGRyZW4iLCJmaXJzdCIsImRlc3Ryb3lWaWV3Q2FyZExpc3RlbmVycyIsImNyZWF0ZVZpZXdDYXJkTGlzdGVuZXJzIiwiYmFzZVdpZHRoIiwiYXBwZW5kIiwicmVtb3ZlIiwibGFzdCIsInByZXBlbmQiLCJ0cmFtU2xpZGVyTW92ZSIsImRvdHMiLCJhbGxEb3RzIiwiYW5pbWF0ZSIsInRyYW1BbmltYXRpb24iLCJlcSIsImluZGV4IiwiaW5uZXIiLCJ0ZXh0IiwiY3JlYXRlVG91Y2giLCJpbml0aWFsUG9pbnQiLCJmaW5hbFBvaW50IiwiZSIsIm9yaWdpbmFsRXZlbnQiLCJNYXRoIiwiYWJzIiwidG91Y2hlcyIsInBhZ2VYIiwiY29uc29sZSIsImxvZyIsImNoYW5nZWRUb3VjaGVzIiwiZGVzdHJveVRvdWNoIiwiZmluZFNjcmVlbkNvbnN0IiwicGFyc2VJbnQiLCJzZXRCYXNlV2lkdGgiLCJzbGlkZXJUaW1lT3V0IiwibGVuZ3RoIiwiYXJyb3ciLCJoYXNDbG9uZSIsIm5hdiIsInNwYW5zIiwiaSIsImNyZWF0ZURvdHMiLCJjbGlja1Bvc2l0aW9uIiwiYm9keVdyYXBwZXIiLCJzaG93IiwiY2xvbmVTbGlkZXIiLCJoaWRlIiwiZGVzdHJveUNsb25lU2xpZGVyIiwiY3JlYXRlQ2xvbmVTbGlkZXIiLCJwYXJlbnQiLCJyZXNpemUiLCJtYW5hZ2VHdEFjdGl2ZVVsTWVudSIsInRhZ05hbWUiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJzZXRQbGF5ZXJzIiwidGFnIiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJzcmMiLCJsYXN0U2NyaXB0VGFnIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsImN1cnJlbnRQbGF5ZXIiLCJhZGRZb3VUdWJlIiwiaW5pdGlhbGl6ZSIsInBsYXllciIsIm11dGUiLCJwbGF5VmlkZW8iLCJwbGF5RnVsbFNjcmVlbiIsInBhdXNlVmlkZW8iLCJpZnJhbWUiLCJyZXF1ZXN0RnVsbFNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4iLCJiaW5kIiwiZWxJZCIsIllUIiwiUGxheWVyIiwid2lkdGgiLCJ2aWRlb0lkIiwicGxheWVyVmFycyIsInBsYXlsaXN0IiwiY29sb3IiLCJsb29wIiwiYXV0b3BsYXkiLCJldmVudHMiLCJvblJlYWR5IiwiZml4QXJ0aWNsZVNjcm9sbFRhYmxlUG9zaXRpb24iLCJjdXJyVGFibGUiLCJ0YWJsZSIsInRhYmxlUGFyZW50IiwidGFibGVIZWlnaHQiLCJ0YWJsZVBhcmVudFRvcCIsInRhYmxlUGFyZW50Qm90dG9tIiwidGFibGVXaWR0aCIsIndpbmRvd1RvcCIsImNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSIsImFydGljbGVzIiwic2Nyb2xsVG9BcnRpY2xlIiwic2hvd0FydGlkbGVTaGFkb3ciLCJlbEhlaWdodCIsIndpbmRvd1Bvc2l0aW9uIiwieCIsImN1cnJTaGFkb3ciLCJzY3JvbGxUaHJvdHRsZXIiLCJzY3JvbGwiLCJzY3JvbGxUaW1lb3V0Iiwic2hhZG93IiwiY2hlY2tUYWJsZUhlaWdodCIsInJpZ2h0Iiwic2V0Q3VyclRpbWUiLCJjdXJyVGltZSIsInNldEludGVydmFsIiwiZGF0ZSIsIkRhdGUiLCJzZXRVVENIb3VycyIsImhvdXJzIiwiZ2V0SG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsIndlZWtkYXkiLCJnZXREYXkiLCJkYXkiLCJnZXREYXRlIiwibW9udGgiLCJnZXRNb250aCIsInllYXIiLCJnZXRGdWxsWWVhciIsImN1cnNvcm9wYWNpdHltaW4iLCJjdXJzb3JvcGFjaXR5bWF4IiwiY3Vyc29yd2lkdGgiLCJiYWNrZ3JvdW5kIiwicmFpbG9mZnNldCIsInppbmRleCIsInRhYlNsaWRlciIsImN1cnJUYWJzIiwidGFiU2xpZGVyQWN0aW9uIiwiaW5pdCIsImJ1dHRvbnMiLCJtYWluIiwiY29sdW1uUGFydG5lcnNoaXAiLCJyb3dQYXJ0bmVyc2hpcCIsImNsb3NlU2hhcmVWaWV3Q2FyZCIsInN0b3BQcm9wYWdhdGlvbiIsImNsaWNrVmlzaXRWaWV3Q2FyZCIsImNsaWNrU2VlblZpZXdDYXJkIiwiY2xpY2tNYXJrVmlld0NhcmQiLCJldmVudGciLCJjbGlja1NoYXJlVmlld0NhcmQiLCJ2aWV3Q2FyZFNvY2lhbCIsIm9wZW5TaGFyZVZpZXdDYXJkIiwiYnV0dG9uIiwic29jaWFsRW50ZXIiLCJzb2NpYWxSZWdpc3RyYXRpb24iLCJ0b2tlbiIsImFsZXJ0IiwiY3V0TmV3cyIsImN1cnJIZWlnaHQiLCJjdXR0aW5nTGVuZ2h0IiwibmV3VGV4dCIsIm1heEhlaWdodCIsImN1dHRpbmdFbCIsImZsb29yIiwic3Vic3RyaW5nIiwiY3V0UmVhZE1vcmVTbGlkZXIiLCJjdXR0aW5nIiwibmV3c1RleHQiLCJzbGljZSIsInJlYWR5IiwicGFnZVVwIiwidXBQYWdlQnV0dG9uIl0sIm1hcHBpbmdzIjoiQUFLQUEsU0FBVyxXQUVQLElBQUlDLEVBQU9DLEtBQ1BDLEVBQU9DLEVBQUVDLFNBQVNGLE1BQ2xCRyxFQUFNRixFQUFFQyxVQUNSRSxFQUFZSCxFQUFFSSxRQUNkQyxHQUNJQyxLQUFLLEVBQ0xDLE1BQU0sR0FFVkMsRUFBV1IsRUFBRSxjQUViUyxHQURXVCxFQUFFLGNBQ0ZBLEVBQUUsZUFDYlUsRUFBV1YsRUFBRSxjQUNiVyxFQUFZWCxFQUFFLGVBRWRZLEdBRFlaLEVBQUUsZUFDSEEsRUFBRSxXQUNiYSxFQUFXYixFQUFFLFVBQ2JjLEVBQVlkLEVBQUUsZUFDZGUsRUFBV2YsRUFBRSxVQUNiZ0IsRUFBbUJoQixFQUFFLDBCQUNyQmlCLEVBQWNqQixFQUFFLGFBQ2hCa0IsRUFBZWxCLEVBQUUsNEJBQ2pCbUIsRUFBWW5CLEVBQUUsb0JBQ2RvQixFQUFhcEIs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ekksRUFBS3VDLG9CQUNMdkMsRUFBS29DLGVBRURyQixFQUFTOEIsU0FBUyxZQUFZN0MsRUFBSzBDLGtCQUVuQ3ZDLEVBQUUsT0FBT3VELEdBQUcsdUJBQ1p2RCxFQUFFLHNCQUFzQm9ELEtBQUssV0FDekJwRCxFQUFFRixNQUFNd0MsWUFBWSxZQUNwQnRDLEVBQUVGLE1BQU13QyxZQUFZLGFBQ3BCekMsRUFBSzJELGNBQWN4RCxFQUFFRixXQUlqQ0UsRUFBRUksUUFBUXFDLEdBQUcsT0FBUSxXQUNiekMsRUFBRSxPQUFPdUQsR0FBRyx1QkFDWnZELEVBQUUsc0JBQXNCb0QsS0FBSyxXQUN6QnZELEVBQUsyRCxjQUFjeEQsRUFBRUYsV0FLakNDLEVBQUswQyxHQUFHLFFBQVMsU0FBVU8sTUFNdkJoRCxFQUFFLEtBQUt1RCxHQUFHLGtCQUNadkQsRUFBRSxpQkFBaUI2RCxLQUFLLEtBQUtwQixHQUFHLFFBQVEsU0FBVU8sR0FFOUNBLEVBQU0wRixpQkFDTjFJLEVBQUUsaUJBQWlCNkQsS0FBSyxNQUFNdkIsWUFBWSxhQUMxQ3RDLEVBQUVGLE1BQU11SSxTQUFTaEcsU0FBUyxhQUMxQjBFLFFBQVFDLElBQUksZ0JBYXRCaEgsRUFBRUMsVUFBVTRQLE1BRVIsV0FDbUIsSUFBSWpRIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v0YTRg9C90LrRhtC40Y8sINC+0L/RgNC10LTQtdC70Y/RjtGJ0LDRjyDQt9Cw0YDQtdCz0LjRgdGC0LLQuNGA0L7QstCw0L3QvdGL0Lkg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC40LvQuCDQvdC10YJcclxuXHJcbi8vINC/0YDQtdC00YPRgdC80L7RgtGA0LXRgtGMINCy0YvRhdC+0LQg0LjQtyDQsNC60LrQsNGD0L3RgtCwXHJcblxyXG5cclxuR29Ub1RyaXAgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgIGJvZHkgPSAkKGRvY3VtZW50LmJvZHkpLFxyXG4gICAgICAgIGRvYyA9ICQoZG9jdW1lbnQpLFxyXG4gICAgICAgIGRvY1dpbmRvdyA9ICQod2luZG93KSxcclxuICAgICAgICBib2R5UG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHRvcDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxlZnQ6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2tlbjM2MCA9ICQoXCIjZ3QtaXMtMzYwXCIpLFxyXG4gICAgICAgIHRva2VuNDgwID0gJChcIiNndC1pcy00ODBcIiksXHJcbiAgICAgICAgdG9rZW42NjcgPSAkKFwiI2d0LWlzLTY2N1wiKSxcclxuICAgICAgICB0b2tlbjc2OCA9ICQoXCIjZ3QtaXMtNzY4XCIpLFxyXG4gICAgICAgIHRva2VuMTAyNCA9ICQoXCIjZ3QtaXMtMTAyNFwiKSxcclxuICAgICAgICB0b2tlbjEyMzEgPSAkKFwiI2d0LWlzLTEyMzFcIiksXHJcbiAgICAgICAgZ3RIZWFkZXIgPSAkKFwiaGVhZGVyXCIpLFxyXG4gICAgICAgIGd0Rm9vdGVyID0gJChcImZvb3RlclwiKSxcclxuICAgICAgICBndFdyYXBwZXIgPSAkKFwiI2d0LXdyYXBwZXJcIiksXHJcbiAgICAgICAgdXBCdXR0b24gPSAkKFwiI2d0LXVwXCIpLFxyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2ggPSAkKFwiI2d0LW1vYmlsZS1tZW51LXN3aXRjaFwiKSxcclxuICAgICAgICBlbnRlckJ1dHRvbiA9ICQoJy5ndC1lbnRlcicpLFxyXG4gICAgICAgIGVudGVyV3JhcHBlciA9ICQoJyNndC1oZWFkZXItZW50ZXItd3JhcHBlcicpLFxyXG4gICAgICAgIGVudGVyRm9ybSA9ICQoJyNndC1oZWFkZXItZW50ZXInKSxcclxuICAgICAgICBlbnRlckNob3NlID0gJCgnI2d0LWhlYWRlci1lbnRlci1jaG9zZScpLFxyXG4gICAgICAgIGVudGVyQ2xvc2UgPSAkKCcjZ3QtaGVhZGVyLWVudGVyLWNsb3NlJyk7XHJcbiAgICAkKFwiaHRtbFwiKS5uaWNlU2Nyb2xsKHtcclxuICAgICAgICBjdXJzb3Jib3JkZXI6ICcxcHggc29saWQgIzZkNmQ2ZCcsXHJcbiAgICAgICAgbW91c2VzY3JvbGxzdGVwOiAnNjAnLFxyXG4gICAgICAgIGJvdW5jZXNjcm9sbDogdHJ1ZSxcclxuICAgICAgICBjdXJzb3Jjb2xvcjogJyM2ZDZkNmQnXHJcbiAgICB9KVxyXG5cclxuXHJcbiAgICB0aGlzLmZpeEJvZHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGJvZHlQb3NpdGlvbi50b3AgfHwgYm9keVBvc2l0aW9uLmxlZnQpIHJldHVybjtcclxuICAgICAgICBib2R5UG9zaXRpb24udG9wID0gZG9jLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi5sZWZ0ID0gYm9keS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIGJvZHkuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcclxuICAgICAgICAgICAgbGVmdDogYm9keVBvc2l0aW9uLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIHRvcDogLTEgKiBib2R5UG9zaXRpb24udG9wICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLnVuZml4Qm9keSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBib2R5LmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcIlwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBcIlwiLFxyXG4gICAgICAgICAgICB0b3A6IFwiXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2Muc2Nyb2xsVG9wKGJvZHlQb3NpdGlvbi50b3ApO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi50b3AgPSBmYWxzZTtcclxuICAgICAgICBib2R5UG9zaXRpb24ubGVmdCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmZvb3RlckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm9vdGVySGVpZ2h0ID0gZ3RGb290ZXIub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICBpZiAoZm9vdGVySGVpZ2h0ID4gZG9jV2luZG93LmhlaWdodCgpIC0gNTApIHtcclxuICAgICAgICAgICAgZ3RGb290ZXIuY3NzKFwicG9zaXRpb25cIiwgXCJzdGF0aWNcIik7XHJcbiAgICAgICAgICAgIGd0V3JhcHBlci5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5jc3MoXCJwb3NpdGlvblwiLCBcInN0YXRpY1wiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBndEZvb3Rlci5jc3MoXCJwb3NpdGlvblwiLCBcIlwiKTtcclxuICAgICAgICAgICAgdXBCdXR0b24uY3NzKFwicG9zaXRpb25cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIGd0V3JhcHBlci5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIGd0Rm9vdGVyLm91dGVySGVpZ2h0KCkgKyBcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmRlc2tUb3BNZW51U2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChkb2NXaW5kb3cuc2Nyb2xsVG9wKCkgPiBndEhlYWRlci5vdXRlckhlaWdodCgpKSB7XHJcbiAgICAgICAgICAgIGd0SGVhZGVyLmFkZENsYXNzKFwiZ3QtaGVhZGVyLXNjcm9sbGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGd0SGVhZGVyLnJlbW92ZUNsYXNzKFwiZ3QtaGVhZGVyLXNjcm9sbGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgXHJcbiAgICB0aGlzLm1vYmlsZU1lbnVDbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnVuZml4Qm9keSgpO1xyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2gucmVtb3ZlQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgIGd0SGVhZGVyLnJlbW92ZUNsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMubW9iaWxlTWVudU9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5maXhCb2R5KCk7XHJcbiAgICAgICAgZ3RIZWFkZXIuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgIG1vYmlsZU1lbnVTd2l0Y2guYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIG1vYmlsZU1lbnVTd2l0Y2gub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJndC1vcGVuXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGYubW9iaWxlTWVudUNsb3NlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVNZW51T3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5vcGVuRW50ZXJGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVudGVyV3JhcHBlci5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoc2hvdyk7XHJcbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcclxuICAgICAgICAgICAgJCgnI2d0LWhlYWRlci1yZWdpc3RlcmVkJykuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgZW50ZXJGb3JtLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgIGVudGVyQ2xvc2UuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNsb3NlRW50ZXJGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVudGVyQ2xvc2UucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICBlbnRlckZvcm0ucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAkKCcjZ3QtaGVhZGVyLXJlZ2lzdGVyZWQnKS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIHNlbGYuY2xvc2VSZXN0b3JlUGFzcygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoaGlkZSwgNzUwKTtcclxuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xyXG4gICAgICAgICAgICBlbnRlcldyYXBwZXIucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNoYW5nZUVudGVyUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGVudGVyRm9ybS5oYXNDbGFzcygkKGV2ZW50LnRhcmdldCkuYXR0cihcImNsYXNzXCIpKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGVudGVyRm9ybS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1lbnRlclwiKS5yZW1vdmVDbGFzcyhcImd0LWNob3Nlbi1yZWdpc3RyYXRpb25cIikuYWRkQ2xhc3MoJChldmVudC50YXJnZXQpLmF0dHIoXCJjbGFzc1wiKSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMub3BlblJlc3RvcmVQYXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJyNndC1lbnRlci1wYXNzLXJlc3RvcmUtd3JhcHBlcicpLmFkZENsYXNzKCdndC1vcGVuJylcclxuICAgIFxyXG4gICAgfTtcclxuICAgIHRoaXMuY2xvc2VSZXN0b3JlUGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcjZ3QtZW50ZXItcGFzcy1yZXN0b3JlLXdyYXBwZXInKS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGVudGVyQnV0dG9uLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykub24oJ2NsaWNrJywgc2VsZi5vcGVuRW50ZXJGb3JtKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGVudGVyQ2xvc2Uub24oJ2NsaWNrJywgc2VsZi5jbG9zZUVudGVyRm9ybSk7XHJcbiAgICBcclxuICAgIGVudGVyQ2hvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgc2VsZi5jaGFuZ2VFbnRlclJlZ2lzdHJhdGlvbihldmVudCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgJCgnI2d0LWVudGVyLWZvcm0tcmVzdG9yZS1wYXNzJykub24oJ2NsaWNrJyxzZWxmLm9wZW5SZXN0b3JlUGFzcyk7XHJcbiAgICAkKCcjZ3QtZW50ZXItcGFzcy1yZXN0b3JlLXN1Ym1pdCcpLm9uKCdjbGljaycsc2VsZi5jbG9zZVJlc3RvcmVQYXNzKTtcclxuXHJcbiAgICB0aGlzLnNldEJhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltZ0hvbGRlcnMgPSAkKFwiLmd0LWltZy1ob2xkZXJcIik7XHJcbiAgICAgICAgaW1nSG9sZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmF0dHIoXCJkYXRhLWJnXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1iZ1wiKTtcclxuICAgICAgICAgICAgaWYgKHRva2VuNjY3LmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICd1cmwoXCIuL2ltZy9iYWNrZ3JvdW5kcy9waG9uZS8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0b2tlbjEwMjQuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybChcIi4vaW1nL2JhY2tncm91bmRzL3RhYmxldC8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKFxyXG4gICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAndXJsKFwiLi9pbWcvYmFja2dyb3VuZHMvZGVza3RvcC8nICsgcGF0aCArICdcIiknXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuaW1nSG9sZGVyRnVuYyA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICQoZWwpLnJlbW92ZUNsYXNzKFwiZ3Qtd2lkdGhcIik7XHJcbiAgICAgICAgJChlbCkucmVtb3ZlQ2xhc3MoXCJndC1oZWlnaHRcIik7XHJcbiAgICAgICAgJChlbCkucmVtb3ZlQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgICAgIHZhciBob2xkZXJDb25zdCA9IGVsLm91dGVySGVpZ2h0KCkgLyBlbC5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgIGltZyA9IGVsLmZpbmQoJ2ltZycpLFxyXG4gICAgICAgICAgICBpbWdDb25zdCA9IGltZy5vdXRlckhlaWdodCgpIC8gaW1nLm91dGVyV2lkdGgoKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChpbWdDb25zdCA+IGhvbGRlckNvbnN0KSB7XHJcbiAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3Qtd2lkdGhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyXCIpKSB7XHJcbiAgICAgICAgc2VsZi5zZXRCYWNrZ3JvdW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVTbGlkZXIgPSBmdW5jdGlvbiAoY3VyclNsaWRlciwgcG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgc2xpZGVyVGltZU91dCxcclxuICAgICAgICAgICAgc2NyZWVuQ29uc3QgPSAxLFxyXG4gICAgICAgICAgICBiYXNlV2lkdGgsXHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGlubmVyID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1pbm5lclwiKSxcclxuICAgICAgICAgICAgY29udGFpbmVyID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1jb250YWluZXJcIiksXHJcbiAgICAgICAgICAgIGlubmVyQ291bnQgPSBpbm5lci5sZW5ndGgsXHJcbiAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IHBvc2l0aW9uIHx8IDAsXHJcbiAgICAgICAgICAgIGFycm93ID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1oYXMtYXJyb3dcIiksXHJcbiAgICAgICAgICAgIGRvdHMgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWhhcy1kb3RzXCIpLFxyXG4gICAgICAgICAgICBudW1QYW5lbCA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItbnVtXCIpLFxyXG4gICAgICAgICAgICB0cmFtID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci10cmFtXCIpLFxyXG4gICAgICAgICAgICB0cmFtQW5pbWF0aW9uID0gY3VyclNsaWRlci5hdHRyKCdkYXRhLWR1cmF0aW9uJykgfHwgMzAwLFxyXG4gICAgICAgICAgICBmYWRlID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1mYWRlXCIpLFxyXG4gICAgICAgICAgICBoYXNDbG9uZSA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItaGFzLWNsb25lXCIpO1xyXG4gICAgICAgIGlmIChmYWRlKSB7XHJcbiAgICAgICAgICAgIGZhZGVTbGlkZXJNb3ZlKHBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgZmluZFNjcmVlbkNvbnN0KCk7XHJcbiAgICAgICAgICAgIHNldEJhc2VXaWR0aCgpO1xyXG4gICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyb3cpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJndC1zbGlkZXItYXJyb3ctaG9sZGVyXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIGNyZWF0ZUFycm93cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZG90cykge1xyXG4gICAgICAgICAgICBjcmVhdGVEb3RzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgY3JlYXRlVG91Y2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhhc0Nsb25lKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZUNsb25lTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2xvbmVMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZCgnLmd0LXNsaWRlci1pbm5lci1jb3ZlcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ2xvbmVTbGlkZXIoJCh0aGlzKS5wYXJlbnQoKS5pbmRleCgpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcnJvd3MoKSB7XHJcbiAgICAgICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBudW1Jbm5lciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bVBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtSW5uZXIgPSAnPGRpdiBjbGFzcz1cImd0LXNsaWRlci1hcnJvdy1udW1cIj48aSBjbGFzcz1cImd0LXNsaWRlci1udW0tY3VyclwiPjwvaT48aT7QuNC3PC9pPjxpIGNsYXNzPVwiZ3Qtc2xpZGVyLW51bS1tYXhcIj48L2k+PC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIikuaHRtbChcclxuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3MgPSBcImd0LXNsaWRlci1hcnJvdyBsZWZ0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L3NwYW4+XCIgKyBudW1Jbm5lciArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzID0gXCJndC1zbGlkZXItYXJyb3cgcmlnaHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFycm93c0xpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgc2hvd051bSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95QXJyb3dzKGNsb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGNsb25lIHx8IGN1cnJTbGlkZXI7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIubGVmdFwiKS5vZmYoKTtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5yaWdodFwiKS5vZmYoKTtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5ndC1zbGlkZXItYXJyb3ctaG9sZGVyXCIpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgIGFycm93c1JlYWR5ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQXJyb3dzTGlzdGVuZXJzKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIubGVmdFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbihmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIucmlnaHRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAobnVtUGFuZWwpIHNob3dOdW0oKVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZURvdHMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLW5hdlwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB2YXIgbmF2ID0gY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXZcIiksXHJcbiAgICAgICAgICAgICAgICBzcGFucyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzcGFucyArPSBcIjxzcGFuIGRhdGEtbnVtID0gXCIgKyBpICsgXCI+PC9zcGFuPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5hdi5odG1sKHNwYW5zKTtcclxuICAgICAgICAgICAgbmF2LmZpbmQoXCJzcGFuXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItbmF2IHNwYW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24odHJ1ZSwgKyQodGhpcykuYXR0cihcImRhdGEtbnVtXCIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gb25lTW92ZUZ1bmN0aW9uKGJ1bCwgbnVtKSB7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZSxkZWxldGVkO1xyXG4gICAgICAgICAgICBpZiAobnVtIHx8IG51bSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gbnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgZWxzZSBpZiAoYnVsKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24rKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbi0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoZmFkZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0O1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmYWRlU2xpZGVyTW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHRyYW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9ICBjb250YWluZXIuY2hpbGRyZW4oKS5maXJzdCgpLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZCA9IGNvbnRhaW5lci5jaGlsZHJlbigpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VyclNsaWRlci5oYXNDbGFzcygnZ3Qtdmlldy1jYXJkcy1zbGlkZXInKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGVzdHJveVZpZXdDYXJkTGlzdGVuZXJzKGRlbGV0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZVZpZXdDYXJkTGlzdGVuZXJzKGNsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcygnbGVmdCcsICgtKGN1cnJQb3NpdGlvbiAtIDIpICogYmFzZVdpZHRoKSArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQoY2xvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uLS07XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBjb250YWluZXIuY2hpbGRyZW4oKS5sYXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZCA9IGNvbnRhaW5lci5jaGlsZHJlbigpLmxhc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJyU2xpZGVyLmhhc0NsYXNzKCdndC12aWV3LWNhcmRzLXNsaWRlcicpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kZXN0cm95Vmlld0NhcmRMaXN0ZW5lcnMoZGVsZXRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlVmlld0NhcmRMaXN0ZW5lcnMoY2xvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY3NzKCdsZWZ0JywgKC0oY3VyclBvc2l0aW9uICsgMikgKiBiYXNlV2lkdGgpICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnByZXBlbmQoY2xvbmUuY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24rKztcclxuICAgICAgICAgICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChudW1QYW5lbCkgc2hvd051bSgpO1xyXG4gICAgICAgICAgICBpZiAoZG90cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsbERvdHMgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLW5hdiBzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgYWxsRG90cy5yZW1vdmVDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICQoYWxsRG90c1tjb250YWluZXIuZmluZCgnLmd0LW9wZW4nKS5hdHRyKCdkYXRhLWNvdW50JyldKS5hZGRDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiB0cmFtU2xpZGVyTW92ZSgpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFuaW1hdGUoe2xlZnQ6IC1jdXJyUG9zaXRpb24gKiBiYXNlV2lkdGh9LCB0cmFtQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuKCkuZXEoY3VyclBvc2l0aW9uKS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZmFkZVNsaWRlck1vdmUocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gcG9zaXRpb24gfHwgY3VyclBvc2l0aW9uO1xyXG4gICAgICAgICAgICAkKGlubmVyKS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgICAgICAkKGlubmVyW2luZGV4XSkuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzaG93TnVtKCkge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoJy5ndC1zbGlkZXItbnVtLWN1cnInKS50ZXh0KCsoY29udGFpbmVyLmZpbmQoJy5ndC1vcGVuJykuYXR0cignZGF0YS1jb3VudCcpKSArIDEpO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoJy5ndC1zbGlkZXItbnVtLW1heCcpLnRleHQoaW5uZXJDb3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlVG91Y2goKSB7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsUG9pbnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgZmluYWxQb2ludCA9IDA7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIub24oXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFBvaW50ID0gTWF0aC5hYnMoZS50b3VjaGVzWzBdLnBhZ2VYKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidG91Y2hzdGFydFwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIub24oXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgICAgIGZpbmFsUG9pbnQgPSBNYXRoLmFicyhlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYKTtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhpbml0aWFsUG9pbnQgLSBmaW5hbFBvaW50KSA+IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxQb2ludCA+IGZpbmFsUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95VG91Y2goY2xvbmUpIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gY2xvbmUgfHwgY3VyclNsaWRlcjtcclxuICAgICAgICAgICAgZWwub2ZmKCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZFNjcmVlbkNvbnN0KCkge1xyXG4gICAgICAgICAgICBpZiAoY3VyclNsaWRlci5hdHRyKFwiZGF0YS1jb3VudFwiKSkge1xyXG4gICAgICAgICAgICAgICAgc2NyZWVuQ29uc3QgPSBwYXJzZUludChjdXJyU2xpZGVyLmF0dHIoXCJkYXRhLWNvdW50XCIpKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRva2VuNzY4KS5pcyhcIjp2aXNpYmxlXCIpKSBzY3JlZW5Db25zdCA9IDM7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0b2tlbjY2NykuaXMoXCI6dmlzaWJsZVwiKSkgc2NyZWVuQ29uc3QgPSAyO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodG9rZW4zNjApLmlzKFwiOnZpc2libGVcIikpIHNjcmVlbkNvbnN0ID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEJhc2VXaWR0aCgpIHtcclxuICAgICAgICAgICAgYmFzZVdpZHRoID0gY3VyclNsaWRlci5vdXRlcldpZHRoKCkgLyBzY3JlZW5Db25zdDtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1jb250YWluZXJcIikub3V0ZXJXaWR0aCgoaW5uZXJDb3VudCArIDEpICogYmFzZVdpZHRoKTtcclxuICAgICAgICAgICAgaW5uZXIuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm91dGVyV2lkdGgoYmFzZVdpZHRoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jb3VudCcsICQodGhpcykuaW5kZXgoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb25lU2xpZGVyKGNsaWNrUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIjZ3QtY2xvbmVcIikpIHJldHVybjtcclxuICAgICAgICAgICAgc2VsZi5maXhCb2R5KCk7XHJcbiAgICAgICAgICAgIHZhciBib2R5V3JhcHBlciA9ICQoXCIjZ3QtYm9keS13cmFwcGVyXCIpO1xyXG4gICAgICAgICAgICBib2R5V3JhcHBlci5hcHBlbmQoJzxkaXYgaWQgPSBcImd0LWNsb25lLXdyYXBwZXJcIiAgIGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBpZCA9IFwiZ3QtY2xvbmVcIiBjbGFzcz1cImd0LXNsaWRlciBndC1zbGlkZXItY2xvbmUgZ3Qtc2xpZGVyLWZhZGUgZ3Qtc2xpZGVyLW51bSAgZ3Qtc2xpZGVyLWhhcy1hcnJvd1wiPjxkaXYgaWQgPSBcImd0LWNsb25lLWNsb3NlXCIgY2xhc3MgPSBcImd0LXNsaWRlci1jbG9uZS1jbG9zZVwiPjwvZGl2PjxkaXYgIGlkID0gXCJndC1jbG9uZS1jb250YWluZXJcIiBjbGFzcz1cImd0LXNsaWRlci1jb250YWluZXJcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgYm9keVdyYXBwZXIuc2hvdygpO1xyXG4gICAgICAgICAgICB2YXIgY2xvbmVTbGlkZXIgPSAkKCcjZ3QtY2xvbmUnKSxcclxuICAgICAgICAgICAgICAgIGlubmVycyA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItaW5uZXJcIikuY2xvbmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlubmVycy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykub3V0ZXJXaWR0aCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZ3QtY2xvbmUtY29udGFpbmVyJykuYXBwZW5kKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVTbGlkZXIoY2xvbmVTbGlkZXIsIGNsaWNrUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveUNsb25lU2xpZGVyKGNsb25lU2xpZGVyKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lBcnJvd3MoY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICBkZXN0cm95VG91Y2goY2xvbmVTbGlkZXIpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLWNsb3NlXCIpLm9mZigpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWNsb25lLXdyYXBwZXJcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICQoXCIjZ3QtYm9keS13cmFwcGVyXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgc2VsZi51bmZpeEJvZHkoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvLy8vLy8vLy8vcmVzaXplU2xpZGVyXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplU2xpZGVyKCkge1xyXG4gICAgICAgICAgICBpZiAoIXNsaWRlclRpbWVPdXQpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlclRpbWVPdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXJUaW1lT3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemVGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZG9jV2luZG93LnJlc2l6ZShyZXNpemVTbGlkZXIpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplRnVuYygpIHtcclxuICAgICAgICAgICAgZGVzdHJveVRvdWNoKCk7XHJcbiAgICAgICAgICAgIGlmICh0cmFtKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5kU2NyZWVuQ29uc3QoKTtcclxuICAgICAgICAgICAgICAgIHNldEJhc2VXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgcmVzaXplTW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdHJhbVNsaWRlck1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXJyb3dzUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3lBcnJvd3MoKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFycm93cygpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlVG91Y2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiByZXNpemVNb3ZlKCkge1xyXG4gICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID4gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0KVxyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0O1xyXG4gICAgICAgICAgICBpZiAoaW5uZXJDb3VudCA8PSBzY3JlZW5Db25zdCkgY3VyclBvc2l0aW9uID0gMDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3Qtc2xpZGVyXCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1zbGlkZXJcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlU2xpZGVyKCQodGhpcykpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB0aGlzLm1hbmFnZUd0QWN0aXZlVWxNZW51ID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYgKGVsLnRhZ05hbWUgIT0gXCJsaVwiKVxyXG4gICAgICAgICAgICBlbCA9ICQoZWwpLmNsb3Nlc3QoXCJsaVwiKTtcclxuICAgIFxyXG4gICAgICAgICQoZWwpLmNsb3Nlc3QoJChcInVsXCIpKS5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC1hY3RpdmVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIC8vIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1odW5kcmV0LW1lbnVcIikpIHtcclxuICAgIC8vICAgICAkKFwiLmd0LWh1bmRyZXQtbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgLy8gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LWJ1dHRvbi1tZW51XCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1idXR0b24tbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1tZW51LW5ld3NfaXRlbXNcIikpIHtcclxuICAgICAgICAkKFwiLmd0LW1lbnUtbmV3c19pdGVtc1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZWxmLm1hbmFnZUd0QWN0aXZlVWxNZW51KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICAgIHRhZy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgICAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9wbGF5ZXJfYXBpXCI7XHJcbiAgICAgICAgdmFyIGxhc3RTY3JpcHRUYWcgPSAkKFwic2NyaXB0XCIpWyQoXCJzY3JpcHRcIikubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgbGFzdFNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YWcsIGxhc3RTY3JpcHRUYWcpO1xyXG4gICAgICAgIHZhciBndFZpZGVvcyA9ICQoXCIuZ3QtdmlkZW9cIik7XHJcbiAgICAgICAgZ3RWaWRlb3MuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGxheWVyID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgY3VycmVudFBsYXllci5maW5kKFwiLmd0LXZpZGVvLXN3aXRjaFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBsYXllci5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkZFlvdVR1YmUoY3VycmVudFBsYXllcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5hZGRZb3VUdWJlID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgdmFyIHBsYXllcixcclxuICAgICAgICAgICAgZWxJZCA9IFwiZ3QtdmlkZW8tXCIgKyBlbC5pbmRleCgpO1xyXG4gICAgXHJcbiAgICAgICAgZWwuZmluZChcIi5ndC12aWRlby1zd2l0Y2hcIikuaGlkZSgnc2xvdycpO1xyXG4gICAgXHJcbiAgICAgICAgZWxcclxuICAgICAgICAgICAgLmZpbmQoXCIuZ3QtdmlkZW8taW5uZXJcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBlbElkKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJndC12aWRlby1mb3JlZ3JvdW5kXCIpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbiAgICAgICAgICAgIHBsYXllciA9IG5ldyBZVC5QbGF5ZXIoZWxJZCwge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDYwMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICAgICAgICAgICAgdmlkZW9JZDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgIHBsYXllclZhcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5bGlzdDogZWwuYXR0cihcImRhdGEteW91dHViZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDFcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxla2I6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udHJvbHM6IDBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBvblJlYWR5OiBpbml0aWFsaXplXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCk7XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIubXV0ZSgpO1xyXG4gICAgICAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiZ3QtdmlkZW8tb25cIik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tdW5jb3ZlclwiKS5vbignY2xpY2snLCBwbGF5RnVsbFNjcmVlbik7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGF1c2VcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tcGxheVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcGxheUZ1bGxTY3JlZW4oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5RnVsbFNjcmVlbicpO1xyXG4gICAgICAgICAgICB2YXIgaWZyYW1lID0gZWwuZmluZCgnaWZyYW1lJylbMF07XHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0RnVsbFNjcmVlbiA9IGlmcmFtZS5yZXF1ZXN0RnVsbFNjcmVlbiB8fCBpZnJhbWUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgaWZyYW1lLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuO1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuLmJpbmQoaWZyYW1lKSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtdmlkZW9cIikpIHtcclxuICAgICAgICBzZWxmLnNldFBsYXllcnMoKTtcclxuICAgIH1cclxuICAgIHRoaXMuZml4QXJ0aWNsZVNjcm9sbFRhYmxlUG9zaXRpb24gPSBmdW5jdGlvbiAoY3VyclRhYmxlKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlID1jdXJyVGFibGUsXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50ID0gdGFibGUucGFyZW50KCksXHJcbiAgICAgICAgICAgIHRhYmxlSGVpZ2h0ID0gdGFibGUub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgdGFibGVQYXJlbnRUb3AgPSB0YWJsZVBhcmVudC5wb3NpdGlvbigpLnRvcCxcclxuICAgICAgICAgICAgdGFibGVQYXJlbnRCb3R0b20gPSB0YWJsZVBhcmVudFRvcCArIHRhYmxlUGFyZW50Lm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHRhYmxlV2lkdGggPSB0YWJsZS5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgIHdpbmRvd1RvcCA9IGRvYy5zY3JvbGxUb3AoKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3AgKyA5MCA+IHdpbmRvd1RvcCkge1xyXG4gICAgICAgICAgICBpZiAodGFibGUuaGFzQ2xhc3MoXCJndC1maXhlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2xhc3MoXCJndC1maXhlZFwiKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3AgPCB3aW5kb3dUb3AgKyA5MCkge1xyXG4gICAgICAgICAgICBpZiAoIXRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdGFibGUub2Zmc2V0KCkubGVmdCArIFwicHhcIixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGFibGVXaWR0aFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5hZGRDbGFzcyhcImd0LWZpeGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3dUb3AgLSB0YWJsZVBhcmVudEJvdHRvbSArIHRhYmxlSGVpZ2h0ICsgOTAgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGFibGUuYWRkQ2xhc3MoXCJndC1maXhlZC1ib3R0b21cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmVDbGFzcyhcImd0LWZpeGVkLWJvdHRvbVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3JlYXRlQXJ0aWN0ZVNjcm9sbFRhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJChcImRpdlwiKS5pcyhcIi5ndC1hcnRpY2xlXCIpKSByZXR1cm47XHJcbiAgICBcclxuICAgICAgICB2YXIgYXJ0aWNsZXMgPSAkKFwiLmd0LWFydGljbGVcIiksXHJcbiAgICAgICAgICAgIHRhYmxlID0gJChcIiNndC1hcnRpY2xlLXNjcm9sbC10YWJsZVwiKSxcclxuICAgICAgICAgICAgaHRtbCA9IFwiXCI7XHJcbiAgICAgICAgYXJ0aWNsZXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3MgPSBcImd0LWFydGljbGUtc2Nyb2xsXCIgICBkYXRhLWhyZWY9IFwiJyArICQodGhpcykuYXR0cihcImlkXCIpICsgJ1wiID48ZGl2IGNsYXNzID0gXCJndC1hcnRpY2xlLXNjcm9sbC1zaGFkb3dcIj48L2Rpdj48cD4nICtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZChcImgyXCIpLnRleHQoKSArXHJcbiAgICAgICAgICAgICAgICBcIjwvcD48L2Rpdj5cIjtcclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRhYmxlLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgdGFibGUuZmluZCgnLmd0LWFydGljbGUtc2Nyb2xsJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbFRvQXJ0aWNsZSgkKHRoaXMpLmF0dHIoJ2RhdGEtaHJlZicpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5zY3JvbGxUb0FydGljbGUgPSBmdW5jdGlvbiAoYXR0cikge1xyXG4gICAgICAgICQoJ2h0bWwnKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQoJyMnICsgYXR0cikub2Zmc2V0KCkudG9wIC0gMTEwfSwgMTEwMCk7XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5zaG93QXJ0aWRsZVNoYWRvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiLmd0LWFydGljbGVcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyUG9zaXRpb24gPSAkKHRoaXMpLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICAgICAgZWxIZWlnaHQgPSAkKHRoaXMpLm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICB3aW5kb3dQb3NpdGlvbiA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiB3aW5kb3dQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHdpbmRvd1Bvc2l0aW9uIC0gY3VyclBvc2l0aW9uKSAvIGVsSGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh4ID4gMSkgeCA9IDE7XHJcbiAgICAgICAgICAgIHZhciBjdXJyU2hhZG93ID0gJChcIi5ndC1hcnRpY2xlLXNjcm9sbFwiKVskKHRoaXMpLmluZGV4KCldO1xyXG4gICAgICAgICAgICAkKGN1cnJTaGFkb3cpXHJcbiAgICAgICAgICAgICAgICAuZmluZChcIi5ndC1hcnRpY2xlLXNjcm9sbC1zaGFkb3dcIilcclxuICAgICAgICAgICAgICAgIC5jc3MoXCJ3aWR0aFwiLCB4ICogMTAwICsgXCIlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJCgnZGl2JykuaXMoJy5ndC1hcnRpY2xlLXRhYmxlLXdyYXBwZXInKSkge1xyXG4gICAgICAgICQoJy5ndC1hcnRpY2xlLXRhYmxlLXdyYXBwZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJUYWJsZSA9ICQodGhpcyk7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHNoYWRvdyA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQ7XHJcbiAgICAgICAgICAgIGlmICgkKCdkaXYnKS5pcyhcIi5ndC1hcnRpY2xlLXNjcm9sbC10YWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgc2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQXJ0aWN0ZVNjcm9sbFRhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dBcnRpZGxlU2hhZG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNjcm9sbFRocm90dGxlcigpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFzY3JvbGwpIHJldHVybjtcclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uKGN1cnJUYWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGFkb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd0FydGlkbGVTaGFkb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBjaGVja1RhYmxlSGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIGRvY1dpbmRvdy5zY3JvbGwoc2Nyb2xsVGhyb3R0bGVyKTtcclxuICAgICAgICAgICAgZG9jV2luZG93LnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja1RhYmxlSGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUaHJvdHRsZXIoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1RhYmxlSGVpZ2h0KCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyclRhYmxlLm91dGVySGVpZ2h0KCkgPiBjdXJyVGFibGUucGFyZW50KCkub3V0ZXJIZWlnaHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJUYWJsZS5jc3Moeydwb3NpdGlvbic6ICdyZWxhdGl2ZScsICdyaWdodCc6ICcxNXB4J30pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJUYWJsZS5jc3Moeydwb3NpdGlvbic6ICcnLCAncmlnaHQnOiAnJ30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICBcclxuICAgIH1cclxuICAgIHRoaXMuc2V0Q3VyclRpbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jdXJyVGltZSgpO1xyXG4gICAgICAgIHZhciB0ID0gc2V0SW50ZXJ2YWwoc2VsZi5jdXJyVGltZSwgMzAwMDApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMuY3VyclRpbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5ndC1jdXJyLXRpbWVcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cihcImRhdGEtZ210XCIpKSBkYXRlLnNldFVUQ0hvdXJzKCskKHRoaXMpLmF0dHIoXCJkYXRhLWdtdFwiKSk7XHJcbiAgICAgICAgICAgIHZhciBob3VycyA9IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgIHdlZWtkYXkgPSBkYXRlLmdldERheSgpLFxyXG4gICAgICAgICAgICAgICAgZGF5ID0gZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSxcclxuICAgICAgICAgICAgICAgIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICB3ZWVrZGF5cyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBcItCS0L7RgdC60YDQtdGB0LXQvdGM0LVcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCf0L7QvdC10LTQtdC70YzQvdC40LpcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCS0YLQvtGA0L3QuNC6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQodGA0LXQtNCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQp9C10YLQstC10YDQs1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0J/Rj9GC0L3QuNGG0LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCh0YPQsdCx0L7RgtCwXCJcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBtb250aGVzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIFwi0Y/QvdCy0LDRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLRhNC10LLRgNCw0LvRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LzQsNGA0YLQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LDQv9GA0LXQu9GPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvNCw0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC40Y7QvdGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQuNGO0LvRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LDQstCz0YPRgdGC0LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItGB0LXQvdGC0Y/QsdGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC+0LrRgtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvdC+0Y/QsdGA0Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC00LXQutCw0LHRgNGPXCJcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmIChob3VycyA8IDEwKSBob3VycyA9IFwiMFwiICsgaG91cnM7XHJcbiAgICAgICAgICAgIGlmIChtaW51dGVzIDwgMTApIG1pbnV0ZXMgPSBcIjBcIiArIG1pbnV0ZXM7XHJcbiAgICAgICAgICAgIHdlZWtkYXkgPSB3ZWVrZGF5c1t3ZWVrZGF5XTtcclxuICAgICAgICAgICAgbW9udGggPSBtb250aGVzW21vbnRoXTtcclxuICAgICAgICAgICAgaWYgKCQoXCIuZ3QtY3Vyci10aW1lLXRpbWVcIikpXHJcbiAgICAgICAgICAgICAgICAkKFwiLmd0LWN1cnItdGltZS10aW1lXCIpLmh0bWwoaG91cnMgKyBcIjpcIiArIG1pbnV0ZXMpO1xyXG4gICAgICAgICAgICBpZiAoJChcIi5ndC1jdXJyLXRpbWUtZGF0ZVwiKSlcclxuICAgICAgICAgICAgICAgICQoXCIuZ3QtY3Vyci10aW1lLWRhdGVcIikuaHRtbChcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5ICsgXCIsIFwiICsgZGF5ICsgXCIgXCIgKyBtb250aCArIFwiIFwiICsgeWVhclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtY3Vyci10aW1lXCIpKSB7XHJcbiAgICAgICAgc2VsZi5zZXRDdXJyVGltZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWlubmVyLXNjcm9sbFwiKSkge1xyXG4gICAgICAgICQoJy5ndC1pbm5lci1zY3JvbGwnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgICAgICAgICAkKHRoaXMpLm5pY2VTY3JvbGwoe1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yb3BhY2l0eW1pbjogJzEnLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yb3BhY2l0eW1heDogJzEnLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yd2lkdGg6ICcycHgnLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yYm9yZGVyOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICBtb3VzZXNjcm9sbHN0ZXA6ICc2MCcsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiNDRUNFQ0VcIixcclxuICAgICAgICAgICAgICAgIHJhaWxvZmZzZXQ6ICdsZWZ0JyxcclxuICAgICAgICAgICAgICAgIHppbmRleDogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3Jjb2xvcjogXCIjQ0VDRUNFXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8vIF9pbm5lcl9zY3JvbGwgIG11c3QgYmUgYmVmb3JlIF90YWJfc2xpZGVyIC0gIWltcG9ydGFudFxyXG5cclxuICAgIHRoaXMudGFiU2xpZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJTbGlkZXJzID0gJChcIi5ndC10YWJzXCIpO1xyXG4gICAgICAgIHRhYlNsaWRlcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyVGFicyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGN1cnJUYWJzLmZpbmQoXCIuZ3QtdGFicy1idXR0b25cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudGFiU2xpZGVyQWN0aW9uKGN1cnJUYWJzLCAkKHRoaXMpLmluZGV4KCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLnRhYlNsaWRlckFjdGlvbihjdXJyVGFicywwLHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy50YWJTbGlkZXJBY3Rpb24gPSBmdW5jdGlvbiAoZWwsIG51bSAsaW5pdCkge1xyXG4gICAgICAgIHZhciBidXR0b25zID0gJChlbC5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpKSxcclxuICAgICAgICAgICAgbWFpbiA9ICAkKGVsLmZpbmQoXCIuZ3QtdGFicy1tYWluXCIpKVxyXG4gICAgICAgIGVsLmZpbmQoJy5ndC1pbm5lci1zY3JvbGwtdGFiJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyMnICsgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcpKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYnV0dG9ucy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICBtYWluLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICQoYnV0dG9uc1tudW1dKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKG1haW5bbnVtXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICBcclxuICAgICAgICBpZigkKCcjJyArICQobWFpbltudW1dKS5maW5kKCcuZ3QtaW5uZXItc2Nyb2xsLXRhYicpLmF0dHIoJ2RhdGEtc2Nyb2xsJykpLmZpbmQoJy5ndC1zY3JvbGwtY3Vyc29yJykuaGVpZ2h0KCkgIT0gMCB8fCBpbml0KXtcclxuICAgICAgICAgICAgJCgnIycgKyAkKG1haW5bbnVtXSkuZmluZCgnLmd0LWlubmVyLXNjcm9sbC10YWInKS5hdHRyKCdkYXRhLXNjcm9sbCcpKS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtdGFic1wiKSkge1xyXG4gICAgICAgIHNlbGYudGFiU2xpZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jb2x1bW5QYXJ0bmVyc2hpcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiI2d0LXBhcnRuZXJzaGlwXCIpLmFkZENsYXNzKCdndC1wYXJ0bmVyc2hpcC1jb2x1bW4nKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnJvd1BhcnRuZXJzaGlwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIjZ3QtcGFydG5lcnNoaXBcIikucmVtb3ZlQ2xhc3MoJ2d0LXBhcnRuZXJzaGlwLWNvbHVtbicpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJChcIipcIikuaXMoXCIjZ3QtcGFydG5lcnNoaXBcIikpIHtcclxuICAgIFxyXG4gICAgICAgICQoJyNndC1wYXJ0bmVyc2hpcC1yb3cnKS5vbignY2xpY2snLHNlbGYucm93UGFydG5lcnNoaXApXHJcbiAgICAgICAgJCgnI2d0LXBhcnRuZXJzaGlwLWNvbHVtbicpLm9uKCdjbGljaycsc2VsZi5jb2x1bW5QYXJ0bmVyc2hpcClcclxuICAgIFxyXG4gICAgXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vL2RvZXMgbm90IHdvcmtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVZpZXdDYXJkTGlzdGVuZXJzID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtdmlzaXQnKS5vbignY2xpY2snLGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBzZWxmLmNsb3NlU2hhcmVWaWV3Q2FyZChlbCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBzZWxmLmNsaWNrVmlzaXRWaWV3Q2FyZChlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtcGluLXBsdXMnKS5vbignY2xpY2snLGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBzZWxmLmNsb3NlU2hhcmVWaWV3Q2FyZChlbCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBzZWxmLmNsaWNrU2VlblZpZXdDYXJkKGVsKTtcclxuICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLWJvb2ttYXJrcycpLm9uKCdjbGljaycsZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHNlbGYuY2xvc2VTaGFyZVZpZXdDYXJkKGVsKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHNlbGYuY2xpY2tNYXJrVmlld0NhcmQoZWwpO1xyXG4gICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtc2hhcmUnKS5vbignY2xpY2snLGZ1bmN0aW9uIChldmVudGcpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHNlbGYuY2xpY2tTaGFyZVZpZXdDYXJkKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbC5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1zaGFyZScpLmZpbmQoJ2EnKS5vbignY2xpY2snLGZ1bmN0aW9uIChldmVudCxlbCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHNlbGYudmlld0NhcmRTb2NpYWwoZWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsLm9uKCdjbGljayAgbW91c2VsZWF2ZScsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKGVsKS5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1zaGFyZScpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgc2VsZi5jbG9zZVNoYXJlVmlld0NhcmQoZWwpO1xyXG4gICAgXHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuZGVzdHJveVZpZXdDYXJkTGlzdGVuZXJzID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtdmlzaXQnKS5vZmYoKTtcclxuICAgICAgICBlbC5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1waW4tcGx1cycpLm9mZigpO1xyXG4gICAgICAgIGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLWJvb2ttYXJrcycpLm9mZigpO1xyXG4gICAgICAgIGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLXNoYXJlJykub2ZmKCk7XHJcbiAgICAgICAgZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtc2hhcmUnKS5maW5kKCdhJykub2ZmKCk7XHJcbiAgICAgICAgZWwub2ZmKCk7XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy52aWV3Q2FyZFNvY2lhbCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBzb2NpYWwnKTtcclxuICAgICAgICBzZWxmLmNsb3NlU2hhcmVWaWV3Q2FyZChlbCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5vcGVuU2hhcmVWaWV3Q2FyZCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICQoZWwpLmFkZENsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmNsb3NlU2hhcmVWaWV3Q2FyZCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICQoZWwpLnJlbW92ZUNsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNsaWNrU2hhcmVWaWV3Q2FyZCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgXHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLXNoYXJlJykucGFyZW50KCk7XHJcbiAgICAgICAgaWYoYnV0dG9uLmhhc0NsYXNzKCdndC1hY3RpdmUnKSl7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHNlbGYuY2xvc2VTaGFyZVZpZXdDYXJkKGVsKTtcclxuICAgIFxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ2d0LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBzZWxmLm9wZW5TaGFyZVZpZXdDYXJkKGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jbGlja1Zpc2l0Vmlld0NhcmQgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBpZihlbC5oYXNDbGFzcygnZ3QtYWN0aXZlJykpIHJldHVybjtcclxuICAgICAgICB2YXIgYnV0dG9uID0gZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtdmlzaXQnKS5wYXJlbnQoKTtcclxuICAgICAgICBpZihidXR0b24uaGFzQ2xhc3MoJ2d0LWFjdGl2ZScpKXtcclxuICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUNsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrIG5vdCB2aXNpdGVkIG5vdycpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ2d0LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2sgdmlzaXQnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmNsaWNrU2VlblZpZXdDYXJkID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYoZWwuaGFzQ2xhc3MoJ2d0LWFjdGl2ZScpKSByZXR1cm47XHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLXBpbi1wbHVzJykucGFyZW50KCk7XHJcbiAgICAgICAgaWYoYnV0dG9uLmhhc0NsYXNzKCdndC1hY3RpdmUnKSl7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBub3Qgc2VlbiBub3cnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrIHNlZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jbGlja01hcmtWaWV3Q2FyZCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmKGVsLmhhc0NsYXNzKCdndC1hY3RpdmUnKSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBidXR0b24gPSBlbC5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1ib29rbWFya3MnKS5wYXJlbnQoKTtcclxuICAgICAgICBpZihidXR0b24uaGFzQ2xhc3MoJ2d0LWFjdGl2ZScpKXtcclxuICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUNsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrIGRlbGV0ZSBib29rbWFyaycpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ2d0LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2sgYWRkIGJvb2ttYXJrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYgKCQoXCIqXCIpLmlzKFwiLmd0LXZpZXctY2FyZHMtaW5uZXJcIikpIHtcclxuICAgIFxyXG4gICAgICAgICQoJy5ndC12aWV3LWNhcmRzLWlubmVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlVmlld0NhcmRMaXN0ZW5lcnMoJCh0aGlzKSk7XHJcbiAgICAgICAgfSlcclxuICAgIFxyXG4gICAgXHJcbiAgICB9XHJcbiAgICAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0L3QsNC70LjRh9C40LUgLSDQvtCx0YHRg9C00LjRgtGMINGBINCx0LXQutC+0Lwg0L/QvtCy0LXQtNC10LPRgtC1XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1mYWNlYm9vaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbEVudGVyKCdmYWNlYm9vaycpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1lbnRlci1mb3JtLXR3aXR0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcigndHdpdHRlcicpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1lbnRlci1mb3JtLWdvb2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbEVudGVyKCdnb29nbGUnKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJyNndC1yZWctZm9ybS1mYWNlYm9vaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbFJlZ2lzdHJhdGlvbignZmFjZWJvb2snKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tdHdpdHRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNvY2lhbFJlZ2lzdHJhdGlvbigndHdpdHRlcicpXHJcbiAgICB9KTtcclxuICAgICQoJyNndC1yZWctZm9ybS1nb29nbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ2dvb2dsZScpXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy5zb2NpYWxSZWdpc3RyYXRpb24gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIFxyXG4gICAgICAgIGFsZXJ0KFwi0KDQtdCz0LjRgdGC0YDQsNGG0LjRjyDRh9C10YDQtdC3IFwiICsgdG9rZW4pXHJcbiAgICBcclxuICAgIH07XHJcbiAgICB0aGlzLnNvY2lhbEVudGVyID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBcclxuICAgICAgICBhbGVydChcItCS0YXQvtC0INGH0LXRgNC10LcgXCIgKyB0b2tlbilcclxuICAgIFxyXG4gICAgfTtcclxuICAgdGhpcy5jdXROZXdzID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50KCksXHJcbiAgICAgICAgICAgbWF4SGVpZ2h0ID0gcGFyZW50LmhlaWdodCgpLFxyXG4gICAgICAgICAgIGN1dHRpbmdFbCA9IGVsLmZpbmQoJ3AnKSxcclxuICAgICAgICAgICBjdXJySGVpZ2h0LFxyXG4gICAgICAgICAgIGN1dHRpbmdMZW5naHQsXHJcbiAgICAgICAgICAgbmV3VGV4dDtcclxuICAgICAgIHBhcmVudC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIG1heEhlaWdodCAtPSAkKHRoaXMpLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICAgbWF4SGVpZ2h0ID0gbWF4SGVpZ2h0ICsgZWwuaGVpZ2h0KCkgLSAyMDtcclxuICAgXHJcbiAgIFxyXG4gICAgICAgY3V0dGluZ0VsLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIGN1cnJIZWlnaHQgPSAkKHRoaXMpLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICBcclxuICAgICAgICAgICBpZiAoY3VyckhlaWdodCA8IG1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICBtYXhIZWlnaHQgLT0gY3VyckhlaWdodFxyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGlmICghbWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBjdXR0aW5nTGVuZ2h0ID0gTWF0aC5mbG9vcigkKHRoaXMpLnRleHQoKS5sZW5ndGggKiBtYXhIZWlnaHQgLyBjdXJySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgIG5ld1RleHQgPSAkKHRoaXMpLnRleHQoKS5zdWJzdHJpbmcoMCwgY3V0dGluZ0xlbmdodCAtIDUpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gY3V0TGFzdFN5bWJvbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KChuZXdUZXh0KSArICcuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vXHJcbiAgICAgICAvLyBmdW5jdGlvbiBjdXRMYXN0U3ltYm9sKCkge1xyXG4gICAgICAgLy8gICAgIHZhciBzdHJMZW5ndGggPSBuZXdUZXh0Lmxlbmd0aDtcclxuICAgICAgIC8vICAgICBpZihuZXdUZXh0LmNoYXJBdChzdHJMZW5ndGggLSAxKSA9PSAnICcpe1xyXG4gICAgICAgLy8gICAgICAgICBuZXdUZXh0PSBuZXdUZXh0LnN1YnN0cmluZygwLCBzdHJMZW5ndGggLSAxKTtcclxuICAgICAgIC8vICAgICB9ZWxzZXtcclxuICAgICAgIC8vICAgICAgICAgbmV3VGV4dCA9IG5ld1RleHQuc3Vic3RyaW5nKDAsIHN0ckxlbmd0aCAtIDEpO1xyXG4gICAgICAgLy8gICAgICAgICBzZXRUaW1lb3V0KGN1dExhc3RTeW1ib2wpXHJcbiAgICAgICAvLyAgICAgfVxyXG4gICAgICAgLy8gfVxyXG4gICBcclxuICAgfTtcclxuICAgXHJcbiAgIFxyXG4gICBpZiAoJChcImRpdlwiKS5pcyhcIi5qcy1uZXdzLWN1dFwiKSkge1xyXG4gICAgICAgJChcIi5qcy1uZXdzLWN1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBzZWxmLmN1dE5ld3MoJCh0aGlzKSk7XHJcbiAgICAgICB9KTtcclxuICAgXHJcbiAgIFxyXG4gICAgICAgZG9jV2luZG93LnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgJChcIi5qcy1uZXdzLWN1dFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgc2VsZi5jdXROZXdzKCQodGhpcykpO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgfSk7XHJcbiAgIH1cclxuICAgXHJcbiAgIFxyXG4gICB0aGlzLmN1dFJlYWRNb3JlU2xpZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgdmFyIGN1dHRpbmdzID0gJChcIi5ndC1yZWFkLW1vcmUtc2xpZGVyLXRleHQtaW5uZXJcIik7XHJcbiAgICAgICBjdXR0aW5ncy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBzZWxmLmN1dHRpbmcoJCh0aGlzKSwgMTYwKTtcclxuICAgICAgIH0pO1xyXG4gICB9O1xyXG4gICBcclxuICAgdGhpcy5jdXR0aW5nID0gZnVuY3Rpb24gKGVsLCBudW0pIHtcclxuICAgICAgIHZhciBuZXdzVGV4dCA9IGVsLnRleHQoKTtcclxuICAgICAgIGlmIChuZXdzVGV4dC5sZW5ndGggPiBudW0pIHtcclxuICAgICAgICAgICBuZXdzVGV4dCA9IG5ld3NUZXh0LnNsaWNlKDAsIG51bSkgKyBcIi4uLlwiO1xyXG4gICAgICAgICAgIGVsLnRleHQobmV3c1RleHQpO1xyXG4gICAgICAgfVxyXG4gICB9O1xyXG4gICBcclxuICAgXHJcbiAgIGlmICgkKFwicFwiKS5pcyhcIi5ndC1yZWFkLW1vcmUtc2xpZGVyLXRleHQtaW5uZXJcIikpIHtcclxuICAgICAgIHNlbGYuY3V0UmVhZE1vcmVTbGlkZXIoKTtcclxuICAgfVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgIGRvYy5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgICAgICBzZWxmLmZvb3RlckhlaWdodCgpOy8vX2Zvb3Rlcl9oZWlnaHQuanNcclxuICAgICAgICBzZWxmLmRlc2tUb3BNZW51U2Nyb2xsKCk7Ly9fZGVzY3RvcF9oZWFkZXJfZnVuYy5qc1xyXG4gICAgXHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgdGhpcy5wYWdlVXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sIDgwMCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy51cFBhZ2VCdXR0b24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID4gMzApIHtcclxuICAgICAgICAgICAgdXBCdXR0b24uYWRkQ2xhc3MoXCJndC12aXNpYmxlXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLnJlbW92ZUNsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHVwQnV0dG9uLm9uKFwiY2xpY2tcIiwgc2VsZi5wYWdlVXApO1xyXG4gICAgXHJcbiAgICBkb2NXaW5kb3cuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnVwUGFnZUJ1dHRvbigpOy8vX3VwX2J1dHRvbi5qc1xyXG4gICAgICAgIGlmICgkKFwiLmd0LWhlYWRlci1tZW51XCIpLmlzKFwiOnZpc2libGVcIikpIHtcclxuICAgICAgICAgICAgc2VsZi5kZXNrVG9wTWVudVNjcm9sbCgpOy8vX2Rlc2N0b3BfaGVhZGVyX2Z1bmMuanNcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGRvY1dpbmRvdy5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTtcclxuICAgICAgICBzZWxmLmZvb3RlckhlaWdodCgpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKGd0SGVhZGVyLmhhc0NsYXNzKFwiZ3Qtb3BlblwiKSkgc2VsZi5tb2JpbGVNZW51Q2xvc2UoKTtcclxuICAgIFxyXG4gICAgICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpKSB7XHJcbiAgICAgICAgICAgICQoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiZ3Qtd2lkdGhcIik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiZ3QtaGVpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbWdIb2xkZXJGdW5jKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyLWFic1wiKSkge1xyXG4gICAgICAgICAgICAkKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbWdIb2xkZXJGdW5jKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBib2R5Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldCk7XHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1tZW51LW5ld3NcIikpIHtcclxuICAgICAgJCgnLmd0LW1lbnUtbmV3cycpLmZpbmQoJ2EnKS5vbignY2xpY2snLGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgXHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgJCgnLmd0LW1lbnUtbmV3cycpLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2d0LWFjdGl2ZScpO1xyXG4gICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygndGVtcCBmdW5jJylcclxuICAgICAgfSlcclxuICAgIFxyXG4gICAgICAgIC8vIHRvZG8gdGVtcCBmdW5jXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG59O1xyXG4kKGRvY3VtZW50KS5yZWFkeShcclxuXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdvVG9UcmlwID0gbmV3IEdvVG9UcmlwKCk7XHJcbiAgICB9XHJcbik7Il19
