GoToTrip=function(){function t(){b||(b=setTimeout(function(){b=null,e.fixArticleScrollTablePosition(),k&&e.showArtidleShadow()}))}var e=this,i=$(document.body),s=$(document),o=$(window),n={top:!1,left:!1},a=$("#gt-is-360"),r=($("#gt-is-480"),$("#gt-is-667")),c=$("#gt-is-768"),l=$("#gt-is-1024"),d=($("#gt-is-1231"),$("header")),g=$("footer"),u=$("#gt-wrapper"),h=$("#gt-up"),f=$("#gt-mobile-menu-switch"),v=$(".gt-enter"),p=$("#gt-header-enter-wrapper"),m=$("#gt-header-enter"),C=$("#gt-header-enter-chose"),w=$("#gt-header-enter-close");if($("html").niceScroll({cursorborder:"1px solid #6d6d6d",mousescrollstep:"60",bouncescroll:!0,cursorcolor:"#6d6d6d"}),this.fixBody=function(){n.top||n.left||(n.top=s.scrollTop(),n.left=i.offset().left,i.css({position:"fixed",left:n.left+"px",top:-1*n.top+"px"}))},this.unfixBody=function(){i.css({position:"",left:"",top:""}),s.scrollTop(n.top),n.top=!1,n.left=!1},this.footerHeight=function(){g.outerHeight()>o.height()-50?(g.css("position","static"),u.css("margin-bottom",""),h.css("position","static")):(g.css("position",""),h.css("position",""),u.css("margin-bottom",g.outerHeight()+"px"))},this.deskTopMenuScroll=function(){o.scrollTop()>d.outerHeight()?d.addClass("gt-header-scrolled"):d.removeClass("gt-header-scrolled")},this.mobileMenuClose=function(){e.unfixBody(),f.removeClass("gt-open"),d.removeClass("gt-open")},this.mobileMenuOpen=function(){e.fixBody(),d.addClass("gt-open"),f.addClass("gt-open")},f.on("click",function(){$(this).hasClass("gt-open")?e.mobileMenuClose():e.mobileMenuOpen()}),this.openEnterForm=function(){p.addClass("gt-open"),setTimeout(function(){$("#gt-header-registered").addClass("gt-open"),m.addClass("gt-open"),w.addClass("gt-open")})},this.closeEnterForm=function(){w.removeClass("gt-open"),m.removeClass("gt-open"),$("#gt-header-registered").removeClass("gt-open"),e.closeRestorePass(),setTimeout(function(){p.removeClass("gt-open")},750)},this.changeEnterRegistration=function(t){m.hasClass($(t.target).attr("class"))||m.removeClass("gt-chosen-enter").removeClass("gt-chosen-registration").addClass($(t.target).attr("class"))},this.openRestorePass=function(){$("#gt-enter-pass-restore-wrapper").addClass("gt-open")},this.closeRestorePass=function(){$("#gt-enter-pass-restore-wrapper").removeClass("gt-open")},v.each(function(){$(this).on("click",e.openEnterForm)}),w.on("click",e.closeEnterForm),C.on("click",function(t){e.changeEnterRegistration(t)}),$("#gt-enter-form-restore-pass").on("click",e.openRestorePass),$("#gt-enter-pass-restore-submit").on("click",e.closeRestorePass),this.setBackground=function(){$(".gt-img-holder").each(function(){if($(this).attr("data-bg")){var t=$(this).attr("data-bg");r.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/phone/'+t+'")'):l.is(":visible")?$(this).css("background-image",'url("./img/backgrounds/tablet/'+t+'")'):$(this).css("background-image",'url("./img/backgrounds/desktop/'+t+'")')}})},this.imgHolderFunc=function(t){$(t).removeClass("gt-width"),$(t).removeClass("gt-height"),$(t).removeClass("gt-visible");var e=t.outerHeight()/t.outerWidth(),i=t.find("img");i.outerHeight()/i.outerWidth()>e?$(t).addClass("gt-width"):$(t).addClass("gt-height"),$(t).addClass("gt-visible")},$("div").is(".gt-img-holder")&&e.setBackground(),this.createSlider=function(t,i){function s(){if(S>w){var e="";V&&(e='<div class="gt-slider-arrow-num"><i class="gt-slider-num-curr"></i><i>из</i><i class="gt-slider-num-max"></i></div>'),t.find(".gt-slider-arrow-holder").html('<span class = "gt-slider-arrow left"></span>'+e+'<span class = "gt-slider-arrow right"></span>'),t.find(".left").on("click",function(){l(!1)}),t.find(".right").on("click",function(){l(!0)}),V&&u(),u()}b=!0}function n(e){var i=e||t;i.find(".left").off(),i.find(".right").off(),i.find(".gt-slider-arrow-holder").html(""),b=!1}function l(e,i){if(i||0===i?T=i:e?T++:T--,R&&(T>S-w&&(T=0),T<0&&(T=S-w),g()),E&&(T>S-w&&(x.css("left",-(T-2)*C+"px"),x.append(x.children().first().clone()),x.children().first().remove(),T--),T<0?(x.css("left",-(T+2)*C+"px"),x.prepend(x.children().last().clone()),x.children().last().remove(),T++,d()):d()),V&&u(),M){var s=t.find(".gt-slider-nav span");s.removeClass("gt-active"),$(s[x.find(".gt-open").attr("data-count")]).addClass("gt-active")}}function d(){x.children().removeClass("gt-open"),x.animate({left:-T*C},H),x.children().eq(T).addClass("gt-open")}function g(t){var e=t||T;$(k).removeClass("gt-open"),$(k[e]).addClass("gt-open")}function u(){t.find(".gt-slider-num-curr").text(+x.find(".gt-open").attr("data-count")+1),t.find(".gt-slider-num-max").text(S)}function h(){var e=0,i=0;t.on("touchstart",function(t){var i=t.originalEvent;e=Math.abs(i.touches[0].pageX),console.log("touchstart")}),t.on("touchend",function(t){var s=t.originalEvent;i=Math.abs(s.changedTouches[0].pageX),Math.abs(e-i)>50&&l(e>i?!0:!1)})}function f(e){(e||t).off()}function v(){t.attr("data-count")&&(w=parseInt(t.attr("data-count")),$(c).is(":visible")&&(w=3),$(r).is(":visible")&&(w=2),$(a).is(":visible")&&(w=1))}function p(){C=t.outerWidth()/w,t.find(".gt-slider-container").outerWidth((S+1)*C),k.each(function(){$(this).outerWidth(C),$(this).attr("data-count",$(this).index())})}var m,C,w=1,b=!1,k=t.find(".gt-slider-inner"),x=t.find(".gt-slider-container"),S=k.length,T=i||0,y=t.hasClass("gt-slider-has-arrow"),M=t.hasClass("gt-slider-has-dots"),V=t.hasClass("gt-slider-num"),E=t.hasClass("gt-slider-tram"),H=t.attr("data-duration")||300,R=t.hasClass("gt-slider-fade"),A=t.hasClass("gt-slider-has-clone");R&&g(i),E&&(v(),p(),d()),y&&(t.append('<div class="gt-slider-arrow-holder"></div>'),s()),M&&function(){t.append('<div class="gt-slider-nav"></div>');for(var e=t.find(".gt-slider-nav"),i="",s=0;s<S;s++)i+="<span data-num = "+s+"></span>";e.html(i),e.find("span").first().addClass("gt-active"),t.find(".gt-slider-nav span").on("click",function(){l(!0,+$(this).attr("data-num"))})}(),S>w&&h(),A&&t.find(".gt-slider-inner-cover").each(function(){$(this).on("click",function(){!function(i){if(!$("div").is("#gt-clone")){e.fixBody();var s=$("#gt-body-wrapper");s.append('<div id = "gt-clone-wrapper"   class="container"><div id = "gt-clone" class="gt-slider gt-slider-clone gt-slider-fade gt-slider-num  gt-slider-has-arrow"><div id = "gt-clone-close" class = "gt-slider-clone-close"></div><div  id = "gt-clone-container" class="gt-slider-container"></div></div></div>'),s.show();var o=$("#gt-clone");t.find(".gt-slider-inner").clone(!0).each(function(){$(this).outerWidth(""),$("#gt-clone-container").append($(this))}),e.createSlider(o,i),$("#gt-clone-close").on("click",function(){!function(t){n(t),f(t),$("#gt-clone-close").off(),$("#gt-clone-wrapper").remove(),$("#gt-body-wrapper").hide(),e.unfixBody()}(o)})}}($(this).parent().index())})}),o.resize(function(){m||(m=setTimeout(function(){m=null,f(),E&&(v(),p(),T>S-w&&(T=S-w),S<=w&&(T=0),d()),b&&(n(),s()),S>w&&h()},132))})},$("div").is(".gt-slider")&&$(".gt-slider").each(function(){e.createSlider($(this))}),this.manageGtActiveUlMenu=function(t){"li"!=t.tagName&&(t=$(t).closest("li")),$(t).closest($("ul")).find("li").removeClass("gt-active"),$(t).addClass("gt-active")},$("*").is(".gt-button-menu")&&$(".gt-button-menu").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),$("*").is(".gt-menu-news")&&$(".gt-menu-news").on("click",function(t){t.preventDefault(),e.manageGtActiveUlMenu(t.target)}),this.setPlayers=function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/player_api";var i=$("script")[$("script").length-1];i.parentNode.insertBefore(t,i);$(".gt-video").each(function(){var t=$(this);t.find(".gt-video-switch").on("click",function(){$(this).addClass("gt-open"),t.addClass("gt-open"),e.addYouTube(t)})})},this.addYouTube=function(t){function e(){s.mute(),s.playVideo(),t.addClass("gt-video-on"),t.find(".gt-video-uncover").on("click",i),t.find(".gt-video-pause").on("click",function(){s.pauseVideo()}),t.find(".gt-video-play").on("click",function(){s.playVideo()})}function i(){console.log("playFullScreen");var e=t.find("iframe")[0],i=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;i&&i.bind(e)()}var s,o="gt-video-"+t.index();t.find(".gt-video-switch").hide("slow"),t.find(".gt-video-inner").attr("id",o).addClass("gt-video-foreground"),s=new YT.Player(o,{width:600,height:400,videoId:t.attr("data-youtube"),playerVars:{playlist:t.attr("data-youtube"),color:"white",loop:1,autoplay:1},events:{onReady:e}})},$("div").is(".gt-video")&&e.setPlayers(),this.fixArticleScrollTablePosition=function(){var t=$(".gt-article-table-wrapper"),e=t.parent(),i=t.outerHeight(),o=e.position().top,n=o+e.outerHeight(),a=t.outerWidth(),r=s.scrollTop();o+90>r&&t.hasClass("gt-fixed")&&(t.removeClass("gt-fixed"),t.css({left:"",width:""})),o<r+90&&(t.hasClass("gt-fixed")||(t.css({left:t.offset().left+"px",width:a}),t.addClass("gt-fixed")),r-n+i+90>=0?t.addClass("gt-fixed-bottom"):t.removeClass("gt-fixed-bottom"))},this.createArticteScrollTable=function(){if($("div").is(".gt-article")){var t="";$(".gt-article").each(function(){t+='<div class = "gt-article-scroll"><div class = "gt-article-scroll-shadow"></div><p>'+$(this).find("h2").text()+"</p></div>"}),$("#gt-article-scroll-table").html(t)}},this.showArtidleShadow=function(){$(".gt-article").each(function(){var t=$(this).position().top,e=$(this).outerHeight(),i=$(document).scrollTop(),s=0;(s=t>i?0:(i-t)/e)>1&&(s=1);var o=$(".gt-article-scroll")[$(this).index()];$(o).find(".gt-article-scroll-shadow").css("width",100*s+"%")})},$("div").is(".gt-article-table-wrapper")){var b,k=!1;$("div").is(".gt-article-scroll-table")&&(k=!0,e.createArticteScrollTable(),e.showArtidleShadow()),o.scroll(t),o.resize(t)}this.setCurrTime=function(){e.currTime();setInterval(e.currTime,3e4)},this.currTime=function(){$(".gt-curr-time").each(function(){var t=new Date;$(this).attr("data-gmt")&&t.setUTCHours(+$(this).attr("data-gmt"));var e=t.getHours(),i=t.getMinutes(),s=t.getDay(),o=t.getDate(),n=t.getMonth(),a=t.getFullYear();e<10&&(e="0"+e),i<10&&(i="0"+i),s=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],n=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][n],$(".gt-curr-time-time")&&$(".gt-curr-time-time").html(e+":"+i),$(".gt-curr-time-date")&&$(".gt-curr-time-date").html(s+", "+o+" "+n+" "+a)})},$("div").is(".gt-curr-time")&&e.setCurrTime(),$("div").is(".gt-inner-scroll")&&$(".gt-inner-scroll").each(function(){$(this).niceScroll({cursoropacitymin:"1",cursoropacitymax:"1",cursorwidth:"2px",cursorborder:"none",mousescrollstep:"60",background:"#CECECE",railoffset:"left",zindex:"auto",cursorcolor:"#CECECE"})}),this.tabSlider=function(){$(".gt-tabs").each(function(){var t=$(this);t.find(".gt-tabs-button").each(function(){$(this).on("click",function(){e.tabSliderAction(t,$(this).index())})}),e.tabSliderAction(t,0,!0)})},this.tabSliderAction=function(t,e,i){var s=$(t.find(".gt-tabs-button")),o=$(t.find(".gt-tabs-main"));t.find(".gt-inner-scroll-tab").each(function(){$("#"+$(this).attr("data-scroll")).hide()}),s.removeClass("active"),o.removeClass("active"),$(s[e]).addClass("active"),$(o[e]).addClass("active"),(0!=$("#"+$(o[e]).find(".gt-inner-scroll-tab").attr("data-scroll")).find(".gt-scroll-cursor").height()||i)&&$("#"+$(o[e]).find(".gt-inner-scroll-tab").attr("data-scroll")).show()},$("div").is(".gt-tabs")&&e.tabSlider(),this.createViewCardListeners=function(t){t.find(".gt-view-cards-icons-visit").on("click",function(){e.clickVisitViewCard(t)}),t.find(".gt-view-cards-icons-pin-plus").on("click",function(){e.clickSeenViewCard(t)}),t.find(".gt-view-cards-icons-bookmarks").on("click",function(){e.clickMarkViewCard(t)}),t.find(".gt-view-cards-icons-share").on("click",function(){e.clickShareViewCard(t)}),t.find(".gt-view-cards-icons-share").find("a").on("click",function(t,i){t.preventDefault(),e.veiwCardSocial(i)})},this.veiwCardSocial=function(t){console.log("click social"),e.closeShareViewCard(t)},this.openShareViewCard=function(t){$(t).addClass("gt-active")},this.closeShareViewCard=function(t){$(t).removeClass("gt-active")},this.clickShareViewCard=function(t){var i=t.find(".gt-view-cards-icons-share").parent();i.hasClass("gt-active")?(i.removeClass("gt-active"),e.closeShareViewCard(t)):(i.addClass("gt-active"),e.openShareViewCard(t))},this.clickVisitViewCard=function(t){if(!t.hasClass("gt-active")){var e=t.find(".gt-view-cards-icons-visit").parent();e.hasClass("gt-active")?(e.removeClass("gt-active"),console.log("click not visited now")):(e.addClass("gt-active"),console.log("click visit"))}},this.clickSeenViewCard=function(t){if(!t.hasClass("gt-active")){var e=t.find(".gt-view-cards-icons-pin-plus").parent();e.hasClass("gt-active")?(e.removeClass("gt-active"),console.log("click not seen now")):(e.addClass("gt-active"),console.log("click seen"))}},this.clickMarkViewCard=function(t){if(!t.hasClass("gt-active")){var e=t.find(".gt-view-cards-icons-bookmarks").parent();e.hasClass("gt-active")?(e.removeClass("gt-active"),console.log("click delete bookmark")):(e.addClass("gt-active"),console.log("click add bookmark"))}},$("*").is(".gt-view-cards-inner")&&$(".gt-view-cards-inner").each(function(){e.createViewCardListeners($(this))}),$("#gt-enter-form-facebook").on("click",function(){e.socialEnter("facebook")}),$("#gt-enter-form-twitter").on("click",function(){e.socialEnter("twitter")}),$("#gt-enter-form-google").on("click",function(){e.socialEnter("google")}),$("#gt-reg-form-facebook").on("click",function(){e.socialRegistration("facebook")}),$("#gt-reg-form-twitter").on("click",function(){e.socialRegistration("twitter")}),$("#gt-reg-form-google").on("click",function(){e.socialRegistration("google")}),this.socialRegistration=function(t){alert("Регистрация через "+t)},this.socialEnter=function(t){alert("Вход через "+t)},this.cutNews=function(t){var e,i,s,o=t.parent(),n=o.height(),a=t.find("p");o.children().each(function(){n-=$(this).outerHeight(!0)}),n=n+t.height()-20,a.each(function(){(e=$(this).outerHeight(!0))<n?n-=e:n?(i=Math.floor($(this).text().length*n/e),s=$(this).text().substring(0,i-5),$(this).text(s+"..."),n=0):$(this).css("display","none")})},$("div").is(".js-news-cut")&&($(".js-news-cut").each(function(){e.cutNews($(this))}),o.resize(function(){$(".js-news-cut").each(function(){e.cutNews($(this))})})),this.cutReadMoreSlider=function(){$(".gt-read-more-slider-text-inner").each(function(){e.cutting($(this),160)})},this.cutting=function(t,e){var i=t.text();i.length>e&&(i=i.slice(0,e)+"...",t.text(i))},$("p").is(".gt-read-more-slider-text-inner")&&e.cutReadMoreSlider(),s.ready(function(){e.footerHeight(),e.deskTopMenuScroll()}),this.pageUp=function(){return $("html, body").animate({scrollTop:0},800),!1},this.upPageButton=function(){$(document).scrollTop()>30?h.addClass("gt-visible"):h.removeClass("gt-visible")},h.on("click",e.pageUp),o.scroll(function(){e.upPageButton(),$(".gt-header-menu").is(":visible")&&e.deskTopMenuScroll()}),o.resize(function(){e.deskTopMenuScroll(),e.footerHeight(),d.hasClass("gt-open")&&e.mobileMenuClose(),$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){$(this).removeClass("gt-width"),$(this).removeClass("gt-height"),e.imgHolderFunc($(this))})}),$(window).on("load",function(){$("div").is(".gt-img-holder-abs")&&$(".gt-img-holder-abs").each(function(){e.imgHolderFunc($(this))})}),i.on("click",function(t){})},$(document).ready(function(){new GoToTrip});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJHb1RvVHJpcCIsInNjcm9sbFRocm90dGxlciIsInNjcm9sbFRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VsZiIsImZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uIiwic2hhZG93Iiwic2hvd0FydGlkbGVTaGFkb3ciLCJ0aGlzIiwiYm9keSIsIiQiLCJkb2N1bWVudCIsImRvYyIsImRvY1dpbmRvdyIsIndpbmRvdyIsImJvZHlQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0b2tlbjM2MCIsInRva2VuNjY3IiwidG9rZW43NjgiLCJ0b2tlbjEwMjQiLCJndEhlYWRlciIsImd0Rm9vdGVyIiwiZ3RXcmFwcGVyIiwidXBCdXR0b24iLCJtb2JpbGVNZW51U3dpdGNoIiwiZW50ZXJCdXR0b24iLCJlbnRlcldyYXBwZXIiLCJlbnRlckZvcm0iLCJlbnRlckNob3NlIiwiZW50ZXJDbG9zZSIsIm5pY2VTY3JvbGwiLCJjdXJzb3Jib3JkZXIiLCJtb3VzZXNjcm9sbHN0ZXAiLCJib3VuY2VzY3JvbGwiLCJjdXJzb3Jjb2xvciIsImZpeEJvZHkiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJjc3MiLCJwb3NpdGlvbiIsInVuZml4Qm9keSIsImZvb3RlckhlaWdodCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwiZGVza1RvcE1lbnVTY3JvbGwiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwibW9iaWxlTWVudUNsb3NlIiwibW9iaWxlTWVudU9wZW4iLCJvbiIsImhhc0NsYXNzIiwib3BlbkVudGVyRm9ybSIsImNsb3NlRW50ZXJGb3JtIiwiY2xvc2VSZXN0b3JlUGFzcyIsImNoYW5nZUVudGVyUmVnaXN0cmF0aW9uIiwiZXZlbnQiLCJ0YXJnZXQiLCJhdHRyIiwib3BlblJlc3RvcmVQYXNzIiwiZWFjaCIsInNldEJhY2tncm91bmQiLCJwYXRoIiwiaXMiLCJpbWdIb2xkZXJGdW5jIiwiZWwiLCJob2xkZXJDb25zdCIsIm91dGVyV2lkdGgiLCJpbWciLCJmaW5kIiwiY3JlYXRlU2xpZGVyIiwiY3VyclNsaWRlciIsImNyZWF0ZUFycm93cyIsImlubmVyQ291bnQiLCJzY3JlZW5Db25zdCIsIm51bUlubmVyIiwibnVtUGFuZWwiLCJodG1sIiwib25lTW92ZUZ1bmN0aW9uIiwic2hvd051bSIsImFycm93c1JlYWR5IiwiZGVzdHJveUFycm93cyIsImNsb25lIiwib2ZmIiwiYnVsIiwibnVtIiwiY3VyclBvc2l0aW9uIiwiZmFkZSIsImZhZGVTbGlkZXJNb3ZlIiwidHJhbSIsImNvbnRhaW5lciIsImJhc2VXaWR0aCIsImFwcGVuZCIsImNoaWxkcmVuIiwiZmlyc3QiLCJyZW1vdmUiLCJwcmVwZW5kIiwibGFzdCIsInRyYW1TbGlkZXJNb3ZlIiwiZG90cyIsImFsbERvdHMiLCJhbmltYXRlIiwidHJhbUFuaW1hdGlvbiIsImVxIiwiaW5kZXgiLCJpbm5lciIsInRleHQiLCJjcmVhdGVUb3VjaCIsImluaXRpYWxQb2ludCIsImZpbmFsUG9pbnQiLCJlIiwib3JpZ2luYWxFdmVudCIsIk1hdGgiLCJhYnMiLCJ0b3VjaGVzIiwicGFnZVgiLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlZFRvdWNoZXMiLCJkZXN0cm95VG91Y2giLCJmaW5kU2NyZWVuQ29uc3QiLCJwYXJzZUludCIsInNldEJhc2VXaWR0aCIsInNsaWRlclRpbWVPdXQiLCJsZW5ndGgiLCJhcnJvdyIsImhhc0Nsb25lIiwibmF2Iiwic3BhbnMiLCJpIiwiY3JlYXRlRG90cyIsImNsaWNrUG9zaXRpb24iLCJib2R5V3JhcHBlciIsInNob3ciLCJjbG9uZVNsaWRlciIsImhpZGUiLCJkZXN0cm95Q2xvbmVTbGlkZXIiLCJjcmVhdGVDbG9uZVNsaWRlciIsInBhcmVudCIsInJlc2l6ZSIsIm1hbmFnZUd0QWN0aXZlVWxNZW51IiwidGFnTmFtZSIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsInNldFBsYXllcnMiLCJ0YWciLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsInNyYyIsImxhc3RTY3JpcHRUYWciLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiY3VycmVudFBsYXllciIsImFkZFlvdVR1YmUiLCJpbml0aWFsaXplIiwicGxheWVyIiwibXV0ZSIsInBsYXlWaWRlbyIsInBsYXlGdWxsU2NyZWVuIiwicGF1c2VWaWRlbyIsImlmcmFtZSIsInJlcXVlc3RGdWxsU2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJ3ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiIsImJpbmQiLCJlbElkIiwiWVQiLCJQbGF5ZXIiLCJ3aWR0aCIsInZpZGVvSWQiLCJwbGF5ZXJWYXJzIiwicGxheWxpc3QiLCJjb2xvciIsImxvb3AiLCJhdXRvcGxheSIsImV2ZW50cyIsIm9uUmVhZHkiLCJ0YWJsZSIsInRhYmxlUGFyZW50IiwidGFibGVIZWlnaHQiLCJ0YWJsZVBhcmVudFRvcCIsInRhYmxlUGFyZW50Qm90dG9tIiwidGFibGVXaWR0aCIsIndpbmRvd1RvcCIsImNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSIsImVsSGVpZ2h0Iiwid2luZG93UG9zaXRpb24iLCJ4IiwiY3VyclNoYWRvdyIsInNjcm9sbCIsInNldEN1cnJUaW1lIiwiY3VyclRpbWUiLCJzZXRJbnRlcnZhbCIsImRhdGUiLCJEYXRlIiwic2V0VVRDSG91cnMiLCJob3VycyIsImdldEhvdXJzIiwibWludXRlcyIsImdldE1pbnV0ZXMiLCJ3ZWVrZGF5IiwiZ2V0RGF5IiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJjdXJzb3JvcGFjaXR5bWluIiwiY3Vyc29yb3BhY2l0eW1heCIsImN1cnNvcndpZHRoIiwiYmFja2dyb3VuZCIsInJhaWxvZmZzZXQiLCJ6aW5kZXgiLCJ0YWJTbGlkZXIiLCJjdXJyVGFicyIsInRhYlNsaWRlckFjdGlvbiIsImluaXQiLCJidXR0b25zIiwibWFpbiIsImNyZWF0ZVZpZXdDYXJkTGlzdGVuZXJzIiwiY2xpY2tWaXNpdFZpZXdDYXJkIiwiY2xpY2tTZWVuVmlld0NhcmQiLCJjbGlja01hcmtWaWV3Q2FyZCIsImNsaWNrU2hhcmVWaWV3Q2FyZCIsInZlaXdDYXJkU29jaWFsIiwiY2xvc2VTaGFyZVZpZXdDYXJkIiwib3BlblNoYXJlVmlld0NhcmQiLCJidXR0b24iLCJzb2NpYWxFbnRlciIsInNvY2lhbFJlZ2lzdHJhdGlvbiIsInRva2VuIiwiYWxlcnQiLCJjdXROZXdzIiwiY3VyckhlaWdodCIsImN1dHRpbmdMZW5naHQiLCJuZXdUZXh0IiwibWF4SGVpZ2h0IiwiY3V0dGluZ0VsIiwiZmxvb3IiLCJzdWJzdHJpbmciLCJjdXRSZWFkTW9yZVNsaWRlciIsImN1dHRpbmciLCJuZXdzVGV4dCIsInNsaWNlIiwicmVhZHkiLCJwYWdlVXAiLCJ1cFBhZ2VCdXR0b24iXSwibWFwcGluZ3MiOiJBQUtBQSxTQUFXLFdBMnJCSCxTQUFTQyxJQUNBQyxJQUNEQSxFQUFnQkMsV0FBVyxXQUN2QkQsRUFBZ0IsS0FDaEJFLEVBQUtDLGdDQUNEQyxHQUNBRixFQUFLRyx1QkEvckJ6QixJQUFJSCxFQUFPSSxLQUNQQyxFQUFPQyxFQUFFQyxTQUFTRixNQUNsQkcsRUFBTUYsRUFBRUMsVUFDUkUsRUFBWUgsRUFBRUksUUFDZEMsR0FDSUMsS0FBSyxFQUNMQyxNQUFNLEdBRVZDLEVBQVdSLEVBQUUsY0FFYlMsR0FEV1QsRUFBRSxjQUNGQSxFQUFFLGVBQ2JVLEVBQVdWLEVBQUUsY0FDYlcsRUFBWVgsRUFBRSxlQUVkWSxHQURZWixFQUFFLGVBQ0hBLEVBQUUsV0FDYmEsRUFBV2IsRUFBRSxVQUNiYyxFQUFZZCxFQUFFLGVBQ2RlLEVBQVdmLEVBQUUsVUFDYmdCLEVBQW1CaEIsRUFBRSwwQkFDckJpQixFQUFjakIsRUFBRSxhQUNoQmtCLEVBQWVsQixFQUFFLDRCQUNqQm1CLEVBQVluQixFQUFFLG9CQUNkb0IsRUFBYXBCLEVBQUUsMEJBQ2ZxQixFQUFhckIsRUFBRSwwQkF3cEJuQixHQXZwQkFBLEVBQUUsUUFBUXNCLFlBQ05DLGFBQWMsb0JBQ2RDLGdCQUFpQixLQUNqQkMsY0FBYyxFQUNkQyxZQUFhLFlBSWpCNUIsS0FBSzZCLFFBQVUsV0FDUHRCLEVBQWFDLEtBQU9ELEVBQWFFLE9BQ3JDRixFQUFhQyxJQUFNSixFQUFJMEIsWUFDdkJ2QixFQUFhRSxLQUFPUixFQUFLOEIsU0FBU3RCLEtBQ2xDUixFQUFLK0IsS0FDREMsU0FBVSxRQUNWeEIsS0FBTUYsRUFBYUUsS0FBTyxLQUMxQkQsS0FBTSxFQUFJRCxFQUFhQyxJQUFNLFNBSXJDUixLQUFLa0MsVUFBWSxXQUNiakMsRUFBSytCLEtBQ0RDLFNBQVUsR0FDVnhCLEtBQU0sR0FDTkQsSUFBSyxLQUVUSixFQUFJMEIsVUFBVXZCLEVBQWFDLEtBQzNCRCxFQUFhQyxLQUFNLEVBQ25CRCxFQUFhRSxNQUFPLEdBR3hCVCxLQUFLbUMsYUFBZSxXQUNHcEIsRUFBU3FCLGNBQ1QvQixFQUFVZ0MsU0FBVyxJQUNwQ3RCLEVBQVNpQixJQUFJLFdBQVksVUFDekJoQixFQUFVZ0IsSUFBSSxnQkFBaUIsSUFDL0JmLEVBQVNlLElBQUksV0FBWSxZQUV6QmpCLEVBQVNpQixJQUFJLFdBQVksSUFDekJmLEVBQVNlLElBQUksV0FBWSxJQUN6QmhCLEVBQVVnQixJQUFJLGdCQUFpQmpCLEVBQVNxQixjQUFnQixRQUdoRXBDLEtBQUtzQyxrQkFBb0IsV0FDakJqQyxFQUFVeUIsWUFBY2hCLEVBQVNzQixjQUNqQ3RCLEVBQVN5QixTQUFTLHNCQUVsQnpCLEVBQVMwQixZQUFZLHVCQUs3QnhDLEtBQUt5QyxnQkFBa0IsV0FDbkI3QyxFQUFLc0MsWUFDTGhCLEVBQWlCc0IsWUFBWSxXQUM3QjFCLEVBQVMwQixZQUFZLFlBR3pCeEMsS0FBSzBDLGVBQWlCLFdBQ2xCOUMsRUFBS2lDLFVBQ0xmLEVBQVN5QixTQUFTLFdBQ2xCckIsRUFBaUJxQixTQUFTLFlBSzlCckIsRUFBaUJ5QixHQUFHLFFBQVMsV0FDckJ6QyxFQUFFRixNQUFNNEMsU0FBUyxXQUNqQmhELEVBQUs2QyxrQkFFTDdDLEVBQUs4QyxtQkFHYjFDLEtBQUs2QyxjQUFnQixXQUNqQnpCLEVBQWFtQixTQUFTLFdBQ3RCNUMsV0FDQSxXQUNJTyxFQUFFLHlCQUF5QnFDLFNBQVMsV0FDcENsQixFQUFVa0IsU0FBUyxXQUNuQmhCLEVBQVdnQixTQUFTLGNBSTVCdkMsS0FBSzhDLGVBQWlCLFdBQ2xCdkIsRUFBV2lCLFlBQVksV0FDdkJuQixFQUFVbUIsWUFBWSxXQUN0QnRDLEVBQUUseUJBQXlCc0MsWUFBWSxXQUN2QzVDLEVBQUttRCxtQkFDTHBELFdBQ0EsV0FDSXlCLEVBQWFvQixZQUFZLFlBRlosTUFNckJ4QyxLQUFLZ0Qsd0JBQTBCLFNBQVVDLEdBQ2pDNUIsRUFBVXVCLFNBQVMxQyxFQUFFK0MsRUFBTUMsUUFBUUMsS0FBSyxXQUU1QzlCLEVBQVVtQixZQUFZLG1CQUFtQkEsWUFBWSwwQkFBMEJELFNBQVNyQyxFQUFFK0MsRUFBTUMsUUFBUUMsS0FBSyxXQUlqSG5ELEtBQUtvRCxnQkFBa0IsV0FDbkJsRCxFQUFFLGtDQUFrQ3FDLFNBQVMsWUFHakR2QyxLQUFLK0MsaUJBQW1CLFdBQ3BCN0MsRUFBRSxrQ0FBa0NzQyxZQUFZLFlBSXBEckIsRUFBWWtDLEtBQUssV0FDYm5ELEVBQUVGLE1BQU0yQyxHQUFHLFFBQVMvQyxFQUFLaUQsaUJBRzdCdEIsRUFBV29CLEdBQUcsUUFBUy9DLEVBQUtrRCxnQkFFNUJ4QixFQUFXcUIsR0FBRyxRQUFTLFNBQVVNLEdBQzdCckQsRUFBS29ELHdCQUF3QkMsS0FHakMvQyxFQUFFLCtCQUErQnlDLEdBQUcsUUFBUS9DLEVBQUt3RCxpQkFDakRsRCxFQUFFLGlDQUFpQ3lDLEdBQUcsUUFBUS9DLEVBQUttRCxrQkFFbkQvQyxLQUFLc0QsY0FBZ0IsV0FDQXBELEVBQUUsa0JBQ1JtRCxLQUFLLFdBQ1osR0FBS25ELEVBQUVGLE1BQU1tRCxLQUFLLFdBQWxCLENBQ0EsSUFBSUksRUFBT3JELEVBQUVGLE1BQU1tRCxLQUFLLFdBQ3BCeEMsRUFBUzZDLEdBQUcsWUFDWnRELEVBQUVGLE1BQU1nQyxJQUNKLG1CQUNBLGdDQUFrQ3VCLEVBQU8sTUFJN0MxQyxFQUFVMkMsR0FBRyxZQUNidEQsRUFBRUYsTUFBTWdDLElBQ0osbUJBQ0EsaUNBQW1DdUIsRUFBTyxNQUlsRHJELEVBQUVGLE1BQU1nQyxJQUNKLG1CQUNBLGtDQUFvQ3VCLEVBQU8sVUFNdkR2RCxLQUFLeUQsY0FBZ0IsU0FBVUMsR0FDM0J4RCxFQUFFd0QsR0FBSWxCLFlBQVksWUFDbEJ0QyxFQUFFd0QsR0FBSWxCLFlBQVksYUFDbEJ0QyxFQUFFd0QsR0FBSWxCLFlBQVksY0FDbEIsSUFBSW1CLEVBQWNELEVBQUd0QixjQUFnQnNCLEVBQUdFLGFBQ3BDQyxFQUFNSCxFQUFHSSxLQUFLLE9BQ0hELEVBQUl6QixjQUFnQnlCLEVBQUlELGFBRXhCRCxFQUNYekQsRUFBRXdELEdBQUluQixTQUFTLFlBR2ZyQyxFQUFFd0QsR0FBSW5CLFNBQVMsYUFFbkJyQyxFQUFFd0QsR0FBSW5CLFNBQVMsZUFJZnJDLEVBQUUsT0FBT3NELEdBQUcsbUJBQ1o1RCxFQUFLMEQsZ0JBR1R0RCxLQUFLK0QsYUFBZSxTQUFVQyxFQUFZL0IsR0E4Q3RDLFNBQVNnQyxJQUNMLEdBQUlDLEVBQWFDLEVBQWEsQ0FDMUIsSUFBSUMsRUFBVyxHQUNYQyxJQUNBRCxFQUFXLHVIQUVmSixFQUFXRixLQUFLLDJCQUEyQlEsS0FDdkMsK0NBQ1lGLEVBQ1osaURBa0JSSixFQUFXRixLQUFLLFNBQVNuQixHQUFHLFFBQVMsV0FDakM0QixHQUFnQixLQUVwQlAsRUFBV0YsS0FBSyxVQUFVbkIsR0FBRyxRQUFTLFdBQ2xDNEIsR0FBZ0IsS0FFaEJGLEdBQVVHLElBcEJWQSxJQUVKQyxHQUFjLEVBR2xCLFNBQVNDLEVBQWNDLEdBQ25CLElBQUlqQixFQUFLaUIsR0FBU1gsRUFDbEJOLEVBQUdJLEtBQUssU0FBU2MsTUFDakJsQixFQUFHSSxLQUFLLFVBQVVjLE1BQ2xCbEIsRUFBR0ksS0FBSywyQkFBMkJRLEtBQUssSUFDeENHLEdBQWMsRUEyQmxCLFNBQVNGLEVBQWdCTSxFQUFLQyxHQThDMUIsR0E3Q0lBLEdBQWUsSUFBUkEsRUFDUEMsRUFBZUQsRUFHVkQsRUFDTEUsSUFFQUEsSUFJQUMsSUFDSUQsRUFBZWIsRUFBYUMsSUFDNUJZLEVBQWUsR0FHZkEsRUFBZSxJQUNmQSxFQUFlYixFQUFhQyxHQUdoQ2MsS0FHQUMsSUFDSUgsRUFBZWIsRUFBYUMsSUFDNUJnQixFQUFVbkQsSUFBSSxTQUFXK0MsRUFBZSxHQUFLSyxFQUFhLE1BQzFERCxFQUFVRSxPQUFPRixFQUFVRyxXQUFXQyxRQUFRWixTQUM5Q1EsRUFBVUcsV0FBV0MsUUFBUUMsU0FDN0JULEtBRUFBLEVBQWUsR0FDZkksRUFBVW5ELElBQUksU0FBVytDLEVBQWUsR0FBS0ssRUFBYSxNQUMxREQsRUFBVU0sUUFBUU4sRUFBVUcsV0FBV0ksT0FBT2YsU0FDOUNRLEVBQVVHLFdBQVdJLE9BQU9GLFNBQzVCVCxJQUNBWSxLQUdBQSxLQU1KdEIsR0FBVUcsSUFDVm9CLEVBQU0sQ0FDTixJQUFJQyxFQUFVN0IsRUFBV0YsS0FBSyx1QkFDOUIrQixFQUFRckQsWUFBWSxhQUNwQnRDLEVBQUUyRixFQUFRVixFQUFVckIsS0FBSyxZQUFZWCxLQUFLLGdCQUFnQlosU0FBUyxjQUkzRSxTQUFTb0QsSUFDTFIsRUFBVUcsV0FBVzlDLFlBQVksV0FDakMyQyxFQUFVVyxTQUFTckYsTUFBT3NFLEVBQWVLLEdBQVlXLEdBQ3JEWixFQUFVRyxXQUFXVSxHQUFHakIsR0FBY3hDLFNBQVMsV0FJbkQsU0FBUzBDLEVBQWVoRCxHQUNwQixJQUFJZ0UsRUFBUWhFLEdBQVk4QyxFQUN4QjdFLEVBQUVnRyxHQUFPMUQsWUFBWSxXQUNyQnRDLEVBQUVnRyxFQUFNRCxJQUFRMUQsU0FBUyxXQUc3QixTQUFTaUMsSUFDTFIsRUFBV0YsS0FBSyx1QkFBdUJxQyxNQUFPaEIsRUFBVXJCLEtBQUssWUFBWVgsS0FBSyxjQUFpQixHQUMvRmEsRUFBV0YsS0FBSyxzQkFBc0JxQyxLQUFLakMsR0FHL0MsU0FBU2tDLElBQ0wsSUFBSUMsRUFBZSxFQUNmQyxFQUFhLEVBQ2pCdEMsRUFBV3JCLEdBQUcsYUFBYyxTQUFVTSxHQUNsQyxJQUFJc0QsRUFBSXRELEVBQU11RCxjQUNkSCxFQUFlSSxLQUFLQyxJQUFJSCxFQUFFSSxRQUFRLEdBQUdDLE9BQ3JDQyxRQUFRQyxJQUFJLGdCQUVoQjlDLEVBQVdyQixHQUFHLFdBQVksU0FBVU0sR0FDaEMsSUFBSXNELEVBQUl0RCxFQUFNdUQsY0FDZEYsRUFBYUcsS0FBS0MsSUFBSUgsRUFBRVEsZUFBZSxHQUFHSCxPQUN0Q0gsS0FBS0MsSUFBSUwsRUFBZUMsR0FBYyxJQUVsQy9CLEVBREE4QixFQUFlQyxHQUNDLEdBRUEsS0FNaEMsU0FBU1UsRUFBYXJDLElBQ1RBLEdBQVNYLEdBQ2ZZLE1BR1AsU0FBU3FDLElBQ0RqRCxFQUFXYixLQUFLLGdCQUNoQmdCLEVBQWMrQyxTQUFTbEQsRUFBV2IsS0FBSyxlQUNuQ2pELEVBQUVVLEdBQVU0QyxHQUFHLGNBQWFXLEVBQWMsR0FDMUNqRSxFQUFFUyxHQUFVNkMsR0FBRyxjQUFhVyxFQUFjLEdBQzFDakUsRUFBRVEsR0FBVThDLEdBQUcsY0FBYVcsRUFBYyxJQUl0RCxTQUFTZ0QsSUFDTC9CLEVBQVlwQixFQUFXSixhQUFlTyxFQUN0Q0gsRUFBV0YsS0FBSyx3QkFBd0JGLFlBQVlNLEVBQWEsR0FBS2tCLEdBQ3RFYyxFQUFNN0MsS0FBSyxXQUNQbkQsRUFBRUYsTUFBTTRELFdBQVd3QixHQUNuQmxGLEVBQUVGLE1BQU1tRCxLQUFLLGFBQWNqRCxFQUFFRixNQUFNaUcsV0E5TTNDLElBQUltQixFQUVBaEMsRUFEQWpCLEVBQWMsRUFFZE0sR0FBYyxFQUNkeUIsRUFBUWxDLEVBQVdGLEtBQUssb0JBQ3hCcUIsRUFBWW5CLEVBQVdGLEtBQUssd0JBQzVCSSxFQUFhZ0MsRUFBTW1CLE9BQ25CdEMsRUFBZTlDLEdBQVksRUFDM0JxRixFQUFRdEQsRUFBV3BCLFNBQVMsdUJBQzVCZ0QsRUFBTzVCLEVBQVdwQixTQUFTLHNCQUMzQnlCLEVBQVdMLEVBQVdwQixTQUFTLGlCQUMvQnNDLEVBQU9sQixFQUFXcEIsU0FBUyxrQkFDM0JtRCxFQUFnQi9CLEVBQVdiLEtBQUssa0JBQW9CLElBQ3BENkIsRUFBT2hCLEVBQVdwQixTQUFTLGtCQUMzQjJFLEVBQVd2RCxFQUFXcEIsU0FBUyx1QkFDL0JvQyxHQUNBQyxFQUFlaEQsR0FFZmlELElBQ0ErQixJQUNBRSxJQUNBeEIsS0FFQTJCLElBQ0F0RCxFQUFXcUIsT0FBTyw4Q0FDbEJwQixLQUVBMkIsR0FzREosV0FDSTVCLEVBQVdxQixPQUFPLHFDQUdsQixJQUFLLElBRkRtQyxFQUFNeEQsRUFBV0YsS0FBSyxrQkFDdEIyRCxFQUFRLEdBQ0hDLEVBQUksRUFBR0EsRUFBSXhELEVBQVl3RCxJQUM1QkQsR0FBUyxvQkFBc0JDLEVBQUksV0FFdkNGLEVBQUlsRCxLQUFLbUQsR0FDVEQsRUFBSTFELEtBQUssUUFBUXlCLFFBQVFoRCxTQUFTLGFBQ2xDeUIsRUFBV0YsS0FBSyx1QkFBdUJuQixHQUFHLFFBQVMsV0FDL0M0QixHQUFnQixHQUFPckUsRUFBRUYsTUFBTW1ELEtBQUssZUEvRHhDd0UsR0FFQXpELEVBQWFDLEdBQ2JpQyxJQUVBbUIsR0FLQXZELEVBQVdGLEtBQUssMEJBQTBCVCxLQUFLLFdBQzNDbkQsRUFBRUYsTUFBTTJDLEdBQUcsUUFBUyxZQTJLNUIsU0FBMkJpRixHQUN2QixJQUFJMUgsRUFBRSxPQUFPc0QsR0FBRyxhQUFoQixDQUNBNUQsRUFBS2lDLFVBQ0wsSUFBSWdHLEVBQWMzSCxFQUFFLG9CQUNwQjJILEVBQVl4QyxPQUFPLDZTQUNuQndDLEVBQVlDLE9BQ1osSUFBSUMsRUFBYzdILEVBQUUsYUFDUDhELEVBQVdGLEtBQUssb0JBQW9CYSxPQUFNLEdBQ2hEdEIsS0FBSyxXQUNSbkQsRUFBRUYsTUFBTTRELFdBQVcsSUFDbkIxRCxFQUFFLHVCQUF1Qm1GLE9BQU9uRixFQUFFRixTQUV0Q0osRUFBS21FLGFBQWFnRSxFQUFhSCxHQUMvQjFILEVBQUUsbUJBQW1CeUMsR0FBRyxRQUFTLFlBS3JDLFNBQTRCb0YsR0FDeEJyRCxFQUFjcUQsR0FDZGYsRUFBYWUsR0FDYjdILEVBQUUsbUJBQW1CMEUsTUFDckIxRSxFQUFFLHFCQUFxQnNGLFNBQ3ZCdEYsRUFBRSxvQkFBb0I4SCxPQUN0QnBJLEVBQUtzQyxZQVZEK0YsQ0FBbUJGLE1BeExmRyxDQUFrQmhJLEVBQUVGLE1BQU1tSSxTQUFTbEMsYUErTS9DNUYsRUFBVStILE9BVFYsV0FDU2hCLElBQ0RBLEVBQWdCekgsV0FBVyxXQUN2QnlILEVBQWdCLEtBU3hCSixJQUNJOUIsSUFDQStCLElBQ0FFLElBZ0JBcEMsRUFBZWIsRUFBYUMsSUFDNUJZLEVBQWViLEVBQWFDLEdBQzVCRCxHQUFjQyxJQUFhWSxFQUFlLEdBaEIxQ1ksS0FFQWxCLElBQ0FDLElBQ0FULEtBRUFDLEVBQWFDLEdBQ2JpQyxLQW5CRyxTQWtDWGxHLEVBQUUsT0FBT3NELEdBQUcsZUFDWnRELEVBQUUsY0FBY21ELEtBQUssV0FDakJ6RCxFQUFLbUUsYUFBYTdELEVBQUVGLFNBRzVCQSxLQUFLcUkscUJBQXVCLFNBQVUzRSxHQUNoQixNQUFkQSxFQUFHNEUsVUFDSDVFLEVBQUt4RCxFQUFFd0QsR0FBSTZFLFFBQVEsT0FFdkJySSxFQUFFd0QsR0FBSTZFLFFBQVFySSxFQUFFLE9BQU80RCxLQUFLLE1BQU10QixZQUFZLGFBQzlDdEMsRUFBRXdELEdBQUluQixTQUFTLGNBWWZyQyxFQUFFLEtBQUtzRCxHQUFHLG9CQUNWdEQsRUFBRSxtQkFBbUJ5QyxHQUFHLFFBQVMsU0FBVU0sR0FDdkNBLEVBQU11RixpQkFDTjVJLEVBQUt5SSxxQkFBcUJwRixFQUFNQyxVQUlwQ2hELEVBQUUsS0FBS3NELEdBQUcsa0JBQ1Z0RCxFQUFFLGlCQUFpQnlDLEdBQUcsUUFBUyxTQUFVTSxHQUNyQ0EsRUFBTXVGLGlCQUNONUksRUFBS3lJLHFCQUFxQnBGLEVBQU1DLFVBSXhDbEQsS0FBS3lJLFdBQWEsV0FDZCxJQUFJQyxFQUFNdkksU0FBU3dJLGNBQWMsVUFDakNELEVBQUlFLEtBQU8sa0JBQ1hGLEVBQUlHLElBQU0scUNBQ1YsSUFBSUMsRUFBZ0I1SSxFQUFFLFVBQVVBLEVBQUUsVUFBVW1ILE9BQVMsR0FDckR5QixFQUFjQyxXQUFXQyxhQUFhTixFQUFLSSxHQUM1QjVJLEVBQUUsYUFDUm1ELEtBQUssV0FDVixJQUFJNEYsRUFBZ0IvSSxFQUFFRixNQUN0QmlKLEVBQWNuRixLQUFLLG9CQUFvQm5CLEdBQUcsUUFBUyxXQUMvQ3pDLEVBQUVGLE1BQU11QyxTQUFTLFdBQ2pCMEcsRUFBYzFHLFNBQVMsV0FDdkIzQyxFQUFLc0osV0FBV0QsUUFLNUJqSixLQUFLa0osV0FBYSxTQUFVeEYsR0FnQ3hCLFNBQVN5RixJQUNMQyxFQUFPQyxPQUNQRCxFQUFPRSxZQUNQNUYsRUFBR25CLFNBQVMsZUFDWm1CLEVBQUdJLEtBQUsscUJBQXFCbkIsR0FBRyxRQUFTNEcsR0FDekM3RixFQUFHSSxLQUFLLG1CQUFtQm5CLEdBQUcsUUFBUyxXQUNuQ3lHLEVBQU9JLGVBRVg5RixFQUFHSSxLQUFLLGtCQUFrQm5CLEdBQUcsUUFBUyxXQUNsQ3lHLEVBQU9FLGNBSWYsU0FBU0MsSUFDTDFDLFFBQVFDLElBQUksa0JBQ1osSUFBSTJDLEVBQVMvRixFQUFHSSxLQUFLLFVBQVUsR0FDM0I0RixFQUFvQkQsRUFBT0MsbUJBQXFCRCxFQUFPRSxzQkFBd0JGLEVBQU9HLHdCQUN0RkYsR0FDQUEsRUFBa0JHLEtBQUtKLEVBQXZCQyxHQWpEUixJQUFJTixFQUNBVSxFQUFPLFlBQWNwRyxFQUFHdUMsUUFFNUJ2QyxFQUFHSSxLQUFLLG9CQUFvQmtFLEtBQUssUUFFakN0RSxFQUNLSSxLQUFLLG1CQUNMWCxLQUFLLEtBQU0yRyxHQUNYdkgsU0FBUyx1QkFHVjZHLEVBQVMsSUFBSVcsR0FBR0MsT0FBT0YsR0FDbkJHLE1BQU8sSUFDUDVILE9BQVEsSUFDUjZILFFBQVN4RyxFQUFHUCxLQUFLLGdCQUNqQmdILFlBQ0lDLFNBQVUxRyxFQUFHUCxLQUFLLGdCQUNsQmtILE1BQU8sUUFDUEMsS0FBTSxFQUNOQyxTQUFVLEdBSWRDLFFBQ0lDLFFBQVN0QixNQXNEckJqSixFQUFFLE9BQU9zRCxHQUFHLGNBQ1o1RCxFQUFLNkksYUFFVHpJLEtBQUtILDhCQUFnQyxXQUNqQyxJQUFJNkssRUFBUXhLLEVBQUUsNkJBQ1Z5SyxFQUFjRCxFQUFNdkMsU0FDcEJ5QyxFQUFjRixFQUFNdEksY0FDcEJ5SSxFQUFpQkYsRUFBWTFJLFdBQVd6QixJQUN4Q3NLLEVBQW9CRCxFQUFpQkYsRUFBWXZJLGNBQ2pEMkksRUFBYUwsRUFBTTlHLGFBQ25Cb0gsRUFBWTVLLEVBQUkwQixZQUVoQitJLEVBQWUsR0FBS0csR0FDaEJOLEVBQU05SCxTQUFTLGNBQ2Y4SCxFQUFNbEksWUFBWSxZQUNsQmtJLEVBQU0xSSxLQUNGdkIsS0FBTSxHQUNOd0osTUFBTyxNQUtmWSxFQUFpQkcsRUFBWSxLQUN4Qk4sRUFBTTlILFNBQVMsY0FDaEI4SCxFQUFNMUksS0FDRnZCLEtBQU1pSyxFQUFNM0ksU0FBU3RCLEtBQU8sS0FDNUJ3SixNQUFPYyxJQUVYTCxFQUFNbkksU0FBUyxhQUVmeUksRUFBV0YsRUFBa0JGLEVBQVksSUFBSyxFQUM5Q0YsRUFBTW5JLFNBQVMsbUJBRWZtSSxFQUFNbEksWUFBWSxxQkFROUJ4QyxLQUFLaUwseUJBQTJCLFdBQzVCLEdBQUsvSyxFQUFFLE9BQU9zRCxHQUFHLGVBQWpCLENBQ0EsSUFDSWMsRUFBTyxHQURJcEUsRUFBRSxlQUVSbUQsS0FBSyxXQUNWaUIsR0FDSSxxRkFDQXBFLEVBQUVGLE1BQ0c4RCxLQUFLLE1BQ0xxQyxPQUNMLGVBRVJqRyxFQUFFLDRCQUE0Qm9FLEtBQUtBLEtBR3ZDdEUsS0FBS0Qsa0JBQW9CLFdBQ3JCRyxFQUFFLGVBQWVtRCxLQUFLLFdBRWxCLElBQUkwQixFQUFlN0UsRUFBRUYsTUFBTWlDLFdBQVd6QixJQUNsQzBLLEVBQVdoTCxFQUFFRixNQUFNb0MsY0FDbkIrSSxFQUFpQmpMLEVBQUVDLFVBQVUyQixZQUM3QnNKLEVBQUksR0FFSkEsRUFEQXJHLEVBQWVvRyxFQUNYLEdBRUNBLEVBQWlCcEcsR0FBZ0JtRyxHQUVsQyxJQUFHRSxFQUFJLEdBQ2YsSUFBSUMsRUFBYW5MLEVBQUUsc0JBQXNCQSxFQUFFRixNQUFNaUcsU0FDakQvRixFQUFFbUwsR0FDR3ZILEtBQUssNkJBQ0w5QixJQUFJLFFBQWEsSUFBSm9KLEVBQVUsUUFVaENsTCxFQUFFLE9BQU9zRCxHQUFHLDZCQUE4QixDQUMxQyxJQUNJOUQsRUFEQUksR0FBUyxFQUVUSSxFQUFFLE9BQU9zRCxHQUFHLDhCQUNaMUQsR0FBUyxFQUNURixFQUFLcUwsMkJBQ0xyTCxFQUFLRyxxQkFpQlRNLEVBQVVpTCxPQUFPN0wsR0FDakJZLEVBQVUrSCxPQUFPM0ksR0FFckJPLEtBQUt1TCxZQUFjLFdBQ2YzTCxFQUFLNEwsV0FDR0MsWUFBWTdMLEVBQUs0TCxTQUFVLE1BS3ZDeEwsS0FBS3dMLFNBQVcsV0FDWnRMLEVBQUUsaUJBQWlCbUQsS0FBSyxXQUNwQixJQUFJcUksRUFBTyxJQUFJQyxLQUNYekwsRUFBRUYsTUFBTW1ELEtBQUssYUFBYXVJLEVBQUtFLGFBQWExTCxFQUFFRixNQUFNbUQsS0FBSyxhQUM3RCxJQUFJMEksRUFBUUgsRUFBS0ksV0FDYkMsRUFBVUwsRUFBS00sYUFDZkMsRUFBVVAsRUFBS1EsU0FDZkMsRUFBTVQsRUFBS1UsVUFDWEMsRUFBUVgsRUFBS1ksV0FDYkMsRUFBT2IsRUFBS2MsY0F3QlpYLEVBQVEsS0FBSUEsRUFBUSxJQUFNQSxHQUMxQkUsRUFBVSxLQUFJQSxFQUFVLElBQU1BLEdBQ2xDRSxHQXhCUSxjQUNBLGNBQ0EsVUFDQSxRQUNBLFVBQ0EsVUFDQSxXQWtCV0EsR0FDbkJJLEdBaEJRLFNBQ0EsVUFDQSxRQUNBLFNBQ0EsTUFDQSxPQUNBLE9BQ0EsVUFDQSxXQUNBLFVBQ0EsU0FDQSxXQUtRQSxHQUNabk0sRUFBRSx1QkFDRkEsRUFBRSxzQkFBc0JvRSxLQUFLdUgsRUFBUSxJQUFNRSxHQUMzQzdMLEVBQUUsdUJBQ0ZBLEVBQUUsc0JBQXNCb0UsS0FDcEIySCxFQUFVLEtBQU9FLEVBQU0sSUFBTUUsRUFBUSxJQUFNRSxNQU12RHJNLEVBQUUsT0FBT3NELEdBQUcsa0JBQ1o1RCxFQUFLMkwsY0FHTHJMLEVBQUUsT0FBT3NELEdBQUcscUJBQ1p0RCxFQUFFLG9CQUFvQm1ELEtBQUssV0FFdkJuRCxFQUFFRixNQUFNd0IsWUFDSmlMLGlCQUFrQixJQUNsQkMsaUJBQWtCLElBQ2xCQyxZQUFhLE1BQ2JsTCxhQUFjLE9BQ2RDLGdCQUFpQixLQUNqQmtMLFdBQVksVUFDWkMsV0FBWSxPQUNaQyxPQUFRLE9BQ1JsTCxZQUFhLGNBTXpCNUIsS0FBSytNLFVBQVksV0FDSTdNLEVBQUUsWUFDUm1ELEtBQUssV0FDWixJQUFJMkosRUFBVzlNLEVBQUVGLE1BQ2pCZ04sRUFBU2xKLEtBQUssbUJBQW1CVCxLQUFLLFdBQ2xDbkQsRUFBRUYsTUFBTTJDLEdBQUcsUUFBUyxXQUNoQi9DLEVBQUtxTixnQkFBZ0JELEVBQVU5TSxFQUFFRixNQUFNaUcsYUFHL0NyRyxFQUFLcU4sZ0JBQWdCRCxFQUFTLEdBQUUsTUFJeENoTixLQUFLaU4sZ0JBQWtCLFNBQVV2SixFQUFJb0IsRUFBS29JLEdBQ3RDLElBQUlDLEVBQVVqTixFQUFFd0QsRUFBR0ksS0FBSyxvQkFDcEJzSixFQUFRbE4sRUFBRXdELEVBQUdJLEtBQUssa0JBQ3RCSixFQUFHSSxLQUFLLHdCQUF3QlQsS0FBSyxXQUNqQ25ELEVBQUUsSUFBTUEsRUFBRUYsTUFBTW1ELEtBQUssZ0JBQWdCNkUsU0FFekNtRixFQUFRM0ssWUFBWSxVQUNwQjRLLEVBQUs1SyxZQUFZLFVBQ2pCdEMsRUFBRWlOLEVBQVFySSxJQUFNdkMsU0FBUyxVQUN6QnJDLEVBQUVrTixFQUFLdEksSUFBTXZDLFNBQVMsV0FFMEYsR0FBN0dyQyxFQUFFLElBQU1BLEVBQUVrTixFQUFLdEksSUFBTWhCLEtBQUssd0JBQXdCWCxLQUFLLGdCQUFnQlcsS0FBSyxxQkFBcUJ6QixVQUFpQjZLLElBQ2pIaE4sRUFBRSxJQUFNQSxFQUFFa04sRUFBS3RJLElBQU1oQixLQUFLLHdCQUF3QlgsS0FBSyxnQkFBZ0IyRSxRQUkzRTVILEVBQUUsT0FBT3NELEdBQUcsYUFDWjVELEVBQUttTixZQU9UL00sS0FBS3FOLHdCQUEwQixTQUFVM0osR0FDckNBLEVBQUdJLEtBQUssOEJBQThCbkIsR0FBRyxRQUFRLFdBQzdDL0MsRUFBSzBOLG1CQUFtQjVKLEtBRTVCQSxFQUFHSSxLQUFLLGlDQUFpQ25CLEdBQUcsUUFBUSxXQUNoRC9DLEVBQUsyTixrQkFBa0I3SixLQUUzQkEsRUFBR0ksS0FBSyxrQ0FBa0NuQixHQUFHLFFBQVEsV0FDakQvQyxFQUFLNE4sa0JBQWtCOUosS0FFM0JBLEVBQUdJLEtBQUssOEJBQThCbkIsR0FBRyxRQUFRLFdBQzdDL0MsRUFBSzZOLG1CQUFtQi9KLEtBRTVCQSxFQUFHSSxLQUFLLDhCQUE4QkEsS0FBSyxLQUFLbkIsR0FBRyxRQUFRLFNBQVVNLEVBQU1TLEdBQ3ZFVCxFQUFNdUYsaUJBRU41SSxFQUFLOE4sZUFBZWhLLE1BSTVCMUQsS0FBSzBOLGVBQWlCLFNBQVVoSyxHQUM1Qm1ELFFBQVFDLElBQUksZ0JBQ1psSCxFQUFLK04sbUJBQW1CakssSUFLNUIxRCxLQUFLNE4sa0JBQW9CLFNBQVVsSyxHQUMvQnhELEVBQUV3RCxHQUFJbkIsU0FBUyxjQUVuQnZDLEtBQUsyTixtQkFBcUIsU0FBVWpLLEdBQ2hDeEQsRUFBRXdELEdBQUlsQixZQUFZLGNBS3RCeEMsS0FBS3lOLG1CQUFxQixTQUFVL0osR0FFaEMsSUFBSW1LLEVBQVNuSyxFQUFHSSxLQUFLLDhCQUE4QnFFLFNBQ2hEMEYsRUFBT2pMLFNBQVMsY0FDZmlMLEVBQU9yTCxZQUFZLGFBQ25CNUMsRUFBSytOLG1CQUFtQmpLLEtBR3hCbUssRUFBT3RMLFNBQVMsYUFDaEIzQyxFQUFLZ08sa0JBQWtCbEssS0FHL0IxRCxLQUFLc04sbUJBQXFCLFNBQVU1SixHQUNoQyxJQUFHQSxFQUFHZCxTQUFTLGFBQWYsQ0FDQSxJQUFJaUwsRUFBU25LLEVBQUdJLEtBQUssOEJBQThCcUUsU0FDaEQwRixFQUFPakwsU0FBUyxjQUNmaUwsRUFBT3JMLFlBQVksYUFDbkJxRSxRQUFRQyxJQUFJLDJCQUVaK0csRUFBT3RMLFNBQVMsYUFDaEJzRSxRQUFRQyxJQUFJLGtCQUlwQjlHLEtBQUt1TixrQkFBb0IsU0FBVTdKLEdBQy9CLElBQUdBLEVBQUdkLFNBQVMsYUFBZixDQUNBLElBQUlpTCxFQUFTbkssRUFBR0ksS0FBSyxpQ0FBaUNxRSxTQUNuRDBGLEVBQU9qTCxTQUFTLGNBQ2ZpTCxFQUFPckwsWUFBWSxhQUNuQnFFLFFBQVFDLElBQUksd0JBRVorRyxFQUFPdEwsU0FBUyxhQUNoQnNFLFFBQVFDLElBQUksaUJBR3BCOUcsS0FBS3dOLGtCQUFvQixTQUFVOUosR0FDL0IsSUFBR0EsRUFBR2QsU0FBUyxhQUFmLENBQ0EsSUFBSWlMLEVBQVNuSyxFQUFHSSxLQUFLLGtDQUFrQ3FFLFNBQ3BEMEYsRUFBT2pMLFNBQVMsY0FDZmlMLEVBQU9yTCxZQUFZLGFBQ25CcUUsUUFBUUMsSUFBSSwyQkFFWitHLEVBQU90TCxTQUFTLGFBQ2hCc0UsUUFBUUMsSUFBSSx5QkFPaEI1RyxFQUFFLEtBQUtzRCxHQUFHLHlCQUVWdEQsRUFBRSx3QkFBd0JtRCxLQUFLLFdBQzNCekQsRUFBS3lOLHdCQUF3Qm5OLEVBQUVGLFNBU3ZDRSxFQUFFLDJCQUEyQnlDLEdBQUcsUUFBUyxXQUNyQy9DLEVBQUtrTyxZQUFZLGNBRXJCNU4sRUFBRSwwQkFBMEJ5QyxHQUFHLFFBQVMsV0FDcEMvQyxFQUFLa08sWUFBWSxhQUVyQjVOLEVBQUUseUJBQXlCeUMsR0FBRyxRQUFTLFdBQ25DL0MsRUFBS2tPLFlBQVksWUFHckI1TixFQUFFLHlCQUF5QnlDLEdBQUcsUUFBUyxXQUNuQy9DLEVBQUttTyxtQkFBbUIsY0FFNUI3TixFQUFFLHdCQUF3QnlDLEdBQUcsUUFBUyxXQUNsQy9DLEVBQUttTyxtQkFBbUIsYUFFNUI3TixFQUFFLHVCQUF1QnlDLEdBQUcsUUFBUyxXQUNqQy9DLEVBQUttTyxtQkFBbUIsWUFHNUIvTixLQUFLK04sbUJBQXFCLFNBQVVDLEdBRWhDQyxNQUFNLHFCQUF1QkQsSUFHakNoTyxLQUFLOE4sWUFBYyxTQUFVRSxHQUV6QkMsTUFBTSxjQUFnQkQsSUFHM0JoTyxLQUFLa08sUUFBVSxTQUFVeEssR0FDckIsSUFHSXlLLEVBQ0FDLEVBQ0FDLEVBTEFsRyxFQUFTekUsRUFBR3lFLFNBQ1ptRyxFQUFZbkcsRUFBTzlGLFNBQ25Ca00sRUFBWTdLLEVBQUdJLEtBQUssS0FJeEJxRSxFQUFPN0MsV0FBV2pDLEtBQUssV0FDbkJpTCxHQUFhcE8sRUFBRUYsTUFBTW9DLGFBQVksS0FHckNrTSxFQUFZQSxFQUFZNUssRUFBR3JCLFNBQVUsR0FJckNrTSxFQUFVbEwsS0FBSyxZQUNYOEssRUFBYWpPLEVBQUVGLE1BQU1vQyxhQUFZLElBRWhCa00sRUFDYkEsR0FBWUgsRUFFUkcsR0FHQUYsRUFBaUIzSCxLQUFLK0gsTUFBTXRPLEVBQUVGLE1BQU1tRyxPQUFPa0IsT0FBU2lILEVBQVlILEdBQ2hFRSxFQUFVbk8sRUFBRUYsTUFBTW1HLE9BQU9zSSxVQUFVLEVBQUdMLEVBQWMsR0FFcERsTyxFQUFFRixNQUFNbUcsS0FBSyxFQUFZLE9BQ3pCbUksRUFBWSxHQU5acE8sRUFBRUYsTUFBTWdDLElBQUksVUFBVSxXQXlCbEM5QixFQUFFLE9BQU9zRCxHQUFHLGtCQUNadEQsRUFBRSxnQkFBZ0JtRCxLQUFLLFdBQ25CekQsRUFBS3NPLFFBQVFoTyxFQUFFRixTQUluQkssRUFBVStILE9BQU8sV0FDYmxJLEVBQUUsZ0JBQWdCbUQsS0FBSyxXQUNuQnpELEVBQUtzTyxRQUFRaE8sRUFBRUYsWUFPM0JBLEtBQUswTyxrQkFBb0IsV0FDTnhPLEVBQUUsbUNBQ1JtRCxLQUFLLFdBQ1Z6RCxFQUFLK08sUUFBUXpPLEVBQUVGLE1BQU8sUUFJOUJBLEtBQUsyTyxRQUFVLFNBQVVqTCxFQUFJb0IsR0FDekIsSUFBSThKLEVBQVdsTCxFQUFHeUMsT0FDZHlJLEVBQVN2SCxPQUFTdkMsSUFDbEI4SixFQUFXQSxFQUFTQyxNQUFNLEVBQUcvSixHQUFPLE1BQ3BDcEIsRUFBR3lDLEtBQUt5SSxLQU1aMU8sRUFBRSxLQUFLc0QsR0FBRyxvQ0FDVjVELEVBQUs4TyxvQkFLUnRPLEVBQUkwTyxNQUFNLFdBRU5sUCxFQUFLdUMsZUFDTHZDLEVBQUswQyxzQkFJVHRDLEtBQUsrTyxPQUFTLFdBRVYsT0FEQTdPLEVBQUUsY0FBYzRGLFNBQVNoRSxVQUFXLEdBQUksTUFDakMsR0FHWDlCLEtBQUtnUCxhQUFlLFdBQ1o5TyxFQUFFQyxVQUFVMkIsWUFBYyxHQUMxQmIsRUFBU3NCLFNBQVMsY0FFbEJ0QixFQUFTdUIsWUFBWSxlQUs3QnZCLEVBQVMwQixHQUFHLFFBQVMvQyxFQUFLbVAsUUFFMUIxTyxFQUFVaUwsT0FBTyxXQUNiMUwsRUFBS29QLGVBQ0Q5TyxFQUFFLG1CQUFtQnNELEdBQUcsYUFDeEI1RCxFQUFLMEMsc0JBR2JqQyxFQUFVK0gsT0FBTyxXQUNieEksRUFBSzBDLG9CQUNMMUMsRUFBS3VDLGVBRURyQixFQUFTOEIsU0FBUyxZQUFZaEQsRUFBSzZDLGtCQUVuQ3ZDLEVBQUUsT0FBT3NELEdBQUcsdUJBQ1p0RCxFQUFFLHNCQUFzQm1ELEtBQUssV0FDekJuRCxFQUFFRixNQUFNd0MsWUFBWSxZQUNwQnRDLEVBQUVGLE1BQU13QyxZQUFZLGFBQ3BCNUMsRUFBSzZELGNBQWN2RCxFQUFFRixXQUlqQ0UsRUFBRUksUUFBUXFDLEdBQUcsT0FBUSxXQUNiekMsRUFBRSxPQUFPc0QsR0FBRyx1QkFDWnRELEVBQUUsc0JBQXNCbUQsS0FBSyxXQUN6QnpELEVBQUs2RCxjQUFjdkQsRUFBRUYsV0FLakNDLEVBQUswQyxHQUFHLFFBQVMsU0FBVU0sT0FZL0IvQyxFQUFFQyxVQUFVMk8sTUFFUixXQUNtQixJQUFJdFAiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy/RhNGD0L3QutGG0LjRjywg0L7Qv9GA0LXQtNC10LvRj9GO0YnQsNGPINC30LDRgNC10LPQuNGB0YLQstC40YDQvtCy0LDQvdC90YvQuSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LjQu9C4INC90LXRglxyXG5cclxuLy8g0L/RgNC10LTRg9GB0LzQvtGC0YDQtdGC0Ywg0LLRi9GF0L7QtCDQuNC3INCw0LrQutCw0YPQvdGC0LBcclxuXHJcblxyXG5Hb1RvVHJpcCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgYm9keSA9ICQoZG9jdW1lbnQuYm9keSksXHJcbiAgICAgICAgZG9jID0gJChkb2N1bWVudCksXHJcbiAgICAgICAgZG9jV2luZG93ID0gJCh3aW5kb3cpLFxyXG4gICAgICAgIGJvZHlQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgbGVmdDogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRva2VuMzYwID0gJChcIiNndC1pcy0zNjBcIiksXHJcbiAgICAgICAgdG9rZW40ODAgPSAkKFwiI2d0LWlzLTQ4MFwiKSxcclxuICAgICAgICB0b2tlbjY2NyA9ICQoXCIjZ3QtaXMtNjY3XCIpLFxyXG4gICAgICAgIHRva2VuNzY4ID0gJChcIiNndC1pcy03NjhcIiksXHJcbiAgICAgICAgdG9rZW4xMDI0ID0gJChcIiNndC1pcy0xMDI0XCIpLFxyXG4gICAgICAgIHRva2VuMTIzMSA9ICQoXCIjZ3QtaXMtMTIzMVwiKSxcclxuICAgICAgICBndEhlYWRlciA9ICQoXCJoZWFkZXJcIiksXHJcbiAgICAgICAgZ3RGb290ZXIgPSAkKFwiZm9vdGVyXCIpLFxyXG4gICAgICAgIGd0V3JhcHBlciA9ICQoXCIjZ3Qtd3JhcHBlclwiKSxcclxuICAgICAgICB1cEJ1dHRvbiA9ICQoXCIjZ3QtdXBcIiksXHJcbiAgICAgICAgbW9iaWxlTWVudVN3aXRjaCA9ICQoXCIjZ3QtbW9iaWxlLW1lbnUtc3dpdGNoXCIpLFxyXG4gICAgICAgIGVudGVyQnV0dG9uID0gJCgnLmd0LWVudGVyJyksXHJcbiAgICAgICAgZW50ZXJXcmFwcGVyID0gJCgnI2d0LWhlYWRlci1lbnRlci13cmFwcGVyJyksXHJcbiAgICAgICAgZW50ZXJGb3JtID0gJCgnI2d0LWhlYWRlci1lbnRlcicpLFxyXG4gICAgICAgIGVudGVyQ2hvc2UgPSAkKCcjZ3QtaGVhZGVyLWVudGVyLWNob3NlJyksXHJcbiAgICAgICAgZW50ZXJDbG9zZSA9ICQoJyNndC1oZWFkZXItZW50ZXItY2xvc2UnKTtcclxuICAgICQoXCJodG1sXCIpLm5pY2VTY3JvbGwoe1xyXG4gICAgICAgIGN1cnNvcmJvcmRlcjogJzFweCBzb2xpZCAjNmQ2ZDZkJyxcclxuICAgICAgICBtb3VzZXNjcm9sbHN0ZXA6ICc2MCcsXHJcbiAgICAgICAgYm91bmNlc2Nyb2xsOiB0cnVlLFxyXG4gICAgICAgIGN1cnNvcmNvbG9yOiAnIzZkNmQ2ZCdcclxuICAgIH0pXHJcblxyXG5cclxuICAgIHRoaXMuZml4Qm9keSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYm9keVBvc2l0aW9uLnRvcCB8fCBib2R5UG9zaXRpb24ubGVmdCkgcmV0dXJuO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi50b3AgPSBkb2Muc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLmxlZnQgPSBib2R5Lm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgYm9keS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBib2R5UG9zaXRpb24ubGVmdCArIFwicHhcIixcclxuICAgICAgICAgICAgdG9wOiAtMSAqIGJvZHlQb3NpdGlvbi50b3AgKyBcInB4XCJcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudW5maXhCb2R5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGJvZHkuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiXCIsXHJcbiAgICAgICAgICAgIGxlZnQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHRvcDogXCJcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvYy5zY3JvbGxUb3AoYm9keVBvc2l0aW9uLnRvcCk7XHJcbiAgICAgICAgYm9keVBvc2l0aW9uLnRvcCA9IGZhbHNlO1xyXG4gICAgICAgIGJvZHlQb3NpdGlvbi5sZWZ0ID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZm9vdGVySGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmb290ZXJIZWlnaHQgPSBndEZvb3Rlci5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgIGlmIChmb290ZXJIZWlnaHQgPiBkb2NXaW5kb3cuaGVpZ2h0KCkgLSA1MCkge1xyXG4gICAgICAgICAgICBndEZvb3Rlci5jc3MoXCJwb3NpdGlvblwiLCBcInN0YXRpY1wiKTtcclxuICAgICAgICAgICAgZ3RXcmFwcGVyLmNzcyhcIm1hcmdpbi1ib3R0b21cIiwgXCJcIik7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLmNzcyhcInBvc2l0aW9uXCIsIFwic3RhdGljXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGd0Rm9vdGVyLmNzcyhcInBvc2l0aW9uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5jc3MoXCJwb3NpdGlvblwiLCBcIlwiKTtcclxuICAgICAgICAgICAgZ3RXcmFwcGVyLmNzcyhcIm1hcmdpbi1ib3R0b21cIiwgZ3RGb290ZXIub3V0ZXJIZWlnaHQoKSArIFwicHhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZGVza1RvcE1lbnVTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRvY1dpbmRvdy5zY3JvbGxUb3AoKSA+IGd0SGVhZGVyLm91dGVySGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgZ3RIZWFkZXIuYWRkQ2xhc3MoXCJndC1oZWFkZXItc2Nyb2xsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3RIZWFkZXIucmVtb3ZlQ2xhc3MoXCJndC1oZWFkZXItc2Nyb2xsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBcclxuICAgIHRoaXMubW9iaWxlTWVudUNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYudW5maXhCb2R5KCk7XHJcbiAgICAgICAgbW9iaWxlTWVudVN3aXRjaC5yZW1vdmVDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgZ3RIZWFkZXIucmVtb3ZlQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5tb2JpbGVNZW51T3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmZpeEJvZHkoKTtcclxuICAgICAgICBndEhlYWRlci5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICAgICAgbW9iaWxlTWVudVN3aXRjaC5hZGRDbGFzcyhcImd0LW9wZW5cIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgbW9iaWxlTWVudVN3aXRjaC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcImd0LW9wZW5cIikpIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVNZW51Q2xvc2UoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLm1vYmlsZU1lbnVPcGVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLm9wZW5FbnRlckZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZW50ZXJXcmFwcGVyLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgc2V0VGltZW91dChzaG93KTtcclxuICAgICAgICBmdW5jdGlvbiBzaG93KCkge1xyXG4gICAgICAgICAgICAkKCcjZ3QtaGVhZGVyLXJlZ2lzdGVyZWQnKS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgICAgICBlbnRlckZvcm0uYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgZW50ZXJDbG9zZS5hZGRDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuY2xvc2VFbnRlckZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZW50ZXJDbG9zZS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIGVudGVyRm9ybS5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgICQoJyNndC1oZWFkZXItcmVnaXN0ZXJlZCcpLnJlbW92ZUNsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgc2VsZi5jbG9zZVJlc3RvcmVQYXNzKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChoaWRlLCA3NTApO1xyXG4gICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7XHJcbiAgICAgICAgICAgIGVudGVyV3JhcHBlci5yZW1vdmVDbGFzcygnZ3Qtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuY2hhbmdlRW50ZXJSZWdpc3RyYXRpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZW50ZXJGb3JtLmhhc0NsYXNzKCQoZXZlbnQudGFyZ2V0KS5hdHRyKFwiY2xhc3NcIikpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZW50ZXJGb3JtLnJlbW92ZUNsYXNzKFwiZ3QtY2hvc2VuLWVudGVyXCIpLnJlbW92ZUNsYXNzKFwiZ3QtY2hvc2VuLXJlZ2lzdHJhdGlvblwiKS5hZGRDbGFzcygkKGV2ZW50LnRhcmdldCkuYXR0cihcImNsYXNzXCIpKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5vcGVuUmVzdG9yZVBhc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2d0LWVudGVyLXBhc3MtcmVzdG9yZS13cmFwcGVyJykuYWRkQ2xhc3MoJ2d0LW9wZW4nKVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgdGhpcy5jbG9zZVJlc3RvcmVQYXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJyNndC1lbnRlci1wYXNzLXJlc3RvcmUtd3JhcHBlcicpLnJlbW92ZUNsYXNzKCdndC1vcGVuJylcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgZW50ZXJCdXR0b24uZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5vbignY2xpY2snLCBzZWxmLm9wZW5FbnRlckZvcm0pXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgZW50ZXJDbG9zZS5vbignY2xpY2snLCBzZWxmLmNsb3NlRW50ZXJGb3JtKTtcclxuICAgIFxyXG4gICAgZW50ZXJDaG9zZS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBzZWxmLmNoYW5nZUVudGVyUmVnaXN0cmF0aW9uKGV2ZW50KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1yZXN0b3JlLXBhc3MnKS5vbignY2xpY2snLHNlbGYub3BlblJlc3RvcmVQYXNzKTtcclxuICAgICQoJyNndC1lbnRlci1wYXNzLXJlc3RvcmUtc3VibWl0Jykub24oJ2NsaWNrJyxzZWxmLmNsb3NlUmVzdG9yZVBhc3MpO1xyXG5cclxuICAgIHRoaXMuc2V0QmFja2dyb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW1nSG9sZGVycyA9ICQoXCIuZ3QtaW1nLWhvbGRlclwiKTtcclxuICAgICAgICBpbWdIb2xkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykuYXR0cihcImRhdGEtYmdcIikpIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWJnXCIpO1xyXG4gICAgICAgICAgICBpZiAodG9rZW42NjcuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VybChcIi4vaW1nL2JhY2tncm91bmRzL3Bob25lLycgKyBwYXRoICsgJ1wiKSdcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRva2VuMTAyNC5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyhcclxuICAgICAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICAndXJsKFwiLi9pbWcvYmFja2dyb3VuZHMvdGFibGV0LycgKyBwYXRoICsgJ1wiKSdcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoXHJcbiAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtaW1hZ2VcIixcclxuICAgICAgICAgICAgICAgICd1cmwoXCIuL2ltZy9iYWNrZ3JvdW5kcy9kZXNrdG9wLycgKyBwYXRoICsgJ1wiKSdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5pbWdIb2xkZXJGdW5jID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgJChlbCkucmVtb3ZlQ2xhc3MoXCJndC13aWR0aFwiKTtcclxuICAgICAgICAkKGVsKS5yZW1vdmVDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICAkKGVsKS5yZW1vdmVDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICAgICAgdmFyIGhvbGRlckNvbnN0ID0gZWwub3V0ZXJIZWlnaHQoKSAvIGVsLm91dGVyV2lkdGgoKSxcclxuICAgICAgICAgICAgaW1nID0gZWwuZmluZCgnaW1nJyksXHJcbiAgICAgICAgICAgIGltZ0NvbnN0ID0gaW1nLm91dGVySGVpZ2h0KCkgLyBpbWcub3V0ZXJXaWR0aCgpO1xyXG4gICAgXHJcbiAgICAgICAgaWYgKGltZ0NvbnN0ID4gaG9sZGVyQ29uc3QpIHtcclxuICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJndC13aWR0aFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3QtaGVpZ2h0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKGVsKS5hZGRDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWltZy1ob2xkZXJcIikpIHtcclxuICAgICAgICBzZWxmLnNldEJhY2tncm91bmQoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNyZWF0ZVNsaWRlciA9IGZ1bmN0aW9uIChjdXJyU2xpZGVyLCBwb3NpdGlvbikge1xyXG4gICAgICAgIHZhciBzbGlkZXJUaW1lT3V0LFxyXG4gICAgICAgICAgICBzY3JlZW5Db25zdCA9IDEsXHJcbiAgICAgICAgICAgIGJhc2VXaWR0aCxcclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSBmYWxzZSxcclxuICAgICAgICAgICAgaW5uZXIgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWlubmVyXCIpLFxyXG4gICAgICAgICAgICBjb250YWluZXIgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWNvbnRhaW5lclwiKSxcclxuICAgICAgICAgICAgaW5uZXJDb3VudCA9IGlubmVyLmxlbmd0aCxcclxuICAgICAgICAgICAgY3VyclBvc2l0aW9uID0gcG9zaXRpb24gfHwgMCxcclxuICAgICAgICAgICAgYXJyb3cgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWhhcy1hcnJvd1wiKSxcclxuICAgICAgICAgICAgZG90cyA9IGN1cnJTbGlkZXIuaGFzQ2xhc3MoXCJndC1zbGlkZXItaGFzLWRvdHNcIiksXHJcbiAgICAgICAgICAgIG51bVBhbmVsID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1udW1cIiksXHJcbiAgICAgICAgICAgIHRyYW0gPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLXRyYW1cIiksXHJcbiAgICAgICAgICAgIHRyYW1BbmltYXRpb24gPSBjdXJyU2xpZGVyLmF0dHIoJ2RhdGEtZHVyYXRpb24nKSB8fCAzMDAsXHJcbiAgICAgICAgICAgIGZhZGUgPSBjdXJyU2xpZGVyLmhhc0NsYXNzKFwiZ3Qtc2xpZGVyLWZhZGVcIiksXHJcbiAgICAgICAgICAgIGhhc0Nsb25lID0gY3VyclNsaWRlci5oYXNDbGFzcyhcImd0LXNsaWRlci1oYXMtY2xvbmVcIik7XHJcbiAgICAgICAgaWYgKGZhZGUpIHtcclxuICAgICAgICAgICAgZmFkZVNsaWRlck1vdmUocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHJhbSkge1xyXG4gICAgICAgICAgICBmaW5kU2NyZWVuQ29uc3QoKTtcclxuICAgICAgICAgICAgc2V0QmFzZVdpZHRoKCk7XHJcbiAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcnJvdykge1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgY3JlYXRlQXJyb3dzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb3RzKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZURvdHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICBjcmVhdGVUb3VjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGFzQ2xvbmUpIHtcclxuICAgICAgICAgICAgY3JlYXRlQ2xvbmVMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDbG9uZUxpc3RlbmVycygpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLWlubmVyLWNvdmVyJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVDbG9uZVNsaWRlcigkKHRoaXMpLnBhcmVudCgpLmluZGV4KCkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFycm93cygpIHtcclxuICAgICAgICAgICAgaWYgKGlubmVyQ291bnQgPiBzY3JlZW5Db25zdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG51bUlubmVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtUGFuZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBudW1Jbm5lciA9ICc8ZGl2IGNsYXNzPVwiZ3Qtc2xpZGVyLWFycm93LW51bVwiPjxpIGNsYXNzPVwiZ3Qtc2xpZGVyLW51bS1jdXJyXCI+PC9pPjxpPtC40Lc8L2k+PGkgY2xhc3M9XCJndC1zbGlkZXItbnVtLW1heFwiPjwvaT48L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWFycm93LWhvbGRlclwiKS5odG1sKFxyXG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcyA9IFwiZ3Qtc2xpZGVyLWFycm93IGxlZnRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cIiArIG51bUlubmVyICtcclxuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3MgPSBcImd0LXNsaWRlci1hcnJvdyByaWdodFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPC9zcGFuPlwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQXJyb3dzTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgICAgICBzaG93TnVtKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lBcnJvd3MoY2xvbmUpIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gY2xvbmUgfHwgY3VyclNsaWRlcjtcclxuICAgICAgICAgICAgZWwuZmluZChcIi5sZWZ0XCIpLm9mZigpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLnJpZ2h0XCIpLm9mZigpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXNsaWRlci1hcnJvdy1ob2xkZXJcIikuaHRtbChcIlwiKTtcclxuICAgICAgICAgICAgYXJyb3dzUmVhZHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcnJvd3NMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5sZWZ0XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgb25lTW92ZUZ1bmN0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5yaWdodFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChudW1QYW5lbCkgc2hvd051bSgpXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRG90cygpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJndC1zbGlkZXItbmF2XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIHZhciBuYXYgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLW5hdlwiKSxcclxuICAgICAgICAgICAgICAgIHNwYW5zID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbm5lckNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHNwYW5zICs9IFwiPHNwYW4gZGF0YS1udW0gPSBcIiArIGkgKyBcIj48L3NwYW4+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmF2Lmh0bWwoc3BhbnMpO1xyXG4gICAgICAgICAgICBuYXYuZmluZChcInNwYW5cIikuZmlyc3QoKS5hZGRDbGFzcyhcImd0LWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKFwiLmd0LXNsaWRlci1uYXYgc3BhblwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlLCArJCh0aGlzKS5hdHRyKFwiZGF0YS1udW1cIikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBvbmVNb3ZlRnVuY3Rpb24oYnVsLCBudW0pIHtcclxuICAgICAgICAgICAgaWYgKG51bSB8fCBudW0gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IG51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGJ1bCkge1xyXG4gICAgICAgICAgICAgICAgY3VyclBvc2l0aW9uKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24tLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKGZhZGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyUG9zaXRpb24gPiBpbm5lckNvdW50IC0gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24gPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmFkZVNsaWRlck1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICh0cmFtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VyclBvc2l0aW9uID4gaW5uZXJDb3VudCAtIHNjcmVlbkNvbnN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcygnbGVmdCcsICgtKGN1cnJQb3NpdGlvbiAtIDIpICogYmFzZVdpZHRoKSArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQoY29udGFpbmVyLmNoaWxkcmVuKCkuZmlyc3QoKS5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW4oKS5maXJzdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbi0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY3NzKCdsZWZ0JywgKC0oY3VyclBvc2l0aW9uICsgMikgKiBiYXNlV2lkdGgpICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnByZXBlbmQoY29udGFpbmVyLmNoaWxkcmVuKCkubGFzdCgpLmNsb25lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlbigpLmxhc3QoKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyUG9zaXRpb24rKztcclxuICAgICAgICAgICAgICAgICAgICB0cmFtU2xpZGVyTW92ZSgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKG51bVBhbmVsKSBzaG93TnVtKCk7XHJcbiAgICAgICAgICAgIGlmIChkb3RzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWxsRG90cyA9IGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItbmF2IHNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICBhbGxEb3RzLnJlbW92ZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgJChhbGxEb3RzW2NvbnRhaW5lci5maW5kKCcuZ3Qtb3BlbicpLmF0dHIoJ2RhdGEtY291bnQnKV0pLmFkZENsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gdHJhbVNsaWRlck1vdmUoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hbmltYXRlKHtsZWZ0OiAtY3VyclBvc2l0aW9uICogYmFzZVdpZHRofSwgdHJhbUFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlbigpLmVxKGN1cnJQb3NpdGlvbikuYWRkQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGZhZGVTbGlkZXJNb3ZlKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBvc2l0aW9uIHx8IGN1cnJQb3NpdGlvbjtcclxuICAgICAgICAgICAgJChpbm5lcikucmVtb3ZlQ2xhc3MoJ2d0LW9wZW4nKTtcclxuICAgICAgICAgICAgJChpbm5lcltpbmRleF0pLmFkZENsYXNzKCdndC1vcGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2hvd051bSgpIHtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLW51bS1jdXJyJykudGV4dCgrKGNvbnRhaW5lci5maW5kKCcuZ3Qtb3BlbicpLmF0dHIoJ2RhdGEtY291bnQnKSkgKyAxKTtcclxuICAgICAgICAgICAgY3VyclNsaWRlci5maW5kKCcuZ3Qtc2xpZGVyLW51bS1tYXgnKS50ZXh0KGlubmVyQ291bnQpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRvdWNoKCkge1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbFBvaW50ID0gMCxcclxuICAgICAgICAgICAgICAgIGZpbmFsUG9pbnQgPSAwO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLm9uKFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxQb2ludCA9IE1hdGguYWJzKGUudG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvdWNoc3RhcnRcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdXJyU2xpZGVyLm9uKFwidG91Y2hlbmRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBmaW5hbFBvaW50ID0gTWF0aC5hYnMoZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoaW5pdGlhbFBvaW50IC0gZmluYWxQb2ludCkgPiA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsUG9pbnQgPiBmaW5hbFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZU1vdmVGdW5jdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmVNb3ZlRnVuY3Rpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVRvdWNoKGNsb25lKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGNsb25lIHx8IGN1cnJTbGlkZXI7XHJcbiAgICAgICAgICAgIGVsLm9mZigpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRTY3JlZW5Db25zdCgpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJTbGlkZXIuYXR0cihcImRhdGEtY291bnRcIikpIHtcclxuICAgICAgICAgICAgICAgIHNjcmVlbkNvbnN0ID0gcGFyc2VJbnQoY3VyclNsaWRlci5hdHRyKFwiZGF0YS1jb3VudFwiKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0b2tlbjc2OCkuaXMoXCI6dmlzaWJsZVwiKSkgc2NyZWVuQ29uc3QgPSAzO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodG9rZW42NjcpLmlzKFwiOnZpc2libGVcIikpIHNjcmVlbkNvbnN0ID0gMjtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRva2VuMzYwKS5pcyhcIjp2aXNpYmxlXCIpKSBzY3JlZW5Db25zdCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBzZXRCYXNlV2lkdGgoKSB7XHJcbiAgICAgICAgICAgIGJhc2VXaWR0aCA9IGN1cnJTbGlkZXIub3V0ZXJXaWR0aCgpIC8gc2NyZWVuQ29uc3Q7XHJcbiAgICAgICAgICAgIGN1cnJTbGlkZXIuZmluZChcIi5ndC1zbGlkZXItY29udGFpbmVyXCIpLm91dGVyV2lkdGgoKGlubmVyQ291bnQgKyAxKSAqIGJhc2VXaWR0aCk7XHJcbiAgICAgICAgICAgIGlubmVyLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vdXRlcldpZHRoKGJhc2VXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY291bnQnLCAkKHRoaXMpLmluZGV4KCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDbG9uZVNsaWRlcihjbGlja1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiI2d0LWNsb25lXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHNlbGYuZml4Qm9keSgpO1xyXG4gICAgICAgICAgICB2YXIgYm9keVdyYXBwZXIgPSAkKFwiI2d0LWJvZHktd3JhcHBlclwiKTtcclxuICAgICAgICAgICAgYm9keVdyYXBwZXIuYXBwZW5kKCc8ZGl2IGlkID0gXCJndC1jbG9uZS13cmFwcGVyXCIgICBjbGFzcz1cImNvbnRhaW5lclwiPjxkaXYgaWQgPSBcImd0LWNsb25lXCIgY2xhc3M9XCJndC1zbGlkZXIgZ3Qtc2xpZGVyLWNsb25lIGd0LXNsaWRlci1mYWRlIGd0LXNsaWRlci1udW0gIGd0LXNsaWRlci1oYXMtYXJyb3dcIj48ZGl2IGlkID0gXCJndC1jbG9uZS1jbG9zZVwiIGNsYXNzID0gXCJndC1zbGlkZXItY2xvbmUtY2xvc2VcIj48L2Rpdj48ZGl2ICBpZCA9IFwiZ3QtY2xvbmUtY29udGFpbmVyXCIgY2xhc3M9XCJndC1zbGlkZXItY29udGFpbmVyXCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIGJvZHlXcmFwcGVyLnNob3coKTtcclxuICAgICAgICAgICAgdmFyIGNsb25lU2xpZGVyID0gJCgnI2d0LWNsb25lJyksXHJcbiAgICAgICAgICAgICAgICBpbm5lcnMgPSBjdXJyU2xpZGVyLmZpbmQoXCIuZ3Qtc2xpZGVyLWlubmVyXCIpLmNsb25lKHRydWUpO1xyXG4gICAgICAgICAgICBpbm5lcnMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm91dGVyV2lkdGgoJycpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2d0LWNsb25lLWNvbnRhaW5lcicpLmFwcGVuZCgkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNlbGYuY3JlYXRlU2xpZGVyKGNsb25lU2xpZGVyLCBjbGlja1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgJChcIiNndC1jbG9uZS1jbG9zZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3lDbG9uZVNsaWRlcihjbG9uZVNsaWRlcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lDbG9uZVNsaWRlcihjbG9uZVNsaWRlcikge1xyXG4gICAgICAgICAgICBkZXN0cm95QXJyb3dzKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgZGVzdHJveVRvdWNoKGNsb25lU2xpZGVyKTtcclxuICAgICAgICAgICAgJChcIiNndC1jbG9uZS1jbG9zZVwiKS5vZmYoKTtcclxuICAgICAgICAgICAgJChcIiNndC1jbG9uZS13cmFwcGVyXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkKFwiI2d0LWJvZHktd3JhcHBlclwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIHNlbGYudW5maXhCb2R5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8vLy8vLy8vL3Jlc2l6ZVNsaWRlclxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZVNsaWRlcigpIHtcclxuICAgICAgICAgICAgaWYgKCFzbGlkZXJUaW1lT3V0KSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXJUaW1lT3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyVGltZU91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTMyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGRvY1dpbmRvdy5yZXNpemUocmVzaXplU2xpZGVyKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZUZ1bmMoKSB7XHJcbiAgICAgICAgICAgIGRlc3Ryb3lUb3VjaCgpO1xyXG4gICAgICAgICAgICBpZiAodHJhbSkge1xyXG4gICAgICAgICAgICAgICAgZmluZFNjcmVlbkNvbnN0KCk7XHJcbiAgICAgICAgICAgICAgICBzZXRCYXNlV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHJlc2l6ZU1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRyYW1TbGlkZXJNb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFycm93c1JlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICBkZXN0cm95QXJyb3dzKCk7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVBcnJvd3MoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbm5lckNvdW50ID4gc2NyZWVuQ29uc3QpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVRvdWNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplTW92ZSgpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdClcclxuICAgICAgICAgICAgICAgIGN1cnJQb3NpdGlvbiA9IGlubmVyQ291bnQgLSBzY3JlZW5Db25zdDtcclxuICAgICAgICAgICAgaWYgKGlubmVyQ291bnQgPD0gc2NyZWVuQ29uc3QpIGN1cnJQb3NpdGlvbiA9IDA7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfTtcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXNsaWRlclwiKSkge1xyXG4gICAgICAgICQoXCIuZ3Qtc2xpZGVyXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZVNsaWRlcigkKHRoaXMpKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgdGhpcy5tYW5hZ2VHdEFjdGl2ZVVsTWVudSA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmIChlbC50YWdOYW1lICE9IFwibGlcIilcclxuICAgICAgICAgICAgZWwgPSAkKGVsKS5jbG9zZXN0KFwibGlcIik7XHJcbiAgICBcclxuICAgICAgICAkKGVsKS5jbG9zZXN0KCQoXCJ1bFwiKSkuZmluZChcImxpXCIpLnJlbW92ZUNsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICQoZWwpLmFkZENsYXNzKFwiZ3QtYWN0aXZlXCIpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyBpZiAoJChcIipcIikuaXMoXCIuZ3QtaHVuZHJldC1tZW51XCIpKSB7XHJcbiAgICAvLyAgICAgJChcIi5ndC1odW5kcmV0LW1lbnVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIC8vICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vICAgICAgICAgc2VsZi5tYW5hZ2VHdEFjdGl2ZVVsTWVudShldmVudC50YXJnZXQpO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC1idXR0b24tbWVudVwiKSkge1xyXG4gICAgICAgICQoXCIuZ3QtYnV0dG9uLW1lbnVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5tYW5hZ2VHdEFjdGl2ZVVsTWVudShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoJChcIipcIikuaXMoXCIuZ3QtbWVudS1uZXdzXCIpKSB7XHJcbiAgICAgICAgJChcIi5ndC1tZW51LW5ld3NcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5tYW5hZ2VHdEFjdGl2ZVVsTWVudShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0UGxheWVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuICAgICAgICB0YWcudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiAgICAgICAgdGFnLnNyYyA9IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vcGxheWVyX2FwaVwiO1xyXG4gICAgICAgIHZhciBsYXN0U2NyaXB0VGFnID0gJChcInNjcmlwdFwiKVskKFwic2NyaXB0XCIpLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIGxhc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFnLCBsYXN0U2NyaXB0VGFnKTtcclxuICAgICAgICB2YXIgZ3RWaWRlb3MgPSAkKFwiLmd0LXZpZGVvXCIpO1xyXG4gICAgICAgIGd0VmlkZW9zLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFBsYXllciA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIuZmluZChcIi5ndC12aWRlby1zd2l0Y2hcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiZ3Qtb3BlblwiKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIuYWRkQ2xhc3MoXCJndC1vcGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hZGRZb3VUdWJlKGN1cnJlbnRQbGF5ZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuYWRkWW91VHViZSA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIHZhciBwbGF5ZXIsXHJcbiAgICAgICAgICAgIGVsSWQgPSBcImd0LXZpZGVvLVwiICsgZWwuaW5kZXgoKTtcclxuICAgIFxyXG4gICAgICAgIGVsLmZpbmQoXCIuZ3QtdmlkZW8tc3dpdGNoXCIpLmhpZGUoJ3Nsb3cnKTtcclxuICAgIFxyXG4gICAgICAgIGVsXHJcbiAgICAgICAgICAgIC5maW5kKFwiLmd0LXZpZGVvLWlubmVyXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgZWxJZClcclxuICAgICAgICAgICAgLmFkZENsYXNzKFwiZ3QtdmlkZW8tZm9yZWdyb3VuZFwiKTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCkge1xyXG4gICAgICAgICAgICBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKGVsSWQsIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA2MDAsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgICAgICAgICAgIHZpZGVvSWQ6IGVsLmF0dHIoXCJkYXRhLXlvdXR1YmVcIiksXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJWYXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWxpc3Q6IGVsLmF0dHIoXCJkYXRhLXlvdXR1YmVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZWtiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRyb2xzOiAwXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25SZWFkeTogaW5pdGlhbGl6ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBvbllvdVR1YmVJZnJhbWVBUElSZWFkeSgpO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgcGxheWVyLm11dGUoKTtcclxuICAgICAgICAgICAgcGxheWVyLnBsYXlWaWRlbygpO1xyXG4gICAgICAgICAgICBlbC5hZGRDbGFzcyhcImd0LXZpZGVvLW9uXCIpO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXZpZGVvLXVuY292ZXJcIikub24oJ2NsaWNrJywgcGxheUZ1bGxTY3JlZW4pO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXZpZGVvLXBhdXNlXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5wYXVzZVZpZGVvKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbC5maW5kKFwiLmd0LXZpZGVvLXBsYXlcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHBsYXlGdWxsU2NyZWVuKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncGxheUZ1bGxTY3JlZW4nKTtcclxuICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGVsLmZpbmQoJ2lmcmFtZScpWzBdO1xyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdEZ1bGxTY3JlZW4gPSBpZnJhbWUucmVxdWVzdEZ1bGxTY3JlZW4gfHwgaWZyYW1lLm1velJlcXVlc3RGdWxsU2NyZWVuIHx8IGlmcmFtZS53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbjtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3RGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0RnVsbFNjcmVlbi5iaW5kKGlmcmFtZSkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXZpZGVvXCIpKSB7XHJcbiAgICAgICAgc2VsZi5zZXRQbGF5ZXJzKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJsZSA9ICQoXCIuZ3QtYXJ0aWNsZS10YWJsZS13cmFwcGVyXCIpLFxyXG4gICAgICAgICAgICB0YWJsZVBhcmVudCA9IHRhYmxlLnBhcmVudCgpLFxyXG4gICAgICAgICAgICB0YWJsZUhlaWdodCA9IHRhYmxlLm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50VG9wID0gdGFibGVQYXJlbnQucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgIHRhYmxlUGFyZW50Qm90dG9tID0gdGFibGVQYXJlbnRUb3AgKyB0YWJsZVBhcmVudC5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICB0YWJsZVdpZHRoID0gdGFibGUub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICB3aW5kb3dUb3AgPSBkb2Muc2Nyb2xsVG9wKCk7XHJcbiAgICBcclxuICAgICAgICBpZiAodGFibGVQYXJlbnRUb3ArOTAgPiB3aW5kb3dUb3ApIHtcclxuICAgICAgICAgICAgaWYgKHRhYmxlLmhhc0NsYXNzKFwiZ3QtZml4ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUNsYXNzKFwiZ3QtZml4ZWRcIik7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKHRhYmxlUGFyZW50VG9wIDwgd2luZG93VG9wICsgOTApIHtcclxuICAgICAgICAgICAgaWYgKCF0YWJsZS5oYXNDbGFzcyhcImd0LWZpeGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRhYmxlLm9mZnNldCgpLmxlZnQgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRhYmxlV2lkdGhcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGFibGUuYWRkQ2xhc3MoXCJndC1maXhlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAod2luZG93VG9wLSB0YWJsZVBhcmVudEJvdHRvbSt0YWJsZUhlaWdodCs5MCA+PTApIHtcclxuICAgICAgICAgICAgICAgIHRhYmxlLmFkZENsYXNzKFwiZ3QtZml4ZWQtYm90dG9tXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlQ2xhc3MoXCJndC1maXhlZC1ib3R0b21cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmNyZWF0ZUFydGljdGVTY3JvbGxUYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISQoXCJkaXZcIikuaXMoXCIuZ3QtYXJ0aWNsZVwiKSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBhcnRpY2xlcyA9ICQoXCIuZ3QtYXJ0aWNsZVwiKSxcclxuICAgICAgICAgICAgaHRtbCA9IFwiXCI7XHJcbiAgICAgICAgYXJ0aWNsZXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz1cclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzID0gXCJndC1hcnRpY2xlLXNjcm9sbFwiPjxkaXYgY2xhc3MgPSBcImd0LWFydGljbGUtc2Nyb2xsLXNoYWRvd1wiPjwvZGl2PjxwPicgK1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiaDJcIilcclxuICAgICAgICAgICAgICAgICAgICAudGV4dCgpICtcclxuICAgICAgICAgICAgICAgIFwiPC9wPjwvZGl2PlwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIjZ3QtYXJ0aWNsZS1zY3JvbGwtdGFibGVcIikuaHRtbChodG1sKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuc2hvd0FydGlkbGVTaGFkb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5ndC1hcnRpY2xlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkKHRoaXMpKTtcclxuICAgICAgICAgICAgdmFyIGN1cnJQb3NpdGlvbiA9ICQodGhpcykucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICBlbEhlaWdodCA9ICQodGhpcykub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIHdpbmRvd1Bvc2l0aW9uID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgaWYgKGN1cnJQb3NpdGlvbiA+IHdpbmRvd1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHggPSAod2luZG93UG9zaXRpb24gLSBjdXJyUG9zaXRpb24pIC8gZWxIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPiAxKSB4ID0gMTtcclxuICAgICAgICAgICAgdmFyIGN1cnJTaGFkb3cgPSAkKFwiLmd0LWFydGljbGUtc2Nyb2xsXCIpWyQodGhpcykuaW5kZXgoKV07XHJcbiAgICAgICAgICAgICQoY3VyclNoYWRvdylcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmd0LWFydGljbGUtc2Nyb2xsLXNoYWRvd1wiKVxyXG4gICAgICAgICAgICAgICAgLmNzcyhcIndpZHRoXCIsIHggKiAxMDAgKyBcIiVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBpZiAoJCgnZGl2JykuaXMoJy5ndC1hcnRpY2xlLXRhYmxlLXdyYXBwZXInKSkge1xyXG4gICAgICAgIHZhciBzaGFkb3cgPSBmYWxzZSxcclxuICAgICAgICAgICAgc2Nyb2xsVGltZW91dDtcclxuICAgICAgICBpZiAoJCgnZGl2JykuaXMoXCIuZ3QtYXJ0aWNsZS1zY3JvbGwtdGFibGVcIikpIHtcclxuICAgICAgICAgICAgc2hhZG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2VsZi5jcmVhdGVBcnRpY3RlU2Nyb2xsVGFibGUoKTtcclxuICAgICAgICAgICAgc2VsZi5zaG93QXJ0aWRsZVNoYWRvdygpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsVGhyb3R0bGVyKCkge1xyXG4gICAgICAgICAgICBpZiAoIXNjcm9sbFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpeEFydGljbGVTY3JvbGxUYWJsZVBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYWRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dBcnRpZGxlU2hhZG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGRvY1dpbmRvdy5zY3JvbGwoc2Nyb2xsVGhyb3R0bGVyKTtcclxuICAgICAgICBkb2NXaW5kb3cucmVzaXplKHNjcm9sbFRocm90dGxlcik7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldEN1cnJUaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3VyclRpbWUoKTtcclxuICAgICAgICB2YXIgdCA9IHNldEludGVydmFsKHNlbGYuY3VyclRpbWUsIDMwMDAwKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICB0aGlzLmN1cnJUaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIuZ3QtY3Vyci10aW1lXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJkYXRhLWdtdFwiKSkgZGF0ZS5zZXRVVENIb3VycygrJCh0aGlzKS5hdHRyKFwiZGF0YS1nbXRcIikpO1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICB3ZWVrZGF5ID0gZGF0ZS5nZXREYXkoKSxcclxuICAgICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCksXHJcbiAgICAgICAgICAgICAgICB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgd2Vla2RheXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQktC+0YHQutGA0LXRgdC10L3RjNC1XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQn9C+0L3QtdC00LXQu9GM0L3QuNC6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQktGC0L7RgNC90LjQulwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KHRgNC10LTQsFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0KfQtdGC0LLQtdGA0LNcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCf0Y/RgtC90LjRhtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQodGD0LHQsdC+0YLQsFwiXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhlcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBcItGP0L3QstCw0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0YTQtdCy0YDQsNC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItC80LDRgNGC0LBcIixcclxuICAgICAgICAgICAgICAgICAgICBcItCw0L/RgNC10LvRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LzQsNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQuNGO0L3Rj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0LjRjtC70Y9cIixcclxuICAgICAgICAgICAgICAgICAgICBcItCw0LLQs9GD0YHRgtCwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLRgdC10L3RgtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQvtC60YLRj9Cx0YDRj1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwi0L3QvtGP0LHRgNGPXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCLQtNC10LrQsNCx0YDRj1wiXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBpZiAoaG91cnMgPCAxMCkgaG91cnMgPSBcIjBcIiArIGhvdXJzO1xyXG4gICAgICAgICAgICBpZiAobWludXRlcyA8IDEwKSBtaW51dGVzID0gXCIwXCIgKyBtaW51dGVzO1xyXG4gICAgICAgICAgICB3ZWVrZGF5ID0gd2Vla2RheXNbd2Vla2RheV07XHJcbiAgICAgICAgICAgIG1vbnRoID0gbW9udGhlc1ttb250aF07XHJcbiAgICAgICAgICAgIGlmICgkKFwiLmd0LWN1cnItdGltZS10aW1lXCIpKVxyXG4gICAgICAgICAgICAgICAgJChcIi5ndC1jdXJyLXRpbWUtdGltZVwiKS5odG1sKGhvdXJzICsgXCI6XCIgKyBtaW51dGVzKTtcclxuICAgICAgICAgICAgaWYgKCQoXCIuZ3QtY3Vyci10aW1lLWRhdGVcIikpXHJcbiAgICAgICAgICAgICAgICAkKFwiLmd0LWN1cnItdGltZS1kYXRlXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla2RheSArIFwiLCBcIiArIGRheSArIFwiIFwiICsgbW9udGggKyBcIiBcIiArIHllYXJcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LWN1cnItdGltZVwiKSkge1xyXG4gICAgICAgIHNlbGYuc2V0Q3VyclRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbm5lci1zY3JvbGxcIikpIHtcclxuICAgICAgICAkKCcuZ3QtaW5uZXItc2Nyb2xsJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgJCh0aGlzKS5uaWNlU2Nyb2xsKHtcclxuICAgICAgICAgICAgICAgIGN1cnNvcm9wYWNpdHltaW46ICcxJyxcclxuICAgICAgICAgICAgICAgIGN1cnNvcm9wYWNpdHltYXg6ICcxJyxcclxuICAgICAgICAgICAgICAgIGN1cnNvcndpZHRoOiAnMnB4JyxcclxuICAgICAgICAgICAgICAgIGN1cnNvcmJvcmRlcjogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgbW91c2VzY3JvbGxzdGVwOiAnNjAnLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjQ0VDRUNFXCIsXHJcbiAgICAgICAgICAgICAgICByYWlsb2Zmc2V0OiAnbGVmdCcsXHJcbiAgICAgICAgICAgICAgICB6aW5kZXg6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yY29sb3I6IFwiI0NFQ0VDRVwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvLyBfaW5uZXJfc2Nyb2xsICBtdXN0IGJlIGJlZm9yZSBfdGFiX3NsaWRlciAtICFpbXBvcnRhbnRcclxuXHJcbiAgICB0aGlzLnRhYlNsaWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFiU2xpZGVycyA9ICQoXCIuZ3QtdGFic1wiKTtcclxuICAgICAgICB0YWJTbGlkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VyclRhYnMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBjdXJyVGFicy5maW5kKFwiLmd0LXRhYnMtYnV0dG9uXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRhYlNsaWRlckFjdGlvbihjdXJyVGFicywgJCh0aGlzKS5pbmRleCgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZi50YWJTbGlkZXJBY3Rpb24oY3VyclRhYnMsMCx0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudGFiU2xpZGVyQWN0aW9uID0gZnVuY3Rpb24gKGVsLCBudW0gLGluaXQpIHtcclxuICAgICAgICB2YXIgYnV0dG9ucyA9ICQoZWwuZmluZChcIi5ndC10YWJzLWJ1dHRvblwiKSksXHJcbiAgICAgICAgICAgIG1haW4gPSAgJChlbC5maW5kKFwiLmd0LXRhYnMtbWFpblwiKSlcclxuICAgICAgICBlbC5maW5kKCcuZ3QtaW5uZXItc2Nyb2xsLXRhYicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjJyArICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnKSkuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJ1dHRvbnMucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgbWFpbi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAkKGJ1dHRvbnNbbnVtXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgJChtYWluW251bV0pLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgXHJcbiAgICAgICAgaWYoJCgnIycgKyAkKG1haW5bbnVtXSkuZmluZCgnLmd0LWlubmVyLXNjcm9sbC10YWInKS5hdHRyKCdkYXRhLXNjcm9sbCcpKS5maW5kKCcuZ3Qtc2Nyb2xsLWN1cnNvcicpLmhlaWdodCgpICE9IDAgfHwgaW5pdCl7XHJcbiAgICAgICAgICAgICQoJyMnICsgJChtYWluW251bV0pLmZpbmQoJy5ndC1pbm5lci1zY3JvbGwtdGFiJykuYXR0cignZGF0YS1zY3JvbGwnKSkuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmd0LXRhYnNcIikpIHtcclxuICAgICAgICBzZWxmLnRhYlNsaWRlcigpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy9kb2VzIG5vdCB3b3JrXHJcblxyXG4gICAgdGhpcy5jcmVhdGVWaWV3Q2FyZExpc3RlbmVycyA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLXZpc2l0Jykub24oJ2NsaWNrJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY2xpY2tWaXNpdFZpZXdDYXJkKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbC5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1waW4tcGx1cycpLm9uKCdjbGljaycsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmNsaWNrU2VlblZpZXdDYXJkKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbC5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1ib29rbWFya3MnKS5vbignY2xpY2snLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5jbGlja01hcmtWaWV3Q2FyZChlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtc2hhcmUnKS5vbignY2xpY2snLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5jbGlja1NoYXJlVmlld0NhcmQoZWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLXNoYXJlJykuZmluZCgnYScpLm9uKCdjbGljaycsZnVuY3Rpb24gKGV2ZW50LGVsKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgc2VsZi52ZWl3Q2FyZFNvY2lhbChlbCk7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudmVpd0NhcmRTb2NpYWwgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2sgc29jaWFsJyk7XHJcbiAgICAgICAgc2VsZi5jbG9zZVNoYXJlVmlld0NhcmQoZWwpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIHRoaXMub3BlblNoYXJlVmlld0NhcmQgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAkKGVsKS5hZGRDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jbG9zZVNoYXJlVmlld0NhcmQgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAkKGVsKS5yZW1vdmVDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jbGlja1NoYXJlVmlld0NhcmQgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgIFxyXG4gICAgICAgIHZhciBidXR0b24gPSBlbC5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1zaGFyZScpLnBhcmVudCgpO1xyXG4gICAgICAgIGlmKGJ1dHRvbi5oYXNDbGFzcygnZ3QtYWN0aXZlJykpe1xyXG4gICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ2d0LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBzZWxmLmNsb3NlU2hhcmVWaWV3Q2FyZChlbCk7XHJcbiAgICBcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgc2VsZi5vcGVuU2hhcmVWaWV3Q2FyZChlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuY2xpY2tWaXNpdFZpZXdDYXJkID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgaWYoZWwuaGFzQ2xhc3MoJ2d0LWFjdGl2ZScpKSByZXR1cm47XHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGVsLmZpbmQoJy5ndC12aWV3LWNhcmRzLWljb25zLXZpc2l0JykucGFyZW50KCk7XHJcbiAgICAgICAgaWYoYnV0dG9uLmhhc0NsYXNzKCdndC1hY3RpdmUnKSl7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBub3QgdmlzaXRlZCBub3cnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrIHZpc2l0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5jbGlja1NlZW5WaWV3Q2FyZCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmKGVsLmhhc0NsYXNzKCdndC1hY3RpdmUnKSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBidXR0b24gPSBlbC5maW5kKCcuZ3Qtdmlldy1jYXJkcy1pY29ucy1waW4tcGx1cycpLnBhcmVudCgpO1xyXG4gICAgICAgIGlmKGJ1dHRvbi5oYXNDbGFzcygnZ3QtYWN0aXZlJykpe1xyXG4gICAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ2d0LWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2sgbm90IHNlZW4gbm93Jyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBzZWVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuY2xpY2tNYXJrVmlld0NhcmQgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICBpZihlbC5oYXNDbGFzcygnZ3QtYWN0aXZlJykpIHJldHVybjtcclxuICAgICAgICB2YXIgYnV0dG9uID0gZWwuZmluZCgnLmd0LXZpZXctY2FyZHMtaWNvbnMtYm9va21hcmtzJykucGFyZW50KCk7XHJcbiAgICAgICAgaWYoYnV0dG9uLmhhc0NsYXNzKCdndC1hY3RpdmUnKSl7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnZ3QtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBkZWxldGUgYm9va21hcmsnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdndC1hY3RpdmUnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrIGFkZCBib29rbWFyaycpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICgkKFwiKlwiKS5pcyhcIi5ndC12aWV3LWNhcmRzLWlubmVyXCIpKSB7XHJcbiAgICBcclxuICAgICAgICAkKCcuZ3Qtdmlldy1jYXJkcy1pbm5lcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmNyZWF0ZVZpZXdDYXJkTGlzdGVuZXJzKCQodGhpcykpO1xyXG4gICAgICAgIH0pXHJcbiAgICBcclxuICAgIFxyXG4gICAgfVxyXG4gICAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC90LDQu9C40YfQuNC1IC0g0L7QsdGB0YPQtNC40YLRjCDRgSDQsdC10LrQvtC8INC/0L7QstC10LTQtdCz0YLQtVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgJCgnI2d0LWVudGVyLWZvcm0tZmFjZWJvb2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcignZmFjZWJvb2snKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS10d2l0dGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsRW50ZXIoJ3R3aXR0ZXInKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtZW50ZXItZm9ybS1nb29nbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxFbnRlcignZ29vZ2xlJylcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tZmFjZWJvb2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ2ZhY2Vib29rJylcclxuICAgIH0pO1xyXG4gICAgJCgnI2d0LXJlZy1mb3JtLXR3aXR0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zb2NpYWxSZWdpc3RyYXRpb24oJ3R3aXR0ZXInKVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZ3QtcmVnLWZvcm0tZ29vZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc29jaWFsUmVnaXN0cmF0aW9uKCdnb29nbGUnKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMuc29jaWFsUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBcclxuICAgICAgICBhbGVydChcItCg0LXQs9C40YHRgtGA0LDRhtC40Y8g0YfQtdGA0LXQtyBcIiArIHRva2VuKVxyXG4gICAgXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zb2NpYWxFbnRlciA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgXHJcbiAgICAgICAgYWxlcnQoXCLQktGF0L7QtCDRh9C10YDQtdC3IFwiICsgdG9rZW4pXHJcbiAgICBcclxuICAgIH07XHJcbiAgIHRoaXMuY3V0TmV3cyA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudCgpLFxyXG4gICAgICAgICAgIG1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKSxcclxuICAgICAgICAgICBjdXR0aW5nRWwgPSBlbC5maW5kKCdwJyksXHJcbiAgICAgICAgICAgY3VyckhlaWdodCxcclxuICAgICAgICAgICBjdXR0aW5nTGVuZ2h0LFxyXG4gICAgICAgICAgIG5ld1RleHQ7XHJcbiAgICAgICBwYXJlbnQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBtYXhIZWlnaHQgLT0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgICAgIH0pO1xyXG4gICBcclxuICAgICAgIG1heEhlaWdodCA9IG1heEhlaWdodCArIGVsLmhlaWdodCgpIC0yMDtcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgICAgIGN1dHRpbmdFbC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBjdXJySGVpZ2h0ID0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgXHJcbiAgICAgICAgICAgaWYoIGN1cnJIZWlnaHQgPCBtYXhIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICBtYXhIZWlnaHQgLT1jdXJySGVpZ2h0XHJcbiAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICBpZighbWF4SGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgIGN1dHRpbmdMZW5naHQgPSAgTWF0aC5mbG9vcigkKHRoaXMpLnRleHQoKS5sZW5ndGggKiBtYXhIZWlnaHQgLyBjdXJySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgIG5ld1RleHQgPSAkKHRoaXMpLnRleHQoKS5zdWJzdHJpbmcoMCwgY3V0dGluZ0xlbmdodC01KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIGN1dExhc3RTeW1ib2woKTtcclxuICAgICAgICAgICAgICAgICAgICQodGhpcykudGV4dCgobmV3VGV4dCkgKyAnLi4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcbiAgICAgICAvL1xyXG4gICAgICAgLy8gZnVuY3Rpb24gY3V0TGFzdFN5bWJvbCgpIHtcclxuICAgICAgIC8vICAgICB2YXIgc3RyTGVuZ3RoID0gbmV3VGV4dC5sZW5ndGg7XHJcbiAgICAgICAvLyAgICAgaWYobmV3VGV4dC5jaGFyQXQoc3RyTGVuZ3RoIC0gMSkgPT0gJyAnKXtcclxuICAgICAgIC8vICAgICAgICAgbmV3VGV4dD0gbmV3VGV4dC5zdWJzdHJpbmcoMCwgc3RyTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAvLyAgICAgfWVsc2V7XHJcbiAgICAgICAvLyAgICAgICAgIG5ld1RleHQgPSBuZXdUZXh0LnN1YnN0cmluZygwLCBzdHJMZW5ndGggLSAxKTtcclxuICAgICAgIC8vICAgICAgICAgc2V0VGltZW91dChjdXRMYXN0U3ltYm9sKVxyXG4gICAgICAgLy8gICAgIH1cclxuICAgICAgIC8vIH1cclxuICAgXHJcbiAgIH07XHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIGlmICgkKFwiZGl2XCIpLmlzKFwiLmpzLW5ld3MtY3V0XCIpKSB7XHJcbiAgICAgICAkKFwiLmpzLW5ld3MtY3V0XCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIHNlbGYuY3V0TmV3cygkKHRoaXMpKTtcclxuICAgICAgIH0pO1xyXG4gICBcclxuICAgXHJcbiAgICAgICBkb2NXaW5kb3cucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAkKFwiLmpzLW5ld3MtY3V0XCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICBzZWxmLmN1dE5ld3MoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICB9KTtcclxuICAgfVxyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICB0aGlzLmN1dFJlYWRNb3JlU2xpZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgdmFyIGN1dHRpbmdzID0gJChcIi5ndC1yZWFkLW1vcmUtc2xpZGVyLXRleHQtaW5uZXJcIik7XHJcbiAgICAgICBjdXR0aW5ncy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBzZWxmLmN1dHRpbmcoJCh0aGlzKSwgMTYwKTtcclxuICAgICAgIH0pO1xyXG4gICB9O1xyXG4gICBcclxuICAgdGhpcy5jdXR0aW5nID0gZnVuY3Rpb24gKGVsLCBudW0pIHtcclxuICAgICAgIHZhciBuZXdzVGV4dCA9IGVsLnRleHQoKTtcclxuICAgICAgIGlmIChuZXdzVGV4dC5sZW5ndGggPiBudW0pIHtcclxuICAgICAgICAgICBuZXdzVGV4dCA9IG5ld3NUZXh0LnNsaWNlKDAsIG51bSkgKyBcIi4uLlwiO1xyXG4gICAgICAgICAgIGVsLnRleHQobmV3c1RleHQpO1xyXG4gICAgICAgfVxyXG4gICB9O1xyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICBpZiAoJChcInBcIikuaXMoXCIuZ3QtcmVhZC1tb3JlLXNsaWRlci10ZXh0LWlubmVyXCIpKSB7XHJcbiAgICAgICBzZWxmLmN1dFJlYWRNb3JlU2xpZGVyKCk7XHJcbiAgIH1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICBkb2MucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgXHJcbiAgICAgICAgc2VsZi5mb290ZXJIZWlnaHQoKTsvL19mb290ZXJfaGVpZ2h0LmpzXHJcbiAgICAgICAgc2VsZi5kZXNrVG9wTWVudVNjcm9sbCgpOy8vX2Rlc2N0b3BfaGVhZGVyX2Z1bmMuanNcclxuICAgIFxyXG4gICAgXHJcbiAgICB9KTtcclxuICAgIHRoaXMucGFnZVVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6IDB9LCA4MDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMudXBQYWdlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+IDMwKSB7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uLmFkZENsYXNzKFwiZ3QtdmlzaWJsZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cEJ1dHRvbi5yZW1vdmVDbGFzcyhcImd0LXZpc2libGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB1cEJ1dHRvbi5vbihcImNsaWNrXCIsIHNlbGYucGFnZVVwKTtcclxuICAgIFxyXG4gICAgZG9jV2luZG93LnNjcm9sbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi51cFBhZ2VCdXR0b24oKTsvL191cF9idXR0b24uanNcclxuICAgICAgICBpZiAoJChcIi5ndC1oZWFkZXItbWVudVwiKS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZGVza1RvcE1lbnVTY3JvbGwoKTsvL19kZXNjdG9wX2hlYWRlcl9mdW5jLmpzXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBkb2NXaW5kb3cucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmRlc2tUb3BNZW51U2Nyb2xsKCk7XHJcbiAgICAgICAgc2VsZi5mb290ZXJIZWlnaHQoKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChndEhlYWRlci5oYXNDbGFzcyhcImd0LW9wZW5cIikpIHNlbGYubW9iaWxlTWVudUNsb3NlKCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoJChcImRpdlwiKS5pcyhcIi5ndC1pbWctaG9sZGVyLWFic1wiKSkge1xyXG4gICAgICAgICAgICAkKFwiLmd0LWltZy1ob2xkZXItYWJzXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LXdpZHRoXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImd0LWhlaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoXCJkaXZcIikuaXMoXCIuZ3QtaW1nLWhvbGRlci1hYnNcIikpIHtcclxuICAgICAgICAgICAgJChcIi5ndC1pbWctaG9sZGVyLWFic1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW1nSG9sZGVyRnVuYygkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgYm9keS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudC50YXJnZXQpO1xyXG4gICAgXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbn07XHJcbiQoZG9jdW1lbnQpLnJlYWR5KFxyXG5cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ29Ub1RyaXAgPSBuZXcgR29Ub1RyaXAoKTtcclxuICAgIH1cclxuKTsiXX0=
